(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[270],{4270:(R,T,a)=>{"use strict";a.r(T),a.d(T,{ArticleComponent:()=>$});var t=a(2223),O=a(4755),b=a(8884),f=a(5855),g=a(9300),_=a(4004),d=a(8505),y=a(262),h=a(8746),D=a(5796),C=a(9415),x=a(3500),U=a(8028),N=a(2993),F=a(5249),w=a(3665),H=a(992),W=a(7579),I=a(2722),J=a(928);let B=(()=>{class s{constructor(){this.deviceSrv=(0,t.f3M)(J.U),this.sharedSrv=(0,t.f3M)(x.F),this.elementRef=(0,t.f3M)(t.SBq),this.router=(0,t.f3M)(D.F0),this.darkMode$=(0,f.Dx)(this.sharedSrv.darkMode),this._destroy$=new W.x}ngOnInit(){this.router.events.pipe((0,g.h)(r=>r instanceof D.OD),(0,I.R)(this._destroy$)).subscribe(()=>{this.elementRef.nativeElement.innerHTML=""}),this.router.events.pipe((0,g.h)(r=>r instanceof D.m2),(0,I.R)(this._destroy$)).subscribe(()=>{this.generateComment()})}ngAfterViewInit(){this.generateComment()}ngOnDestroy(){this._destroy$.next(null),this._destroy$.complete()}generateComment(){if(!this.deviceSrv.isClient)return;let r;const M=this.elementRef.nativeElement;this.darkMode$.pipe((0,I.R)(this._destroy$)).subscribe(E=>{r&&M.removeChild(r),r=document.createElement("script"),r.setAttribute("src","https://giscus.app/client.js"),r.setAttribute("data-repo","pzps94038/RonWeb"),r.setAttribute("data-repo-id","R_kgDOJU7i_Q"),r.setAttribute("data-category","Announcements"),r.setAttribute("data-category-id","DIC_kwDOJU7i_c4CWkJZ"),r.setAttribute("data-mapping","title"),r.setAttribute("data-reactions-enabled","1"),r.setAttribute("data-emit-metadata","0"),r.setAttribute("data-theme",E?"dark_tritanopia":"light_tritanopia"),r.setAttribute("data-lang","zh-TW"),r.setAttribute("data-loading","lazy"),r.setAttribute("crossorigin","anonymous"),r.setAttribute("async",""),M.appendChild(r)})}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-giscus"]],standalone:!0,features:[t.jDz],decls:0,vars:0,template:function(r,M){},dependencies:[O.ez],encapsulation:2}),s})();const A=function(s){return["/blog","label",s]};function v(s,p){if(1&s&&(t.TgZ(0,"a",15),t._UZ(1,"ng-icon",16),t.TgZ(2,"h5"),t._uU(3),t.qZA()()),2&s){const r=p.$implicit;t.Q6J("routerLink",t.VKq(2,A,r.labelId)),t.xp6(3),t.Oqu(r.labelName)}}const Y=function(s){return["/blog","category",s]},K=function(){return[]};function o(s,p){if(1&s&&(t.ynx(0),t.TgZ(1,"div")(2,"h3",4),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"div",5),t._UZ(6,"ng-icon",6),t.TgZ(7,"h4"),t._uU(8),t.ALo(9,"dayJs"),t.qZA()(),t.TgZ(10,"a",7),t._UZ(11,"ng-icon",8),t.TgZ(12,"h5"),t._uU(13),t.qZA()(),t.TgZ(14,"div",9),t.YNc(15,v,4,4,"a",10),t.qZA()()(),t._UZ(16,"div",11)(17,"div",12),t.ALo(18,"safe"),t._UZ(19,"div",13)(20,"div",12),t.ALo(21,"safe"),t._UZ(22,"div",14)(23,"app-giscus"),t.BQk()),2&s){const r=t.oxw(2);let M;t.xp6(3),t.Oqu(r.article().articleTitle),t.xp6(5),t.Oqu(t.xi3(9,7,r.article().createDate,"YYYY/MM/DD hh:mm")),t.xp6(2),t.Q6J("routerLink",t.VKq(16,Y,r.article().categoryId)),t.xp6(3),t.Oqu(r.article().categoryName),t.xp6(2),t.Q6J("ngForOf",null!==(M=null==(M=r.article())?null:M.labels)&&void 0!==M?M:t.DdM(18,K)),t.xp6(2),t.Q6J("innerHTML",t.xi3(18,10,r.article().previewContent,"html"),t.oJD),t.xp6(3),t.Q6J("innerHTML",t.xi3(21,13,r.article().content,"html"),t.oJD)}}function i(s,p){if(1&s&&(t.ynx(0),t.YNc(1,o,24,19,"ng-container",1),t.BQk()),2&s){const r=t.oxw(),M=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!r.isLoading()&&r.article())("ngIfElse",M)}}function e(s,p){1&s&&(t.TgZ(0,"div",5),t._UZ(1,"div",19),t.qZA())}function c(s,p){1&s&&t._UZ(0,"div",20)}const n=function(){return[1,2]},u=function(){return[1,2,3,4,5,6,7,8,9,10]};function l(s,p){1&s&&(t.TgZ(0,"div"),t.YNc(1,e,2,0,"div",17),t.qZA(),t._UZ(2,"div",11),t.TgZ(3,"div"),t.YNc(4,c,1,0,"div",18),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(2,n)),t.xp6(3),t.Q6J("ngForOf",t.DdM(3,u)))}function m(s,p){if(1&s){const r=t.EpF();t.TgZ(0,"app-error",21),t.NdJ("refresh",function(){t.CHM(r);const E=t.oxw();return t.KtG(E.getArticleById(E.articleId(),!1))}),t.qZA()}}let $=(()=>{class s{constructor(){this.articleSrv=(0,t.f3M)(b.n),this.route=(0,t.f3M)(D.gz),this.sharedSrv=(0,t.f3M)(x.F),this.router=(0,t.f3M)(D.F0),this.articleId=(0,t.tdS)(void 0),this.article=(0,t.tdS)(void 0),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.paramMap.pipe((0,g.h)(r=>!!r.get("id")),(0,_.U)(r=>r.get("id")),(0,_.U)(r=>parseInt(r)),(0,d.b)(r=>this.articleId.set(r)),(0,f.sL)(this._destroyRef)).subscribe(r=>this.getArticleById(r))}getArticleById(r,M=!0){this.articleSrv.getArticleById(r,M).pipe((0,d.b)(()=>this.isLoading.set(!0)),(0,y.K)(E=>{throw this.isError.set(!0),E}),(0,h.x)(()=>this.isLoading.set(!1)),(0,f.sL)(this._destroyRef)).subscribe(E=>{if(this.sharedSrv.ifSuccess(E,!1)){const{data:L}=E,{articleTitle:Z}=L;this.sharedSrv.setTitle(Z),this.article.set(L),this.updateArticleViews(r)}else E.returnCode===C.N.NotFound?this.router.navigate(["blog","notFound"]):this.isError.set(!0)})}updateArticleViews(r){this.articleSrv.updateArticleViews(r).pipe((0,f.sL)(this._destroyRef)).subscribe()}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-article"]],standalone:!0,features:[t._Bn([(0,N.kp)({heroCalendarDays:F.mVh,heroHashtag:F.u2C,heroTag:F.PRH,heroFolder:F.Mak})]),t.jDz],decls:6,vars:2,consts:[[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"text-xl","font-semibold"],[1,"flex","items-center"],["name","heroCalendarDays",1,"mr-1"],[1,"flex","items-center","link","link-secondary",3,"routerLink"],["name","heroFolder",1,"mr-1"],[1,"flex","flex-wrap"],["class","flex items-center link link-secondary mr-1",3,"routerLink",4,"ngFor","ngForOf"],[1,"divider","my-1"],[1,"ck-content",3,"innerHTML"],[1,"py-5"],[1,"divider","my-5"],[1,"flex","items-center","link","link-secondary","mr-1",3,"routerLink"],["name","heroHashtag"],["class","flex items-center",4,"ngFor","ngForOf"],["class","h-5 my-3 w-full rounded-lg bg-slate-300/10 relative before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:border-t before:border-slate-300/10 before:bg-gradient-to-r before:from-transparent before:bg-slate-300/10 before:to-transparent overflow-hidden",4,"ngFor","ngForOf"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[3,"refresh"]],template:function(r,M){if(1&r&&(t.TgZ(0,"div",0),t.YNc(1,i,2,2,"ng-container",1),t.YNc(2,l,5,4,"ng-template",null,2,t.W1O),t.YNc(4,m,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&r){const E=t.MAs(5);t.xp6(1),t.Q6J("ngIf",!M.isError())("ngIfElse",E)}},dependencies:[O.ez,O.sg,O.O5,U.q,N.Fv,w.g,D.rH,H.y,B]}),s})()},8884:(R,T,a)=>{"use strict";a.d(T,{n:()=>_});var t=a(4782),O=a(3144),b=a(2223),f=a(2340),g=a(681);let _=(()=>{class d{constructor(){this.http=(0,b.f3M)(O.eN),this.transferSrv=(0,b.f3M)(g.Z),this.articleMap=new Map,this.articleByIdMap=new Map}getArticle(h,D=!0){return this.transferSrv.transfer(`articleList-${h}`,()=>{if(D&&this.articleMap.has(h))return this.articleMap.get(h);const x=h?(new O.LE).append("page",h):void 0,U=this.http.get(`${f.N.baseUrl}/article`,{params:x}).pipe((0,t.d)());return this.articleMap.set(h,U),U})}getArticleById(h,D=!0){return this.transferSrv.transfer(`article-${h}`,()=>{if(D&&this.articleByIdMap.has(h))return this.articleByIdMap.get(h);const x=this.http.get(`${f.N.baseUrl}/article/${h}`).pipe((0,t.d)());return this.articleByIdMap.set(h,x),x})}createArticle(h){return this.http.post(`${f.N.baseUrl}/article`,h)}updateArticle(h){return this.http.patch(`${f.N.baseUrl}/article/${h.articleId}`,h)}deleteArticle(h){return this.http.delete(`${f.N.baseUrl}/article/${h}`)}updateArticleViews(h){return this.http.patch(`${f.N.baseUrl}/article/updateArticleViews/${h}`,{})}}return d.\u0275fac=function(h){return new(h||d)},d.\u0275prov=b.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},8028:(R,T,a)=>{"use strict";a.d(T,{q:()=>b});var t=a(2223),O=a(5512);let b=(()=>{class f{constructor(){this.errorOptions={path:"assets/lottie/error-404.json"},this.refreshEmitter=new t.vpe}}return f.\u0275fac=function(_){return new(_||f)},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-error"]],outputs:{refreshEmitter:"refresh"},standalone:!0,features:[t.jDz],decls:5,vars:1,consts:[[3,"options"],[1,"flex","justify-center","items-center"],[1,"btn","btn-warning",3,"click"]],template:function(_,d){1&_&&(t.TgZ(0,"div"),t._UZ(1,"ng-lottie",0),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return d.refreshEmitter.emit(!0)}),t._uU(4,"\u91cd\u65b0\u6574\u7406"),t.qZA()()()),2&_&&(t.xp6(1),t.Q6J("options",d.errorOptions))},dependencies:[O.r]}),f})()},3665:(R,T,a)=>{"use strict";a.d(T,{g:()=>f});var t=a(1764),b=a(2223);let f=(()=>{class g{transform(d,y){return t(d).format(y)}}return g.\u0275fac=function(d){return new(d||g)},g.\u0275pipe=b.Yjl({name:"dayJs",type:g,pure:!0,standalone:!0}),g})()},681:(R,T,a)=>{"use strict";a.d(T,{Z:()=>_});var t=a(2223),O=a(928),b=a(9646),f=a(8505),g=a(4782);let _=(()=>{class d{constructor(){this.transferState=(0,t.f3M)(t.kie),this.deviceSrv=(0,t.f3M)(O.U)}transfer(h,D){const C=(0,t.Cb6)(h);if(this.transferState.hasKey(C)){const x=this.transferState.get(C,void 0);return(0,b.of)(x)}return D().pipe((0,f.b)(U=>{this.deviceSrv.isServer&&this.transferState.set(C,U)}),(0,g.d)())}}return d.\u0275fac=function(h){return new(h||d)},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},1764:function(R){R.exports=function(){"use strict";var a=6e4,t=36e5,O="millisecond",b="second",f="minute",g="hour",_="day",d="week",y="month",h="quarter",D="year",C="date",x="Invalid Date",U=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,F={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var i=["th","st","nd","rd"],e=o%100;return"["+o+(i[(e-20)%10]||i[e]||i[0])+"]"}},w=function(o,i,e){var c=String(o);return!c||c.length>=i?o:""+Array(i+1-c.length).join(e)+o},H={s:w,z:function(o){var i=-o.utcOffset(),e=Math.abs(i),c=Math.floor(e/60),n=e%60;return(i<=0?"+":"-")+w(c,2,"0")+":"+w(n,2,"0")},m:function o(i,e){if(i.date()<e.date())return-o(e,i);var c=12*(e.year()-i.year())+(e.month()-i.month()),n=i.clone().add(c,y),u=e-n<0,l=i.clone().add(c+(u?-1:1),y);return+(-(c+(e-n)/(u?n-l:l-n))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:y,y:D,w:d,d:_,D:C,h:g,m:f,s:b,ms:O,Q:h}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return void 0===o}},W="en",I={};I[W]=F;var J=function(o){return o instanceof Y},B=function o(i,e,c){var n;if(!i)return W;if("string"==typeof i){var u=i.toLowerCase();I[u]&&(n=u),e&&(I[u]=e,n=u);var l=i.split("-");if(!n&&l.length>1)return o(l[0])}else{var m=i.name;I[m]=i,n=m}return!c&&n&&(W=n),n||!c&&W},A=function(o,i){if(J(o))return o.clone();var e="object"==typeof i?i:{};return e.date=o,e.args=arguments,new Y(e)},v=H;v.l=B,v.i=J,v.w=function(o,i){return A(o,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var Y=function(){function o(e){this.$L=B(e.locale,null,!0),this.parse(e)}var i=o.prototype;return i.parse=function(e){this.$d=function(c){var n=c.date,u=c.utc;if(null===n)return new Date(NaN);if(v.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var l=n.match(U);if(l){var m=l[2]-1||0,$=(l[7]||"0").substring(0,3);return u?new Date(Date.UTC(l[1],m,l[3]||1,l[4]||0,l[5]||0,l[6]||0,$)):new Date(l[1],m,l[3]||1,l[4]||0,l[5]||0,l[6]||0,$)}}return new Date(n)}(e),this.$x=e.x||{},this.init()},i.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},i.$utils=function(){return v},i.isValid=function(){return this.$d.toString()!==x},i.isSame=function(e,c){var n=A(e);return this.startOf(c)<=n&&n<=this.endOf(c)},i.isAfter=function(e,c){return A(e)<this.startOf(c)},i.isBefore=function(e,c){return this.endOf(c)<A(e)},i.$g=function(e,c,n){return v.u(e)?this[c]:this.set(n,e)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(e,c){var n=this,u=!!v.u(c)||c,l=v.p(e),m=function(Z,S){var P=v.w(n.$u?Date.UTC(n.$y,S,Z):new Date(n.$y,S,Z),n);return u?P:P.endOf(_)},$=function(Z,S){return v.w(n.toDate()[Z].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(S)),n)},s=this.$W,p=this.$M,r=this.$D,M="set"+(this.$u?"UTC":"");switch(l){case D:return u?m(1,0):m(31,11);case y:return u?m(1,p):m(0,p+1);case d:var E=this.$locale().weekStart||0,L=(s<E?s+7:s)-E;return m(u?r-L:r+(6-L),p);case _:case C:return $(M+"Hours",0);case g:return $(M+"Minutes",1);case f:return $(M+"Seconds",2);case b:return $(M+"Milliseconds",3);default:return this.clone()}},i.endOf=function(e){return this.startOf(e,!1)},i.$set=function(e,c){var n,u=v.p(e),l="set"+(this.$u?"UTC":""),m=(n={},n[_]=l+"Date",n[C]=l+"Date",n[y]=l+"Month",n[D]=l+"FullYear",n[g]=l+"Hours",n[f]=l+"Minutes",n[b]=l+"Seconds",n[O]=l+"Milliseconds",n)[u],$=u===_?this.$D+(c-this.$W):c;if(u===y||u===D){var s=this.clone().set(C,1);s.$d[m]($),s.init(),this.$d=s.set(C,Math.min(this.$D,s.daysInMonth())).$d}else m&&this.$d[m]($);return this.init(),this},i.set=function(e,c){return this.clone().$set(e,c)},i.get=function(e){return this[v.p(e)]()},i.add=function(e,c){var n,u=this;e=Number(e);var l=v.p(c),m=function(p){var r=A(u);return v.w(r.date(r.date()+Math.round(p*e)),u)};if(l===y)return this.set(y,this.$M+e);if(l===D)return this.set(D,this.$y+e);if(l===_)return m(1);if(l===d)return m(7);var $=(n={},n[f]=a,n[g]=t,n[b]=1e3,n)[l]||1,s=this.$d.getTime()+e*$;return v.w(s,this)},i.subtract=function(e,c){return this.add(-1*e,c)},i.format=function(e){var c=this,n=this.$locale();if(!this.isValid())return n.invalidDate||x;var u=e||"YYYY-MM-DDTHH:mm:ssZ",l=v.z(this),m=this.$H,$=this.$m,s=this.$M,p=n.weekdays,r=n.months,M=function(S,P,Q,j){return S&&(S[P]||S(c,u))||Q[P].slice(0,j)},E=function(S){return v.s(m%12||12,S,"0")},L=n.meridiem||function(S,P,Q){var j=S<12?"AM":"PM";return Q?j.toLowerCase():j},Z={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:v.s(s+1,2,"0"),MMM:M(n.monthsShort,s,r,3),MMMM:M(r,s),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:M(n.weekdaysMin,this.$W,p,2),ddd:M(n.weekdaysShort,this.$W,p,3),dddd:p[this.$W],H:String(m),HH:v.s(m,2,"0"),h:E(1),hh:E(2),a:L(m,$,!0),A:L(m,$,!1),m:String($),mm:v.s($,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:l};return u.replace(N,function(S,P){return P||Z[S]||l.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(e,c,n){var u,l=v.p(c),m=A(e),$=(m.utcOffset()-this.utcOffset())*a,s=this-m,p=v.m(this,m);return p=(u={},u[D]=p/12,u[y]=p,u[h]=p/3,u[d]=(s-$)/6048e5,u[_]=(s-$)/864e5,u[g]=s/t,u[f]=s/a,u[b]=s/1e3,u)[l]||s,n?p:v.a(p)},i.daysInMonth=function(){return this.endOf(y).$D},i.$locale=function(){return I[this.$L]},i.locale=function(e,c){if(!e)return this.$L;var n=this.clone(),u=B(e,c,!0);return u&&(n.$L=u),n},i.clone=function(){return v.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},o}(),K=Y.prototype;return A.prototype=K,[["$ms",O],["$s",b],["$m",f],["$H",g],["$W",_],["$M",y],["$y",D],["$D",C]].forEach(function(o){K[o[1]]=function(i){return this.$g(i,o[0],o[1])}}),A.extend=function(o,i){return o.$i||(o(i,Y,A),o.$i=!0),A},A.locale=B,A.isDayjs=J,A.unix=function(o){return A(1e3*o)},A.en=I[W],A.Ls=I,A.p={},A}()},4782:(R,T,a)=>{"use strict";a.d(T,{d:()=>b});var t=a(4707),O=a(3099);function b(f,g,_){let d,y=!1;return f&&"object"==typeof f?({bufferSize:d=1/0,windowTime:g=1/0,refCount:y=!1,scheduler:_}=f):d=f??1/0,(0,O.B)({connector:()=>new t.t(d,g,_),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:y})}}}]);