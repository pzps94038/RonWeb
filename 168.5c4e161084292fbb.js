"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[168],{6168:(B,m,o)=>{o.r(m),o.d(m,{LoginComponent:()=>Z});var c=o(508),n=o(3020),g=o(4755),t=o(9128),l=o(5030),h=o(9589),a=o(1730),f=o(3144),_=o(2340);let M=(()=>{class u{constructor(){this.http=(0,n.f3M)(f.eN)}login(i){return this.http.post(`${_.N.baseUrl}/login`,i)}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=n.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var b=o(3500),s=o(262),p=o(8746),r=o(2993),e=o(5249),T=o(9148);function I(u,C){if(1&u){const i=n.EpF();n.TgZ(0,"div",12)(1,"div",13)(2,"span",14),n._uU(3),n.qZA()(),n.TgZ(4,"ng-icon",15),n.NdJ("click",function(){n.CHM(i);const v=n.oxw();return n.KtG(v.errMsg.set(""))}),n.qZA()()}if(2&u){const i=n.oxw();n.xp6(3),n.Oqu(i.errMsg())}}let Z=(()=>{class u{constructor(){this.loginSrv=(0,n.f3M)(M),this.sharedSrv=(0,n.f3M)(b.F),this.router=(0,n.f3M)(T.F0),this.loading=(0,n.tdS)(!1),this.errMsg=(0,n.tdS)(void 0),this._destroyRef=(0,n.f3M)(n.ktI),this.form=new l.cw({account:new l.NI("",[l.kI.required]),password:new l.NI("",[l.kI.required])}),this.loginOptions={path:"assets/lottie/login.json"}}get account(){return this.form.get("account")}get password(){return this.form.get("password")}submit(){this.form.markAllAsTouched(),this.form.valid&&(this.loading.set(!0),this.loginSrv.login({account:this.account.value,password:this.password.value}).pipe((0,s.K)(i=>{throw this.errMsg.set("\u7cfb\u7d71\u767c\u751f\u932f\u8aa4"),i}),(0,p.x)(()=>this.loading.set(!1)),(0,c.sL)(this._destroyRef)).subscribe(i=>{const{returnMessage:d,data:v}=i;if(this.sharedSrv.ifSuccess(i,!1)){const{token:y,userId:A}=v;this.sharedSrv.setToken(y),this.sharedSrv.setUserId(A),this.sharedSrv.isLogin.set(!0),this.router.navigate(["setting"])}else this.errMsg.set(d)}))}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-login"]],standalone:!0,features:[n._Bn([(0,r.kp)({heroXMark:e.CZj})]),n.jDz],decls:17,vars:6,consts:[[1,"bg-banner","bg-cover","bg-fixed","h-screen","flex","justify-center","items-center"],[1,"bg-base-100","text-base-content","rounded-md","mt-20","md:mt-0","mx-5"],[1,"text-center","text-3xl","font-semibold","my-3"],[1,"w-60","mx-auto"],[3,"options"],[1,"flex","flex-wrap","items-center","w-full","sm:w-[500px]",3,"formGroup","ngSubmit"],[1,"w-full","px-3","my-2"],["class","alert alert-error shadow-lg border-2 bg-rose-800/[0.1] border-rose-900 relative py-5",4,"ngIf"],["placeholder","\u8acb\u8f38\u5165\u5e33\u865f","formControlName","account",1,"w-full"],["type","password","placeholder","\u8acb\u8f38\u5165\u5bc6\u78bc","formControlName","password",1,"w-full"],[1,"w-full","flex","justify-center","items-center"],["type","submit",1,"btn","btn-primary","my-3","px-8",3,"disabled"],[1,"alert","alert-error","shadow-lg","border-2","bg-rose-800/[0.1]","border-rose-900","relative","py-5"],[1,"absolute","left-5","top-2"],[1,"text-base","font-semibold","text-rose-900"],["name","heroXMark",1,"cursor-pointer","absolute","right-5","top-1","md:top-3","text-rose-900",3,"click"]],template:function(i,d){1&i&&(n._UZ(0,"app-header"),n.TgZ(1,"div",0)(2,"div",1)(3,"h3",2),n._uU(4,"\u767b\u5165"),n.qZA(),n.TgZ(5,"div",3),n._UZ(6,"ng-lottie",4),n.qZA(),n.TgZ(7,"form",5),n.NdJ("ngSubmit",function(){return d.submit()}),n.TgZ(8,"div",6),n.YNc(9,I,5,1,"div",7),n.qZA(),n.TgZ(10,"div",6),n._UZ(11,"app-input",8),n.qZA(),n.TgZ(12,"div",6),n._UZ(13,"app-input",9),n.qZA(),n.TgZ(14,"div",10)(15,"button",11),n._uU(16," \u767b\u5165 "),n.qZA()()()()()),2&i&&(n.xp6(6),n.Q6J("options",d.loginOptions),n.xp6(1),n.Q6J("formGroup",d.form),n.xp6(2),n.Q6J("ngIf",d.errMsg()),n.xp6(6),n.ekj("loading",d.loading()),n.Q6J("disabled",d.loading()))},dependencies:[g.ez,g.O5,t.a,l.UX,l._Y,l.JJ,l.JL,l.sg,l.u,h.G,a.r,r.Fv]}),u})()},1378:(B,m,o)=>{o.d(m,{A:()=>t,x:()=>g});var c=o(3020),n=o(5030);const g=l=>({provide:n.JU,useExisting:(0,c.Gpc)(()=>l),multi:!0});let t=(()=>{class l{constructor(a,f){this.injector=a,this.cdr=f,this.labelClass="",this.class="",this.showErrorMsg=!0,this.val="",this.disabled=!1}ngOnInit(){this.ngControl=this.injector.get(n.a5)}ngAfterViewInit(){this.control=this.ngControl?.control,this.cdr.detectChanges()}writeValue(a){this.val=a}registerOnChange(a){this.onChange=a}registerOnTouched(a){this.onTouched=a}setDisabledState(a){this.disabled=a}change(){this.onChange&&this.onTouched&&(this.onChange(this.val),this.onTouched())}}return l.\u0275fac=function(a){return new(a||l)(c.Y36(c.zs3),c.Y36(c.sBO))},l.\u0275cmp=c.Xpm({type:l,selectors:[["app-basic-input"]],inputs:{labelName:"labelName",labelClass:"labelClass",class:"class",showErrorMsg:"showErrorMsg"},standalone:!0,features:[c.jDz],decls:0,vars:0,template:function(a,f){},encapsulation:2}),l})()},9128:(B,m,o)=>{o.d(m,{a:()=>b});var c=o(5030),n=o(4755),g=o(1378),t=o(3020);const l=function(s,p){return{"text-success":s,"text-error":p}};function h(s,p){if(1&s&&(t.TgZ(0,"label",3),t._uU(1),t.qZA()),2&s){const r=t.oxw();t.Tol(r.labelClass),t.Q6J("for",null==r.ngControl?null:r.ngControl.name)("ngClass",t.WLB(5,l,(null==r.control?null:r.control.touched)&&!(null!=r.control&&r.control.errors),(null==r.control?null:r.control.touched)&&(null==r.control?null:r.control.errors))),t.xp6(1),t.Oqu(r.labelName)}}function a(s,p){1&s&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u6b64\u6b04\u4f4d\u5fc5\u586b"),t.qZA()())}function f(s,p){1&s&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u8acb\u8f38\u5165\u6b63\u78ba\u683c\u5f0f\u7684\u96fb\u5b50\u4fe1\u7bb1"),t.qZA()())}function _(s,p){if(1&s&&(t.ynx(0),t.YNc(1,a,3,0,"p",4),t.YNc(2,f,3,0,"p",4),t.BQk()),2&s){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.control||null==r.control.errors?null:r.control.errors.required),t.xp6(1),t.Q6J("ngIf",null==r.control||null==r.control.errors?null:r.control.errors.email)}}const M=function(s,p){return{"input-error":s,"input-success":p}};let b=(()=>{class s extends g.A{constructor(){super(...arguments),this.type="text",this.placeholder="",this.size="md",this.inputmode="text"}}return s.\u0275fac=function(){let p;return function(e){return(p||(p=t.n5z(s)))(e||s)}}(),s.\u0275cmp=t.Xpm({type:s,selectors:[["app-input"]],inputs:{type:"type",placeholder:"placeholder",size:"size",inputmode:"inputmode"},standalone:!0,features:[t._Bn([(0,g.x)(s)]),t.qOj,t.jDz],decls:3,vars:22,consts:[["class","block",3,"for","class","ngClass",4,"ngIf"],[1,"input","input-bordered","border-2",3,"type","id","ngModel","ngClass","disabled","inputMode","placeholder","ngModelChange"],[4,"ngIf"],[1,"block",3,"for","ngClass"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"]],template:function(r,e){1&r&&(t.YNc(0,h,2,8,"label",0),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(I){return e.val=I})("ngModelChange",function(){return e.change()}),t.qZA(),t.YNc(2,_,3,2,"ng-container",2)),2&r&&(t.Q6J("ngIf",e.labelName),t.xp6(1),t.Tol(e.class),t.ekj("input-xs","xs"===e.size)("input-sm","sm"===e.size)("input-md","md"===e.size)("input-lg","lg"===e.size),t.Q6J("type",e.type)("id",null==e.ngControl?null:e.ngControl.name)("ngModel",e.val)("ngClass",t.WLB(19,M,(null==e.control?null:e.control.touched)&&(null==e.control?null:e.control.errors),(null==e.control?null:e.control.touched)&&!(null!=e.control&&e.control.errors)))("disabled",e.disabled)("inputMode",e.inputmode)("placeholder",e.placeholder),t.xp6(1),t.Q6J("ngIf",(null==e.control?null:e.control.touched)&&(null==e.control?null:e.control.errors)&&e.showErrorMsg))},dependencies:[n.ez,n.mk,n.O5,c.u5,c.Fj,c.JJ,c.On],styles:["[_nghost-%COMP%]{width:100%}"]}),s})()}}]);