"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[721],{9721:(M,f,r)=>{r.r(f),r.d(f,{ArticleCategoryEditComponent:()=>D});var e=r(2223),g=r(4755),d=r(5855),t=r(9401),u=r(5796),c=r(8505),n=r(9300),_=r(4004),o=r(3900),m=r(8746),h=r(6274),a=r(9096),p=r(6355),i=r(7929),s=r(4052);function I(C,y){if(1&C){const l=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(l);const v=e.oxw();return e.KtG(v.submit())}),e.TgZ(2,"div",3),e._UZ(3,"app-input",4),e.qZA(),e.TgZ(4,"div",5)(5,"button",6),e._uU(6," \u4fee\u6539\u5206\u985e "),e.qZA()()(),e.BQk()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("formGroup",l.form),e.xp6(4),e.ekj("loading",l.isLoading()),e.Q6J("disabled",l.isLoading())}}function O(C,y){1&C&&(e.TgZ(0,"div",7)(1,"div")(2,"div",8),e._UZ(3,"div",9),e.qZA()()())}let D=(()=>{class C{constructor(){this.apiSrv=(0,e.f3M)(i.s),this.userSrv=(0,e.f3M)(s.K),this.swalSrv=(0,e.f3M)(a.J),this.articleCategorySrv=(0,e.f3M)(h.h),this.route=(0,e.f3M)(u.gz),this.router=(0,e.f3M)(u.F0),this.isLoading=(0,e.tdS)(!1),this.editIsLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this._destroyRef=(0,e.f3M)(e.ktI),this.form=new t.cw({categoryId:new t.NI(void 0,[t.kI.required]),categoryName:new t.NI("",[t.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,c.b)(()=>this.isLoading.set(!0)),(0,n.h)(l=>!!l.get("id")),(0,_.U)(l=>l.get("id")),(0,n.h)(l=>!isNaN(parseInt(l))),(0,_.U)(l=>parseInt(l)),(0,o.w)(l=>this.articleCategorySrv.getArticleCategoryById(l,!1)),(0,n.h)(l=>this.apiSrv.ifSuccess(l)),(0,_.U)(({data:l})=>l),(0,c.b)(({categoryId:l,categoryName:E})=>{this.form.get("categoryId")?.setValue(l),this.form.get("categoryName")?.setValue(E)}),(0,d.sL)(this._destroyRef)).subscribe(l=>{const{categoryId:E,categoryName:v}=l;this.form.get("categoryId")?.setValue(E),this.form.get("categoryName")?.setValue(v),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const l={categoryId:this.form.get("categoryId").value,categoryName:this.form.get("categoryName").value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.articleCategorySrv.updateArticleCategory(l).pipe((0,n.h)(E=>this.apiSrv.ifSuccess(E,!0)),(0,o.w)(({returnMessage:E})=>this.swalSrv.alert({icon:a.u.Success,text:E})),(0,m.x)(()=>this.editIsLoading.set(!1)),(0,d.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article-category"])})}}return C.\u0275fac=function(l){return new(l||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-article-category-edit"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u5206\u985e","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u5206\u985e","formControlName","categoryName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(l,E){if(1&l&&(e.YNc(0,I,7,4,"ng-container",0),e.YNc(1,O,4,0,"ng-template",null,1,e.W1O)),2&l){const v=e.MAs(2);e.Q6J("ngIf",!E.isLoading())("ngIfElse",v)}},dependencies:[g.ez,g.O5,p.a,t.UX,t._Y,t.JJ,t.JL,t.sg,t.u]}),C})()},6274:(M,f,r)=>{r.d(f,{h:()=>c});var e=r(3144),g=r(2223),d=r(2340),t=r(4782),u=r(681);let c=(()=>{class n{constructor(){this.http=(0,g.f3M)(e.eN),this.transferSrv=(0,g.f3M)(u.Z),this.articleCategoryMap=new Map,this.articleCategoryByIdMap=new Map}getArticleCategory(o,m=!0){const h=()=>{if(!m||!this.articleCategoryMap.has(o)){const a=o?(new e.LE).append("page",o):void 0,p=this.http.get(`${d.N.baseUrl}/articleCategory`,{params:a}).pipe((0,t.d)());this.articleCategoryMap.set(o,p)}return this.articleCategoryMap.get(o)};return m?this.transferSrv.transfer(`categoryList-${o}`,h):h()}getArticleCategoryById(o,m=!0){const h=()=>{if(!m||!this.articleCategoryByIdMap.has(o)){const a=this.http.get(`${d.N.baseUrl}/articleCategory/${o}`).pipe((0,t.d)());this.articleCategoryByIdMap.set(o,a)}return this.articleCategoryByIdMap.get(o)};return m?this.transferSrv.transfer(`category-${o}`,h):h()}updateArticleCategory(o){return this.http.patch(`${d.N.baseUrl}/articleCategory/${o.categoryId}`,o)}createArticleCategory(o){return this.http.post(`${d.N.baseUrl}/articleCategory`,o)}deleteArticleCategory(o){return this.http.delete(`${d.N.baseUrl}/articleCategory/${o}`)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},5376:(M,f,r)=>{r.d(f,{A:()=>t,x:()=>d});var e=r(2223),g=r(9401);const d=u=>({provide:g.JU,useExisting:(0,e.Gpc)(()=>u),multi:!0});let t=(()=>{class u{constructor(n,_){this.injector=n,this.cdr=_,this.labelClass="",this.class="",this.showErrorMsg=!0,this.val="",this.disabled=!1}ngOnInit(){this.ngControl=this.injector.get(g.a5)}ngAfterViewInit(){this.control=this.ngControl?.control,this.cdr.detectChanges()}writeValue(n){this.val=n}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n}change(){this.onChange&&this.onTouched&&(this.onChange(this.val),this.onTouched())}}return u.\u0275fac=function(n){return new(n||u)(e.Y36(e.zs3),e.Y36(e.sBO))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-basic-input"]],inputs:{labelName:"labelName",labelClass:"labelClass",class:"class",showErrorMsg:"showErrorMsg"},standalone:!0,features:[e.jDz],decls:0,vars:0,template:function(n,_){},encapsulation:2}),u})()},6355:(M,f,r)=>{r.d(f,{a:()=>h});var e=r(9401),g=r(4755),d=r(5376),t=r(2223);const u=function(a,p){return{"text-success":a,"text-error":p}};function c(a,p){if(1&a&&(t.TgZ(0,"label",3),t._uU(1),t.qZA()),2&a){const i=t.oxw();t.Tol(i.labelClass),t.Q6J("for",null==i.ngControl?null:i.ngControl.name)("ngClass",t.WLB(5,u,(null==i.control?null:i.control.touched)&&!(null!=i.control&&i.control.errors),(null==i.control?null:i.control.touched)&&(null==i.control?null:i.control.errors))),t.xp6(1),t.Oqu(i.labelName)}}function n(a,p){1&a&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u6b64\u6b04\u4f4d\u5fc5\u586b"),t.qZA()())}function _(a,p){1&a&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u8acb\u8f38\u5165\u6b63\u78ba\u683c\u5f0f\u7684\u96fb\u5b50\u4fe1\u7bb1"),t.qZA()())}function o(a,p){if(1&a&&(t.ynx(0),t.YNc(1,n,3,0,"p",4),t.YNc(2,_,3,0,"p",4),t.BQk()),2&a){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.required),t.xp6(1),t.Q6J("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.email)}}const m=function(a,p){return{"input-error":a,"input-success":p}};let h=(()=>{class a extends d.A{constructor(){super(...arguments),this.type="text",this.placeholder="",this.size="md",this.inputmode="text"}}return a.\u0275fac=function(){let p;return function(s){return(p||(p=t.n5z(a)))(s||a)}}(),a.\u0275cmp=t.Xpm({type:a,selectors:[["app-input"]],inputs:{type:"type",placeholder:"placeholder",size:"size",inputmode:"inputmode"},standalone:!0,features:[t._Bn([(0,d.x)(a)]),t.qOj,t.jDz],decls:3,vars:22,consts:[["class","block",3,"for","class","ngClass",4,"ngIf"],[1,"input","input-bordered","border-2",3,"type","id","ngModel","ngClass","disabled","inputMode","placeholder","ngModelChange"],[4,"ngIf"],[1,"block",3,"for","ngClass"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"]],template:function(i,s){1&i&&(t.YNc(0,c,2,8,"label",0),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(O){return s.val=O})("ngModelChange",function(){return s.change()}),t.qZA(),t.YNc(2,o,3,2,"ng-container",2)),2&i&&(t.Q6J("ngIf",s.labelName),t.xp6(1),t.Tol(s.class),t.ekj("input-xs","xs"===s.size)("input-sm","sm"===s.size)("input-md","md"===s.size)("input-lg","lg"===s.size),t.Q6J("type",s.type)("id",null==s.ngControl?null:s.ngControl.name)("ngModel",s.val)("ngClass",t.WLB(19,m,(null==s.control?null:s.control.touched)&&(null==s.control?null:s.control.errors),(null==s.control?null:s.control.touched)&&!(null!=s.control&&s.control.errors)))("disabled",s.disabled)("inputMode",s.inputmode)("placeholder",s.placeholder),t.xp6(1),t.Q6J("ngIf",(null==s.control?null:s.control.touched)&&(null==s.control?null:s.control.errors)&&s.showErrorMsg))},dependencies:[g.ez,g.mk,g.O5,e.u5,e.Fj,e.JJ,e.On],styles:["[_nghost-%COMP%]{width:100%}"]}),a})()},7929:(M,f,r)=>{r.d(f,{s:()=>u});var e=r(2223),g=r(5698),d=r(9415),t=r(9096);let u=(()=>{class c{constructor(){this.swalSrv=(0,e.f3M)(t.J)}ifSuccess(_,o=!0){return o?_.returnCode===d.N.Success||(this.swalSrv.alert({text:_.returnMessage}).pipe((0,g.q)(1)).subscribe(),!1):_.returnCode===d.N.Success}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},681:(M,f,r)=>{r.d(f,{Z:()=>c});var e=r(2223),g=r(928),d=r(9646),t=r(8505),u=r(4782);let c=(()=>{class n{constructor(){this.transferState=(0,e.f3M)(e.kie),this.deviceSrv=(0,e.f3M)(g.U)}transfer(o,m){const h=(0,e.Cb6)(o);if(this.transferState.hasKey(h)){const a=this.transferState.get(h,void 0);return(0,d.of)(a)}return m().pipe((0,t.b)(p=>{this.deviceSrv.isServer&&this.transferState.set(h,p)}),(0,u.d)())}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},4782:(M,f,r)=>{r.d(f,{d:()=>d});var e=r(4707),g=r(3099);function d(t,u,c){let n,_=!1;return t&&"object"==typeof t?({bufferSize:n=1/0,windowTime:u=1/0,refCount:_=!1,scheduler:c}=t):n=t??1/0,(0,g.B)({connector:()=>new e.t(n,u,c),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:_})}}}]);