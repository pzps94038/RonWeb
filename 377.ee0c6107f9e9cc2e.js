"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[377],{6377:(W,p,i)=>{i.r(p),i.d(p,{ArticleLabelDetailComponent:()=>I});var e=i(4438),o=i(177),_=i(9079),c=i(4366),f=i(980),g=i(5964),b=i(5558),m=i(9478),h=i(4702),u=i(4453),d=i(9584),E=i(4014),A=i(2183),D=i(7343),L=i(6483);const v=t=>["/setting","article-label","edit",t],C=()=>[1,2,3,4,5];function P(t,s){if(1&t){const n=e.RV6();e.j41(0,"tr")(1,"th",10)(2,"a",11),e.nrm(3,"ng-icon",12),e.k0s(),e.j41(4,"button",13),e.bIt("click",function(){const r=e.eBV(n).$implicit,l=e.XpG(3);return e.Njj(l.deleteArticleLabel(r.labelId))}),e.nrm(5,"ng-icon",14),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"dayJs"),e.k0s()()}if(2&t){const n=s.$implicit;e.R7$(2),e.Y8G("routerLink",e.eq3(6,v,n.labelId)),e.R7$(5),e.JRh(n.labelName),e.R7$(2),e.JRh(e.i5U(10,3,n.createDate,"YYYY/MM/DD"))}}function j(t,s){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",3)(2,"button",4),e.EFF(3,"\u65b0\u589e\u6a19\u7c64"),e.k0s()(),e.j41(4,"div",5)(5,"table",6)(6,"thead")(7,"tr"),e.nrm(8,"th"),e.j41(9,"th",7),e.EFF(10,"\u6a19\u7c64"),e.k0s(),e.j41(11,"th",7),e.EFF(12,"\u5efa\u7acb\u65e5\u671f"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,P,11,8,"tr",8),e.k0s()()(),e.j41(15,"app-pagination",9),e.bIt("change",function(r){e.eBV(n);const l=e.XpG(2);return e.Njj(l.paginationChange(r))}),e.k0s(),e.bVm()}if(2&t){const n=e.XpG(2);e.R7$(14),e.Y8G("ngForOf",n.labels()),e.R7$(),e.Y8G("total",n.total())("currentPage",n.page())}}function M(t,s){if(1&t&&(e.qex(0),e.DNE(1,j,16,3,"ng-container",2),e.bVm()),2&t){const n=e.XpG(),a=e.sdS(2);e.R7$(),e.Y8G("ngIf",!n.isLoading())("ngIfElse",a)}}function R(t,s){1&t&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"div",15),e.k0s(),e.j41(3,"td"),e.nrm(4,"div",15),e.k0s(),e.j41(5,"td"),e.nrm(6,"div",15),e.k0s()())}function O(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"table",6)(2,"tbody")(3,"tr"),e.nrm(4,"td"),e.j41(5,"td",7),e.EFF(6,"\u6a19\u7c64"),e.k0s(),e.j41(7,"td",7),e.EFF(8,"\u5efa\u7acb\u65e5\u671f"),e.k0s()(),e.DNE(9,R,7,0,"tr",8),e.k0s()()(),e.j41(10,"app-pagination",9),e.bIt("change",function(r){e.eBV(n);const l=e.XpG();return e.Njj(l.paginationChange(r))}),e.k0s()}if(2&t){const n=e.XpG();e.R7$(9),e.Y8G("ngForOf",e.lJ4(3,C)),e.R7$(),e.Y8G("total",n.total())("currentPage",n.page())}}function x(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",16)(1,"app-error",17),e.bIt("refresh",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.refreshArticleLabel())}),e.k0s()()}}let I=(()=>{var t;class s{constructor(){this.articleLabelSrv=(0,e.WQX)(L.P),this.apiSrv=(0,e.WQX)(D.G),this.swalSrv=(0,e.WQX)(m.X),this.route=(0,e.WQX)(c.nX),this.router=(0,e.WQX)(c.Ix),this.total=(0,e.vPA)(0),this.labels=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this.page=(0,e.vPA)(1),this._destroyRef=(0,e.WQX)(e.abz)}ngOnInit(){this.route.queryParamMap.pipe((0,_.pQ)(this._destroyRef)).subscribe(a=>{const r=a.get("page"),l=r?parseInt(r):1;this.page.set(isNaN(l)?1:l),this.getArticleLabel(this.page())})}getArticleLabel(a){this.isError.set(!1),this.isLoading.set(!0),this.articleLabelSrv.getArticleLabel(a).pipe((0,f.j)(()=>this.isLoading.set(!1)),(0,_.pQ)(this._destroyRef)).subscribe({next:r=>{if(this.apiSrv.ifSuccess(r,!1)){const{data:{total:l,labels:T}}=r;this.total.set(l),this.labels.set(T)}else this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}paginationChange(a){this.router.navigate(["/setting/article-label/detail"],{queryParams:{page:a}})}deleteArticleLabel(a){this.swalSrv.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6a19\u7c64\u55ce?",text:"\u9019\u500b\u64cd\u4f5c\u5c07\u6c38\u4e45\u522a\u9664\u8a72\u6a19\u7c64\u53ca\u76f8\u95dc\u7684\u6240\u6709\u6587\u7ae0\u7684\u5c0d\u61c9\u95dc\u4fc2\u3002\u8acb\u78ba\u8a8d\u60a8\u7684\u6c7a\u5b9a\uff0c\u56e0\u70ba\u9019\u4e9b\u5167\u5bb9\u5c07\u7121\u6cd5\u6062\u5fa9\u3002"}).pipe((0,g.p)(({isConfirmed:r})=>r),(0,b.n)(()=>this.articleLabelSrv.deleteArticleLabel(a)),(0,g.p)(r=>this.apiSrv.ifSuccess(r)),(0,b.n)(r=>this.swalSrv.alert({icon:m.J.Success,text:r.returnMessage})),(0,_.pQ)(this._destroyRef)).subscribe(()=>{this.page.set(1),this.getArticleLabel(this.page())})}refreshArticleLabel(){this.page.set(1),this.getArticleLabel(this.page())}}return(t=s).\u0275fac=function(a){return new(a||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-article-label-detail"]],standalone:!0,features:[e.Jv_([(0,h.EB)({heroPencilSquare:u.r6l,heroTrash:u.dmW})]),e.aNF],decls:5,vars:2,consts:[["loading",""],["error",""],[4,"ngIf","ngIfElse"],[1,"mb-5","flex","justify-end"],["routerLink","/setting/article-label/create",1,"btn","btn-primary"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"change","total","currentPage"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(a,r){if(1&a&&e.DNE(0,M,2,2,"ng-container",2)(1,O,11,4,"ng-template",null,0,e.C5r)(3,x,2,0,"ng-template",null,1,e.C5r),2&a){const l=e.sdS(4);e.Y8G("ngIf",!r.isError())("ngIfElse",l)}},dependencies:[o.MD,o.Sq,o.bT,E.e,h.Uq,c.Wk,A.s,d.A]}),s})()}}]);