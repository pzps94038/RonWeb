"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[721],{9721:(y,h,o)=>{o.r(h),o.d(h,{ArticleCategoryEditComponent:()=>O});var e=o(9523),_=o(4755),c=o(6736),t=o(5030),i=o(5796),m=o(8505),n=o(9300),d=o(4004),C=o(3900),I=o(8746),M=o(6274),a=o(3500),u=o(9096),l=o(6355);function r(g,E){if(1&g){const s=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const f=e.oxw();return e.KtG(f.submit())}),e.TgZ(2,"div",3),e._UZ(3,"app-input",4),e.qZA(),e.TgZ(4,"div",5)(5,"button",6),e._uU(6," \u4fee\u6539\u5206\u985e "),e.qZA()()(),e.BQk()}if(2&g){const s=e.oxw();e.xp6(1),e.Q6J("formGroup",s.form),e.xp6(4),e.ekj("loading",s.isLoading()),e.Q6J("disabled",s.isLoading())}}function v(g,E){1&g&&(e.TgZ(0,"div",7)(1,"div")(2,"div",8),e._UZ(3,"div",9),e.qZA()()())}let O=(()=>{class g{constructor(){this.sharedSrv=(0,e.f3M)(a.F),this.swalSrv=(0,e.f3M)(u.J),this.articleCategorySrv=(0,e.f3M)(M.h),this.route=(0,e.f3M)(i.gz),this.router=(0,e.f3M)(i.F0),this.isLoading=(0,e.tdS)(!1),this.editIsLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this._destroyRef=(0,e.f3M)(e.ktI),this.form=new t.cw({categoryId:new t.NI(void 0,[t.kI.required]),categoryName:new t.NI("",[t.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,m.b)(()=>this.isLoading.set(!0)),(0,n.h)(s=>!!s.get("id")),(0,d.U)(s=>s.get("id")),(0,n.h)(s=>!isNaN(parseInt(s))),(0,d.U)(s=>parseInt(s)),(0,C.w)(s=>this.articleCategorySrv.getArticleCategoryById(s)),(0,n.h)(s=>this.sharedSrv.ifSuccess(s)),(0,d.U)(({data:s})=>s),(0,m.b)(({categoryId:s,categoryName:p})=>{this.form.get("categoryId")?.setValue(s),this.form.get("categoryName")?.setValue(p)}),(0,c.sL)(this._destroyRef)).subscribe(s=>{const{categoryId:p,categoryName:f}=s;this.form.get("categoryId")?.setValue(p),this.form.get("categoryName")?.setValue(f),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const s={categoryId:this.form.get("categoryId").value,categoryName:this.form.get("categoryName").value,userId:this.sharedSrv.getUserId()};this.editIsLoading.set(!0),this.articleCategorySrv.updateArticleCategory(s).pipe((0,n.h)(p=>this.sharedSrv.ifSuccess(p,!0)),(0,C.w)(({returnMessage:p})=>this.swalSrv.alert({icon:u.u.Success,text:p})),(0,I.x)(()=>this.editIsLoading.set(!1)),(0,c.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article-category"])})}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-article-category-edit"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u5206\u985e","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u5206\u985e","formControlName","categoryName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(s,p){if(1&s&&(e.YNc(0,r,7,4,"ng-container",0),e.YNc(1,v,4,0,"ng-template",null,1,e.W1O)),2&s){const f=e.MAs(2);e.Q6J("ngIf",!p.isLoading())("ngIfElse",f)}},dependencies:[_.ez,_.O5,l.a,t.UX,t._Y,t.JJ,t.JL,t.sg,t.u]}),g})()},6274:(y,h,o)=>{o.d(h,{h:()=>t});var e=o(3144),_=o(9523),c=o(2340);let t=(()=>{class i{constructor(){this.http=(0,_.f3M)(e.eN)}getArticleCategory(n){if(n){const d=(new e.LE).append("page",n);return this.http.get(`${c.N.baseUrl}/articleCategory`,{params:d})}return this.http.get(`${c.N.baseUrl}/articleCategory`)}getArticleCategoryById(n){return this.http.get(`${c.N.baseUrl}/articleCategory/${n}`)}updateArticleCategory(n){return this.http.patch(`${c.N.baseUrl}/articleCategory/${n.categoryId}`,n)}createArticleCategory(n){return this.http.post(`${c.N.baseUrl}/articleCategory`,n)}deleteArticleCategory(n){return this.http.delete(`${c.N.baseUrl}/articleCategory/${n}`)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5376:(y,h,o)=>{o.d(h,{A:()=>t,x:()=>c});var e=o(9523),_=o(5030);const c=i=>({provide:_.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0});let t=(()=>{class i{constructor(n,d){this.injector=n,this.cdr=d,this.labelClass="",this.class="",this.showErrorMsg=!0,this.val="",this.disabled=!1}ngOnInit(){this.ngControl=this.injector.get(_.a5)}ngAfterViewInit(){this.control=this.ngControl?.control,this.cdr.detectChanges()}writeValue(n){this.val=n}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n}change(){this.onChange&&this.onTouched&&(this.onChange(this.val),this.onTouched())}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(e.zs3),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-basic-input"]],inputs:{labelName:"labelName",labelClass:"labelClass",class:"class",showErrorMsg:"showErrorMsg"},standalone:!0,features:[e.jDz],decls:0,vars:0,template:function(n,d){},encapsulation:2}),i})()},6355:(y,h,o)=>{o.d(h,{a:()=>M});var e=o(5030),_=o(4755),c=o(5376),t=o(9523);const i=function(a,u){return{"text-success":a,"text-error":u}};function m(a,u){if(1&a&&(t.TgZ(0,"label",3),t._uU(1),t.qZA()),2&a){const l=t.oxw();t.Tol(l.labelClass),t.Q6J("for",null==l.ngControl?null:l.ngControl.name)("ngClass",t.WLB(5,i,(null==l.control?null:l.control.touched)&&!(null!=l.control&&l.control.errors),(null==l.control?null:l.control.touched)&&(null==l.control?null:l.control.errors))),t.xp6(1),t.Oqu(l.labelName)}}function n(a,u){1&a&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u6b64\u6b04\u4f4d\u5fc5\u586b"),t.qZA()())}function d(a,u){1&a&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u8acb\u8f38\u5165\u6b63\u78ba\u683c\u5f0f\u7684\u96fb\u5b50\u4fe1\u7bb1"),t.qZA()())}function C(a,u){if(1&a&&(t.ynx(0),t.YNc(1,n,3,0,"p",4),t.YNc(2,d,3,0,"p",4),t.BQk()),2&a){const l=t.oxw();t.xp6(1),t.Q6J("ngIf",null==l.control||null==l.control.errors?null:l.control.errors.required),t.xp6(1),t.Q6J("ngIf",null==l.control||null==l.control.errors?null:l.control.errors.email)}}const I=function(a,u){return{"input-error":a,"input-success":u}};let M=(()=>{class a extends c.A{constructor(){super(...arguments),this.type="text",this.placeholder="",this.size="md",this.inputmode="text"}}return a.\u0275fac=function(){let u;return function(r){return(u||(u=t.n5z(a)))(r||a)}}(),a.\u0275cmp=t.Xpm({type:a,selectors:[["app-input"]],inputs:{type:"type",placeholder:"placeholder",size:"size",inputmode:"inputmode"},standalone:!0,features:[t._Bn([(0,c.x)(a)]),t.qOj,t.jDz],decls:3,vars:22,consts:[["class","block",3,"for","class","ngClass",4,"ngIf"],[1,"input","input-bordered","border-2",3,"type","id","ngModel","ngClass","disabled","inputMode","placeholder","ngModelChange"],[4,"ngIf"],[1,"block",3,"for","ngClass"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"]],template:function(l,r){1&l&&(t.YNc(0,m,2,8,"label",0),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(O){return r.val=O})("ngModelChange",function(){return r.change()}),t.qZA(),t.YNc(2,C,3,2,"ng-container",2)),2&l&&(t.Q6J("ngIf",r.labelName),t.xp6(1),t.Tol(r.class),t.ekj("input-xs","xs"===r.size)("input-sm","sm"===r.size)("input-md","md"===r.size)("input-lg","lg"===r.size),t.Q6J("type",r.type)("id",null==r.ngControl?null:r.ngControl.name)("ngModel",r.val)("ngClass",t.WLB(19,I,(null==r.control?null:r.control.touched)&&(null==r.control?null:r.control.errors),(null==r.control?null:r.control.touched)&&!(null!=r.control&&r.control.errors)))("disabled",r.disabled)("inputMode",r.inputmode)("placeholder",r.placeholder),t.xp6(1),t.Q6J("ngIf",(null==r.control?null:r.control.touched)&&(null==r.control?null:r.control.errors)&&r.showErrorMsg))},dependencies:[_.ez,_.mk,_.O5,e.u5,e.Fj,e.JJ,e.On],styles:["[_nghost-%COMP%]{width:100%}"]}),a})()}}]);