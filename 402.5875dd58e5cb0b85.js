"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[402],{6402:(C,E,e)=>{e.r(E),e.d(E,{HomeComponent:()=>T});var c=e(5855),t=e(2223),l=e(4755),s=e(6935),m=e(7915),f=e(8884),o=e(262),M=e(8746),n=e(5796),d=e(8028),p=e(4217),v=e(7929),u=e(2958);const O=function(a,g){return{categoryId:a,categoryName:g}};function P(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"app-article-card",5),t.NdJ("category",function(i){t.CHM(r);const h=t.oxw(3);return t.KtG(h.navigateCategory(i))})("label",function(i){t.CHM(r);const h=t.oxw(3);return t.KtG(h.navigateLabel(i))})("showMore",function(){const h=t.CHM(r).$implicit,U=t.oxw(3);return t.KtG(U.showMore(h.articleId))}),t.qZA()}if(2&a){const r=g.$implicit;t.Q6J("title",r.articleTitle)("date",r.createDate)("category",t.WLB(5,O,r.categoryId,r.categoryName))("labels",r.labels)("previewContent",r.previewContent)}}function D(a,g){if(1&a&&(t.ynx(0),t.YNc(1,P,1,8,"app-article-card",4),t.BQk()),2&a){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",r.articles())}}function I(a,g){if(1&a&&(t.ynx(0),t.YNc(1,D,2,1,"ng-container",0),t.BQk()),2&a){const r=t.oxw(),_=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!r.isLoading())("ngIfElse",_)}}function A(a,g){1&a&&t._UZ(0,"app-loading-card")(1,"app-loading-card")(2,"app-loading-card")}function y(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",6)(1,"app-error",7),t.NdJ("refresh",function(){t.CHM(r);const i=t.oxw();return t.KtG(i.getArticle(i.page()))}),t.qZA()()}}let T=(()=>{class a{constructor(){this.articleSrv=(0,t.f3M)(f.n),this.apiSrv=(0,t.f3M)(v.s),this.route=(0,t.f3M)(n.gz),this.router=(0,t.f3M)(n.F0),this.codeBlockSrv=(0,t.f3M)(u.n),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,c.sL)(this._destroyRef)).subscribe(r=>{const _=r.get("page"),i=_?parseInt(_):1;this.page.set(isNaN(i)?1:i),this.getArticle(this.page())})}getArticle(r){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(r).pipe((0,o.K)(_=>{throw this.isError.set(!0),_}),(0,M.x)(()=>this.isLoading.set(!1)),(0,c.sL)(this._destroyRef)).subscribe(_=>{if(this.apiSrv.ifSuccess(_,!1)){const{data:{total:i,articles:h}}=_;this.total.set(i),this.articles.set(h),this.codeBlockSrv.highlightAllBlock()}else this.isError.set(!0)})}showMore(r){this.router.navigateByUrl(`/blog/article/${r}`)}navigateCategory({categoryId:r}){this.router.navigateByUrl(`/blog/category/${r}`)}navigateLabel({labelId:r}){this.router.navigateByUrl(`/blog/label/${r}`)}paginationChange(r){this.router.navigate(["/blog/home"],{queryParams:{page:r}})}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-home"]],standalone:!0,features:[t.jDz],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[3,"total","currentPage","change"],[3,"title","date","category","labels","previewContent","label","showMore",4,"ngFor","ngForOf"],[3,"title","date","category","labels","previewContent","label","showMore"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(r,_){if(1&r&&(t.YNc(0,I,2,2,"ng-container",0),t.YNc(1,A,3,0,"ng-template",null,1,t.W1O),t.YNc(3,y,2,0,"ng-template",null,2,t.W1O),t.TgZ(5,"app-pagination",3),t.NdJ("change",function(h){return _.paginationChange(h)}),t.qZA()),2&r){const i=t.MAs(4);t.Q6J("ngIf",!_.isError())("ngIfElse",i),t.xp6(5),t.Q6J("total",_.total())("currentPage",_.page())}},dependencies:[l.ez,l.sg,l.O5,s.y,m.Q,d.q,p.o]}),a})()},8884:(C,E,e)=>{e.d(E,{n:()=>f});var c=e(4782),t=e(3144),l=e(2223),s=e(2340),m=e(681);let f=(()=>{class o{constructor(){this.http=(0,l.f3M)(t.eN),this.transferSrv=(0,l.f3M)(m.Z),this.articleByIdMap=new Map}getArticle(n,d){let p=new t.LE;return n&&(p=p.append("page",n)),d&&(p=p.append("keyword",d)),this.http.get(`${s.N.baseUrl}/article`,{params:p})}getArticleById(n,d=!0){return this.transferSrv.transfer(`article-${n}`,()=>{if(d&&this.articleByIdMap.has(n))return this.articleByIdMap.get(n);const v=this.http.get(`${s.N.baseUrl}/article/${n}`).pipe((0,c.d)());return this.articleByIdMap.set(n,v),v},d)}createArticle(n){return this.http.post(`${s.N.baseUrl}/article`,n)}updateArticle(n){return this.http.patch(`${s.N.baseUrl}/article/${n.articleId}`,n)}deleteArticle(n){return this.http.delete(`${s.N.baseUrl}/article/${n}`)}updateArticleViews(n){return this.http.patch(`${s.N.baseUrl}/article/updateArticleViews/${n}`,{})}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},681:(C,E,e)=>{e.d(E,{Z:()=>f});var c=e(2223),t=e(928),l=e(9646),s=e(8505),m=e(4782);let f=(()=>{class o{constructor(){this.transferState=(0,c.f3M)(c.kie),this.deviceSrv=(0,c.f3M)(t.U)}transfer(n,d,p=!0){const v=(0,c.Cb6)(n);if(this.transferState.hasKey(v)&&p){const u=this.transferState.get(v,void 0);return(0,l.of)(u)}return d().pipe((0,s.b)(O=>{this.deviceSrv.isServer&&this.transferState.set(v,O)}),(0,m.d)())}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4782:(C,E,e)=>{e.d(E,{d:()=>l});var c=e(4707),t=e(3099);function l(s,m,f){let o,M=!1;return s&&"object"==typeof s?({bufferSize:o=1/0,windowTime:m=1/0,refCount:M=!1,scheduler:f}=s):o=s??1/0,(0,t.B)({connector:()=>new c.t(o,m,f),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:M})}}}]);