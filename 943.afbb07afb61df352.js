"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[943],{5853:(O,n,e)=>{e.r(n),e.d(n,{ArticleCreateComponent:()=>M});var t=e(3020),d=e(4755),p=e(9128),E=e(7724),a=e(5030),v=e(3500),l=e(9096),f=e(6274),C=e(6481),_=e(9300),i=e(4004),h=e(3900),u=e(508),g=e(8884),A=e(9148);let M=(()=>{class o{constructor(){this.sharedSrv=(0,t.f3M)(v.F),this.swalSrv=(0,t.f3M)(l.J),this.articleCategorySrv=(0,t.f3M)(f.h),this.articleSrv=(0,t.f3M)(g.n),this.router=(0,t.f3M)(A.F0),this._destroyRef=(0,t.f3M)(t.ktI),this.categoryOptions=(0,t.tdS)([]),this.form=new a.cw({articleTitle:new a.NI("",[a.kI.required]),previewContent:new a.NI("",[a.kI.required]),content:new a.NI("",[a.kI.required]),categoryId:new a.NI("",[a.kI.required])})}ngOnInit(){this.articleCategorySrv.getArticleCategory().pipe((0,_.h)(r=>this.sharedSrv.ifSuccess(r)),(0,i.U)(({data:r})=>r),(0,i.U)(r=>r.map(({categoryId:s,categoryName:m})=>({value:s,text:m}))),(0,u.sL)(this._destroyRef)).subscribe(r=>{r=[{text:"\u8acb\u9078\u64c7\u6587\u7ae0\u5206\u985e",value:"",disabled:!0},...r],this.categoryOptions.set(r)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const r={articleTitle:this.form.get("articleTitle").value,previewContent:this.form.get("previewContent").value,content:this.form.get("content").value,categoryId:this.form.get("categoryId").value,userId:this.sharedSrv.getUserId()};this.articleSrv.createArticle(r).pipe((0,_.h)(s=>this.sharedSrv.ifSuccess(s)),(0,h.w)(({returnMessage:s})=>this.swalSrv.alert({icon:l.u.Success,text:s})),(0,u.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article"])})}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-article-create"]],standalone:!0,features:[t.jDz],decls:12,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u6587\u7ae0\u6a19\u984c","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u6587\u7ae0\u6a19\u984c","formControlName","articleTitle",1,"w-full"],["labelName","\u6587\u7ae0\u5206\u985e","labelClass","text-lg my-2 text-center md:text-left","formControlName","categoryId",1,"w-full",3,"options"],["labelName","\u9810\u89bd\u5167\u5bb9","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u9810\u89bd\u5167\u5bb9","formControlName","previewContent"],["labelName","\u6587\u7ae0\u5167\u5bb9","labelClass","text-lg my-2 text-center md:text-left","formControlName","content"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary"]],template:function(r,s){1&r&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.submit()}),t.TgZ(1,"div",1),t._UZ(2,"app-input",2),t.qZA(),t.TgZ(3,"div",1),t._UZ(4,"app-select",3),t.qZA(),t.TgZ(5,"div",1),t._UZ(6,"app-editor",4),t.qZA(),t.TgZ(7,"div",1),t._UZ(8,"app-editor",5),t.qZA(),t.TgZ(9,"div",6)(10,"button",7),t._uU(11,"\u65b0\u589e\u6587\u7ae0"),t.qZA()()()),2&r&&(t.Q6J("formGroup",s.form),t.xp6(4),t.Q6J("options",s.categoryOptions()))},dependencies:[d.ez,p.a,E.P,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u,C.H]}),o})()}}]);