"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[853],{853:(T,A,n)=>{n.r(A),n.d(A,{ArticleDetailComponent:()=>R});var _=n(9401),t=n(2223),h=n(4755),e=n(2993),d=n(5249),f=n(5796),o=n(8028),m=n(7915),i=n(3665),E=n(5855),C=n(262),a=n(8746),g=n(9300),l=n(3900),s=n(8884),v=n(9096),O=n(7929),I=n(6355);const Z=function(c){return["/setting","article","edit",c]};function y(c,D){if(1&c){const r=t.EpF();t.TgZ(0,"tr")(1,"th",14)(2,"a",15),t._UZ(3,"ng-icon",16),t.qZA(),t.TgZ(4,"button",17),t.NdJ("click",function(){const M=t.CHM(r).$implicit,P=t.oxw(3);return t.KtG(P.deleteArticle(M.articleId))}),t._UZ(5,"ng-icon",18),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"dayJs"),t.qZA()()}if(2&c){const r=D.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(8,Z,r.articleId)),t.xp6(5),t.Oqu(r.articleTitle),t.xp6(2),t.Oqu(r.categoryName),t.xp6(2),t.Oqu(r.viewCount),t.xp6(2),t.Oqu(t.xi3(14,5,r.createDate,"YYYY/MM/DD hh:mm"))}}function U(c,D){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"div",5)(4,"app-input",6),t.NdJ("ngModelChange",function(u){t.CHM(r);const M=t.oxw(2);return t.KtG(M.keyword=u)}),t.qZA()(),t.TgZ(5,"button",7),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return t.KtG(u.search())}),t._uU(6," \u641c\u5c0b "),t.qZA()(),t.TgZ(7,"button",8),t._uU(8,"\u65b0\u589e\u6587\u7ae0"),t.qZA()(),t.TgZ(9,"div",9)(10,"table",10)(11,"thead")(12,"tr"),t._UZ(13,"th"),t.TgZ(14,"th",11),t._uU(15,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(16,"th",11),t._uU(17,"\u5206\u985e"),t.qZA(),t.TgZ(18,"th",11),t._uU(19,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(20,"th",11),t._uU(21,"\u5efa\u7acb\u65e5\u671f"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,y,15,10,"tr",12),t.qZA()()(),t.TgZ(24,"app-pagination",13),t.NdJ("change",function(u){t.CHM(r);const M=t.oxw(2);return t.KtG(M.paginationChange(u))}),t.qZA(),t.BQk()}if(2&c){const r=t.oxw(2);t.xp6(4),t.Q6J("ngModel",r.keyword),t.xp6(19),t.Q6J("ngForOf",r.articles()),t.xp6(1),t.Q6J("total",r.total())("currentPage",r.page())}}function B(c,D){if(1&c&&(t.ynx(0),t.YNc(1,U,25,4,"ng-container",0),t.BQk()),2&c){const r=t.oxw(),p=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!r.isLoading())("ngIfElse",p)}}function x(c,D){1&c&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",19),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"div",19),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"div",19),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"div",19),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"div",19),t.qZA()())}const b=function(){return[1,2,3,4,5]};function L(c,D){if(1&c){const r=t.EpF();t.TgZ(0,"div",9)(1,"table",10)(2,"tbody")(3,"tr"),t._UZ(4,"td"),t.TgZ(5,"td",11),t._uU(6,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(7,"td",11),t._uU(8,"\u5206\u985e"),t.qZA(),t.TgZ(9,"td",11),t._uU(10,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(11,"td",11),t._uU(12,"\u5efa\u7acb\u65e5\u671f"),t.qZA()(),t.YNc(13,x,11,0,"tr",12),t.qZA()()(),t.TgZ(14,"app-pagination",13),t.NdJ("change",function(u){t.CHM(r);const M=t.oxw();return t.KtG(M.paginationChange(u))}),t.qZA()}if(2&c){const r=t.oxw();t.xp6(13),t.Q6J("ngForOf",t.DdM(3,b)),t.xp6(1),t.Q6J("total",r.total())("currentPage",r.page())}}function K(c,D){if(1&c){const r=t.EpF();t.TgZ(0,"div",20)(1,"app-error",21),t.NdJ("refresh",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.getArticle(u.page(),u.queryKeyword))}),t.qZA()()}}let R=(()=>{class c{constructor(){this.articleSrv=(0,t.f3M)(s.n),this.apiSrv=(0,t.f3M)(O.s),this.swalSrv=(0,t.f3M)(v.J),this.route=(0,t.f3M)(f.gz),this.router=(0,t.f3M)(f.F0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,E.sL)(this._destroyRef)).subscribe(r=>{const p=r.get("page"),u=r.get("keyword")?r.get("keyword"):void 0,M=p?parseInt(p):1;this.page.set(isNaN(M)?1:M),this.queryKeyword=u,this.getArticle(this.page(),u)})}getArticle(r,p){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(r,p).pipe((0,C.K)(u=>{throw this.isError.set(!0),u}),(0,a.x)(()=>this.isLoading.set(!1)),(0,E.sL)(this._destroyRef)).subscribe(u=>{if(this.apiSrv.ifSuccess(u,!1)){const{data:{total:M,articles:P}}=u;this.total.set(M),this.articles.set(P)}else this.isError.set(!0)})}paginationChange(r){this.router.navigate(["/setting/article"],{queryParams:{page:r,keyword:this.queryKeyword?this.queryKeyword:void 0}})}deleteArticle(r){this.swalSrv.confirm({text:"\u78ba\u5b9a\u8981\u522a\u9664\u6587\u7ae0\u55ce?"}).pipe((0,g.h)(({isConfirmed:p})=>p),(0,l.w)(()=>this.articleSrv.deleteArticle(r)),(0,g.h)(p=>this.apiSrv.ifSuccess(p)),(0,l.w)(p=>this.swalSrv.alert({icon:v.u.Success,text:p.returnMessage})),(0,E.sL)(this._destroyRef)).subscribe(()=>this.paginationChange(1))}search(){this.queryKeyword=this.keyword,this.paginationChange(1)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-article-detail"]],standalone:!0,features:[t._Bn([(0,e.kp)({heroPencilSquare:d.yUl,heroTrash:d.ciC})]),t.jDz],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"flex","justify-between","flex-wrap"],[1,"flex","w-full","mb-5","md:w-1/2","lg:w-1/3"],[1,"w-10/12"],["type","search","placeholder","\u641c\u5c0b\u95dc\u9375\u5b57","inputmode","search",1,"w-full",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mx-2","w-3/12","sm:w-2/12","md:w-3/12",3,"click"],["routerLink","/setting/article/create",1,"btn","btn-primary","mb-5"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"total","currentPage","change"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(r,p){if(1&r&&(t.YNc(0,B,2,2,"ng-container",0),t.YNc(1,L,15,4,"ng-template",null,1,t.W1O),t.YNc(3,K,2,0,"ng-template",null,2,t.W1O)),2&r){const u=t.MAs(4);t.Q6J("ngIf",!p.isError())("ngIfElse",u)}},dependencies:[h.ez,h.sg,h.O5,e.Fv,o.q,m.Q,i.g,f.rH,_.u5,_.JJ,_.On,I.a]}),c})()},8884:(T,A,n)=>{n.d(A,{n:()=>f});var _=n(4782),t=n(3144),h=n(2223),e=n(2340),d=n(681);let f=(()=>{class o{constructor(){this.http=(0,h.f3M)(t.eN),this.transferSrv=(0,h.f3M)(d.Z),this.articleByIdMap=new Map}getArticle(i,E){let C=new t.LE;return i&&(C=C.append("page",i)),E&&(C=C.append("keyword",E)),this.http.get(`${e.N.baseUrl}/article`,{params:C})}getArticleById(i,E=!0){return this.transferSrv.transfer(`article-${i}`,()=>{if(E&&this.articleByIdMap.has(i))return this.articleByIdMap.get(i);const a=this.http.get(`${e.N.baseUrl}/article/${i}`).pipe((0,_.d)());return this.articleByIdMap.set(i,a),a},E)}createArticle(i){return this.http.post(`${e.N.baseUrl}/article`,i)}updateArticle(i){return this.http.patch(`${e.N.baseUrl}/article/${i.articleId}`,i)}deleteArticle(i){return this.http.delete(`${e.N.baseUrl}/article/${i}`)}updateArticleViews(i){return this.http.patch(`${e.N.baseUrl}/article/updateArticleViews/${i}`,{})}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5376:(T,A,n)=>{n.d(A,{A:()=>e,x:()=>h});var _=n(2223),t=n(9401);const h=d=>({provide:t.JU,useExisting:(0,_.Gpc)(()=>d),multi:!0});let e=(()=>{class d{constructor(o,m){this.injector=o,this.cdr=m,this.labelClass="",this.class="",this.showErrorMsg=!0,this.val="",this.disabled=!1}ngOnInit(){this.ngControl=this.injector.get(t.a5)}ngAfterViewInit(){this.control=this.ngControl?.control,this.cdr.detectChanges()}writeValue(o){this.val=o}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}change(){this.onChange&&this.onTouched&&(this.onChange(this.val),this.onTouched())}}return d.\u0275fac=function(o){return new(o||d)(_.Y36(_.zs3),_.Y36(_.sBO))},d.\u0275cmp=_.Xpm({type:d,selectors:[["app-basic-input"]],inputs:{labelName:"labelName",labelClass:"labelClass",class:"class",showErrorMsg:"showErrorMsg"},standalone:!0,features:[_.jDz],decls:0,vars:0,template:function(o,m){},encapsulation:2}),d})()},6355:(T,A,n)=>{n.d(A,{a:()=>C});var _=n(9401),t=n(4755),h=n(5376),e=n(2223);const d=function(a,g){return{"text-success":a,"text-error":g}};function f(a,g){if(1&a&&(e.TgZ(0,"label",3),e._uU(1),e.qZA()),2&a){const l=e.oxw();e.Tol(l.labelClass),e.Q6J("for",null==l.ngControl?null:l.ngControl.name)("ngClass",e.WLB(5,d,(null==l.control?null:l.control.touched)&&!(null!=l.control&&l.control.errors),(null==l.control?null:l.control.touched)&&(null==l.control?null:l.control.errors))),e.xp6(1),e.Oqu(l.labelName)}}function o(a,g){1&a&&(e.TgZ(0,"p",5)(1,"span",6),e._uU(2,"\u6b64\u6b04\u4f4d\u5fc5\u586b"),e.qZA()())}function m(a,g){1&a&&(e.TgZ(0,"p",5)(1,"span",6),e._uU(2,"\u8acb\u8f38\u5165\u6b63\u78ba\u683c\u5f0f\u7684\u96fb\u5b50\u4fe1\u7bb1"),e.qZA()())}function i(a,g){if(1&a&&(e.ynx(0),e.YNc(1,o,3,0,"p",4),e.YNc(2,m,3,0,"p",4),e.BQk()),2&a){const l=e.oxw();e.xp6(1),e.Q6J("ngIf",null==l.control||null==l.control.errors?null:l.control.errors.required),e.xp6(1),e.Q6J("ngIf",null==l.control||null==l.control.errors?null:l.control.errors.email)}}const E=function(a,g){return{"input-error":a,"input-success":g}};let C=(()=>{class a extends h.A{constructor(){super(...arguments),this.type="text",this.placeholder="",this.size="md",this.inputmode="text"}}return a.\u0275fac=function(){let g;return function(s){return(g||(g=e.n5z(a)))(s||a)}}(),a.\u0275cmp=e.Xpm({type:a,selectors:[["app-input"]],inputs:{type:"type",placeholder:"placeholder",size:"size",inputmode:"inputmode"},standalone:!0,features:[e._Bn([(0,h.x)(a)]),e.qOj,e.jDz],decls:3,vars:22,consts:[["class","block",3,"for","class","ngClass",4,"ngIf"],[1,"input","input-bordered","border-2",3,"type","id","ngModel","ngClass","disabled","inputMode","placeholder","ngModelChange"],[4,"ngIf"],[1,"block",3,"for","ngClass"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"]],template:function(l,s){1&l&&(e.YNc(0,f,2,8,"label",0),e.TgZ(1,"input",1),e.NdJ("ngModelChange",function(O){return s.val=O})("ngModelChange",function(){return s.change()}),e.qZA(),e.YNc(2,i,3,2,"ng-container",2)),2&l&&(e.Q6J("ngIf",s.labelName),e.xp6(1),e.Tol(s.class),e.ekj("input-xs","xs"===s.size)("input-sm","sm"===s.size)("input-md","md"===s.size)("input-lg","lg"===s.size),e.Q6J("type",s.type)("id",null==s.ngControl?null:s.ngControl.name)("ngModel",s.val)("ngClass",e.WLB(19,E,(null==s.control?null:s.control.touched)&&(null==s.control?null:s.control.errors),(null==s.control?null:s.control.touched)&&!(null!=s.control&&s.control.errors)))("disabled",s.disabled)("inputMode",s.inputmode)("placeholder",s.placeholder),e.xp6(1),e.Q6J("ngIf",(null==s.control?null:s.control.touched)&&(null==s.control?null:s.control.errors)&&s.showErrorMsg))},dependencies:[t.ez,t.mk,t.O5,_.u5,_.Fj,_.JJ,_.On],styles:["[_nghost-%COMP%]{width:100%}"]}),a})()},681:(T,A,n)=>{n.d(A,{Z:()=>f});var _=n(2223),t=n(928),h=n(9646),e=n(8505),d=n(4782);let f=(()=>{class o{constructor(){this.transferState=(0,_.f3M)(_.kie),this.deviceSrv=(0,_.f3M)(t.U)}transfer(i,E,C=!0){const a=(0,_.Cb6)(i);if(this.transferState.hasKey(a)&&C){const g=this.transferState.get(a,void 0);return(0,h.of)(g)}return E().pipe((0,e.b)(l=>{this.deviceSrv.isServer&&this.transferState.set(a,l)}),(0,d.d)())}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4782:(T,A,n)=>{n.d(A,{d:()=>h});var _=n(4707),t=n(3099);function h(e,d,f){let o,m=!1;return e&&"object"==typeof e?({bufferSize:o=1/0,windowTime:d=1/0,refCount:m=!1,scheduler:f}=e):o=e??1/0,(0,t.B)({connector:()=>new _.t(o,d,f),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:m})}}}]);