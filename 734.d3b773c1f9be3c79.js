"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[734],{8734:(F,l,s)=>{s.r(l),s.d(l,{CodeTypeDetailComponent:()=>I});var e=s(4438),_=s(177),p=s(9079),c=s(4366),h=s(980),u=s(5964),m=s(5558),g=s(9478),E=s(4702),d=s(4453),f=s(9584),C=s(4014),T=s(2183),y=s(7343),D=s(1547);const v=t=>["/setting","code-type",t],b=t=>["/setting","code-type","edit",t],P=()=>[1,2,3,4,5];function j(t,i){if(1&t){const n=e.RV6();e.j41(0,"tr")(1,"th",10)(2,"a",11),e.nrm(3,"ng-icon",12),e.k0s(),e.j41(4,"a",13),e.nrm(5,"ng-icon",14),e.k0s(),e.j41(6,"button",15),e.bIt("click",function(){const o=e.eBV(n).$implicit,a=e.XpG(3);return e.Njj(a.deleteCodeType(o.id))}),e.nrm(7,"ng-icon",16),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.nI1(14,"dayJs"),e.k0s()()}if(2&t){const n=i.$implicit;e.R7$(2),e.Y8G("routerLink",e.eq3(8,v,n.codeTypeId)),e.R7$(2),e.Y8G("routerLink",e.eq3(10,b,n.id)),e.R7$(5),e.JRh(n.codeTypeId),e.R7$(2),e.JRh(n.codeTypeName),e.R7$(2),e.JRh(e.i5U(14,5,n.createDate,"YYYY/MM/DD"))}}function R(t,i){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",3)(2,"button",4),e.EFF(3,"\u65b0\u589e\u4ee3\u78bc\u985e\u578b"),e.k0s()(),e.j41(4,"div",5)(5,"table",6)(6,"thead")(7,"tr"),e.nrm(8,"th"),e.j41(9,"th",7),e.EFF(10,"\u4ee3\u78bc\u985e\u578bID"),e.k0s(),e.j41(11,"th",7),e.EFF(12,"\u4ee3\u78bc\u985e\u578b\u540d\u7a31"),e.k0s(),e.j41(13,"th",7),e.EFF(14,"\u5efa\u7acb\u65e5\u671f"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,j,15,12,"tr",8),e.k0s()()(),e.j41(17,"app-pagination",9),e.bIt("change",function(o){e.eBV(n);const a=e.XpG(2);return e.Njj(a.paginationChange(o))}),e.k0s(),e.bVm()}if(2&t){const n=e.XpG(2);e.R7$(16),e.Y8G("ngForOf",n.codeTypes()),e.R7$(),e.Y8G("total",n.total())("currentPage",n.page())}}function B(t,i){if(1&t&&(e.qex(0),e.DNE(1,R,18,3,"ng-container",2),e.bVm()),2&t){const n=e.XpG(),r=e.sdS(2);e.R7$(),e.Y8G("ngIf",!n.isLoading())("ngIfElse",r)}}function M(t,i){1&t&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"div",17),e.k0s(),e.j41(3,"td"),e.nrm(4,"div",17),e.k0s(),e.j41(5,"td"),e.nrm(6,"div",17),e.k0s(),e.j41(7,"td"),e.nrm(8,"div",17),e.k0s()())}function O(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"table",6)(2,"tbody")(3,"tr"),e.nrm(4,"td"),e.j41(5,"th",7),e.EFF(6,"\u4ee3\u78bc\u985e\u578bID"),e.k0s(),e.j41(7,"th",7),e.EFF(8,"\u4ee3\u78bc\u985e\u578b\u540d\u7a31"),e.k0s(),e.j41(9,"th",7),e.EFF(10,"\u5efa\u7acb\u65e5\u671f"),e.k0s()(),e.DNE(11,M,9,0,"tr",8),e.k0s()()(),e.j41(12,"app-pagination",9),e.bIt("change",function(o){e.eBV(n);const a=e.XpG();return e.Njj(a.paginationChange(o))}),e.k0s()}if(2&t){const n=e.XpG();e.R7$(11),e.Y8G("ngForOf",e.lJ4(3,P)),e.R7$(),e.Y8G("total",n.total())("currentPage",n.page())}}function A(t,i){if(1&t){const n=e.RV6();e.j41(0,"div",18)(1,"app-error",19),e.bIt("refresh",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.refreshCodeType())}),e.k0s()()}}let I=(()=>{var t;class i{constructor(){this.adminCodeTypeSrv=(0,e.WQX)(D.K),this.apiSrv=(0,e.WQX)(y.G),this.swalSrv=(0,e.WQX)(g.X),this.route=(0,e.WQX)(c.nX),this.router=(0,e.WQX)(c.Ix),this.total=(0,e.vPA)(0),this.codeTypes=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this.page=(0,e.vPA)(1),this._destroyRef=(0,e.WQX)(e.abz)}ngOnInit(){this.route.queryParamMap.pipe((0,p.pQ)(this._destroyRef)).subscribe(r=>{const o=r.get("page"),a=o?parseInt(o):1;this.page.set(isNaN(a)?1:a),this.getAdminCodeType(this.page())})}getAdminCodeType(r){this.isError.set(!1),this.isLoading.set(!0),this.adminCodeTypeSrv.getAdminCodeType(r).pipe((0,h.j)(()=>this.isLoading.set(!1)),(0,p.pQ)(this._destroyRef)).subscribe({next:o=>{if(this.apiSrv.ifSuccess(o,!1)){const{data:{total:a,codeTypes:x}}=o;this.total.set(a),this.codeTypes.set(x)}else this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}paginationChange(r){this.router.navigate(["/setting/code-type/detail"],{queryParams:{page:r}})}deleteCodeType(r){this.swalSrv.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u4ee3\u78bc\u985e\u578b\u55ce?",text:"\u9019\u500b\u64cd\u4f5c\u5c07\u6c38\u4e45\u522a\u9664\u8a72\u4ee3\u78bc\u985e\u578b\u53ca\u76f8\u95dc\u7684\u4ee3\u78bc\u3002\u8acb\u78ba\u8a8d\u60a8\u7684\u6c7a\u5b9a\uff0c\u56e0\u70ba\u9019\u4e9b\u5167\u5bb9\u5c07\u7121\u6cd5\u6062\u5fa9\u3002"}).pipe((0,u.p)(({isConfirmed:o})=>o),(0,m.n)(()=>this.adminCodeTypeSrv.deleteAdminCodeType(r)),(0,u.p)(o=>this.apiSrv.ifSuccess(o)),(0,m.n)(o=>this.swalSrv.alert({icon:g.J.Success,text:o.returnMessage})),(0,p.pQ)(this._destroyRef)).subscribe(()=>{this.page.set(1),this.getAdminCodeType(this.page())})}refreshCodeType(){this.page.set(1),this.getAdminCodeType(this.page())}}return(t=i).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-code-type-detail"]],standalone:!0,features:[e.Jv_([(0,E.EB)({heroPencilSquare:d.r6l,heroTrash:d.dmW,heroListBullet:d.Dvp})]),e.aNF],decls:5,vars:2,consts:[["loading",""],["error",""],[4,"ngIf","ngIfElse"],[1,"mb-5","flex","justify-end"],["routerLink","/setting/code-type/create",1,"btn","btn-primary"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"change","total","currentPage"],[1,"flex"],[1,"btn","btn-success","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroListBullet"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(r,o){if(1&r&&e.DNE(0,B,2,2,"ng-container",2)(1,O,13,4,"ng-template",null,0,e.C5r)(3,A,2,0,"ng-template",null,1,e.C5r),2&r){const a=e.sdS(4);e.Y8G("ngIf",!o.isError())("ngIfElse",a)}},dependencies:[_.MD,_.Sq,_.bT,C.e,E.Uq,c.Wk,T.s,f.A]}),i})()}}]);