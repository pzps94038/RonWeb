"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[119],{119:(g,m,r)=>{r.r(m),r.d(m,{ArticleLabelEditComponent:()=>D});var e=r(9416),_=r(4755),a=r(9401),h=r(6355),o=r(1415),u=r(9096),i=r(5855),d=r(8505),f=r(9300),E=r(4004),v=r(3900),p=r(8746),L=r(7929),A=r(4052),M=r(7134);function I(n,b){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.submit())}),e.TgZ(2,"div",3),e._UZ(3,"app-input",4),e.qZA(),e.TgZ(4,"div",5)(5,"button",6),e._uU(6," \u4fee\u6539\u6a19\u7c64 "),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.ekj("loading",t.isLoading()),e.Q6J("disabled",t.isLoading())}}function O(n,b){1&n&&(e.TgZ(0,"div",7)(1,"div")(2,"div",8),e._UZ(3,"div",9),e.qZA()()())}let D=(()=>{class n{constructor(){this.apiSrv=(0,e.f3M)(L.s),this.userSrv=(0,e.f3M)(A.K),this.swalSrv=(0,e.f3M)(u.J),this.articleLabelSrv=(0,e.f3M)(M.j),this.route=(0,e.f3M)(o.gz),this.router=(0,e.f3M)(o.F0),this.isLoading=(0,e.tdS)(!1),this.editIsLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this._destroyRef=(0,e.f3M)(e.ktI),this.form=new a.cw({labelId:new a.NI(void 0,[a.kI.required]),labelName:new a.NI("",[a.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,d.b)(()=>this.isLoading.set(!0)),(0,f.h)(t=>!!t.get("id")),(0,E.U)(t=>t.get("id")),(0,f.h)(t=>!isNaN(parseInt(t))),(0,E.U)(t=>parseInt(t)),(0,v.w)(t=>this.articleLabelSrv.getArticleLabelById(t,!1)),(0,f.h)(t=>this.apiSrv.ifSuccess(t)),(0,E.U)(({data:t})=>t),(0,d.b)(({labelId:t,labelName:l})=>{var s,c;null===(s=this.form.get("labelId"))||void 0===s||s.setValue(t),null===(c=this.form.get("labelName"))||void 0===c||c.setValue(l)}),(0,i.sL)(this._destroyRef)).subscribe(t=>{var l,s;const{labelId:c,labelName:P}=t;null===(l=this.form.get("labelId"))||void 0===l||l.setValue(c),null===(s=this.form.get("labelName"))||void 0===s||s.setValue(P),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const t={labelId:this.form.get("labelId").value,labelName:this.form.get("labelName").value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.articleLabelSrv.updateArticleLabel(t).pipe((0,f.h)(l=>this.apiSrv.ifSuccess(l,!0)),(0,v.w)(({returnMessage:l})=>this.swalSrv.alert({icon:u.u.Success,text:l})),(0,p.x)(()=>this.editIsLoading.set(!1)),(0,i.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article-label"])})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-article-label-edit"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u6a19\u7c64","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u6a19\u7c64","formControlName","labelName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(t,l){if(1&t&&(e.YNc(0,I,7,4,"ng-container",0),e.YNc(1,O,4,0,"ng-template",null,1,e.W1O)),2&t){const s=e.MAs(2);e.Q6J("ngIf",!l.isLoading())("ngIfElse",s)}},dependencies:[_.ez,_.O5,h.a,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u]}),n})()},7134:(g,m,r)=>{r.d(m,{j:()=>h});var e=r(3144),_=r(9416),a=r(2340);let h=(()=>{class o{constructor(){this.http=(0,_.f3M)(e.eN)}getArticleLabel(i){const d=i?(new e.LE).append("page",i):void 0;return this.http.get(`${a.N.baseUrl}/adminArticleLabel`,{params:d})}getArticleLabelById(i,d=!0){return this.http.get(`${a.N.baseUrl}/adminArticleLabel/${i}`)}updateArticleLabel(i){return this.http.patch(`${a.N.baseUrl}/adminArticleLabel/${i.labelId}`,i)}createArticleLabel(i){return this.http.post(`${a.N.baseUrl}/adminArticleLabel`,i)}deleteArticleLabel(i){return this.http.delete(`${a.N.baseUrl}/adminArticleLabel/${i}`)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);