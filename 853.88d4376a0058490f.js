"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[853],{853:(m,h,e)=>{e.r(h),e.d(h,{ArticleDetailComponent:()=>B});var t=e(2223),l=e(4755),u=e(2993),_=e(5249),p=e(5796),E=e(8028),s=e(7915),A=e(3665),n=e(5855),g=e(262),c=e(8746),f=e(9300),v=e(3900),T=e(8884),D=e(9096),O=e(7929);const C=function(a){return["/setting","article","edit",a]};function P(a,d){if(1&a){const r=t.EpF();t.TgZ(0,"tr")(1,"th",9)(2,"a",10),t._UZ(3,"ng-icon",11),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){const M=t.CHM(r).$implicit,R=t.oxw(3);return t.KtG(R.deleteArticle(M.articleId))}),t._UZ(5,"ng-icon",13),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"dayJs"),t.qZA()()}if(2&a){const r=d.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(8,C,r.articleId)),t.xp6(5),t.Oqu(r.articleTitle),t.xp6(2),t.Oqu(r.categoryName),t.xp6(2),t.Oqu(r.viewCount),t.xp6(2),t.Oqu(t.xi3(14,5,r.createDate,"YYYY/MM/DD hh:mm"))}}function Z(a,d){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"button",3),t._uU(2,"\u65b0\u589e\u6587\u7ae0"),t.qZA(),t.TgZ(3,"div",4)(4,"table",5)(5,"thead")(6,"tr"),t._UZ(7,"th"),t.TgZ(8,"th",6),t._uU(9,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(10,"th",6),t._uU(11,"\u5206\u985e"),t.qZA(),t.TgZ(12,"th",6),t._uU(13,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(14,"th",6),t._uU(15,"\u5efa\u7acb\u65e5\u671f"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,P,15,10,"tr",7),t.qZA()()(),t.TgZ(18,"app-pagination",8),t.NdJ("change",function(o){t.CHM(r);const M=t.oxw(2);return t.KtG(M.paginationChange(o))}),t.qZA(),t.BQk()}if(2&a){const r=t.oxw(2);t.xp6(17),t.Q6J("ngForOf",r.articles()),t.xp6(1),t.Q6J("total",r.total())("currentPage",r.page())}}function U(a,d){if(1&a&&(t.ynx(0),t.YNc(1,Z,19,3,"ng-container",0),t.BQk()),2&a){const r=t.oxw(),i=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!r.isLoading())("ngIfElse",i)}}function x(a,d){1&a&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",14),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"div",14),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"div",14),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"div",14),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"div",14),t.qZA()())}const I=function(){return[1,2,3,4,5]};function L(a,d){if(1&a){const r=t.EpF();t.TgZ(0,"div",4)(1,"table",5)(2,"tbody")(3,"tr"),t._UZ(4,"td"),t.TgZ(5,"td",6),t._uU(6,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(7,"td",6),t._uU(8,"\u5206\u985e"),t.qZA(),t.TgZ(9,"td",6),t._uU(10,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(11,"td",6),t._uU(12,"\u5efa\u7acb\u65e5\u671f"),t.qZA()(),t.YNc(13,x,11,0,"tr",7),t.qZA()()(),t.TgZ(14,"app-pagination",8),t.NdJ("change",function(o){t.CHM(r);const M=t.oxw();return t.KtG(M.paginationChange(o))}),t.qZA()}if(2&a){const r=t.oxw();t.xp6(13),t.Q6J("ngForOf",t.DdM(3,I)),t.xp6(1),t.Q6J("total",r.total())("currentPage",r.page())}}function y(a,d){if(1&a){const r=t.EpF();t.TgZ(0,"div",15)(1,"app-error",16),t.NdJ("refresh",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.getArticle())}),t.qZA()()}}let B=(()=>{class a{constructor(){this.articleSrv=(0,t.f3M)(T.n),this.apiSrv=(0,t.f3M)(O.s),this.swalSrv=(0,t.f3M)(D.J),this.route=(0,t.f3M)(p.gz),this.router=(0,t.f3M)(p.F0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,n.sL)(this._destroyRef)).subscribe(r=>{const i=r.get("page"),o=i?parseInt(i):1;this.page.set(isNaN(o)?1:o),this.getArticle(this.page())})}getArticle(r){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(r,!1).pipe((0,g.K)(i=>{throw this.isError.set(!0),i}),(0,c.x)(()=>this.isLoading.set(!1)),(0,n.sL)(this._destroyRef)).subscribe(i=>{if(this.apiSrv.ifSuccess(i,!1)){const{data:{total:o,articles:M}}=i;this.total.set(o),this.articles.set(M)}else this.isError.set(!0)})}paginationChange(r){this.router.navigate(["/setting/article"],{queryParams:{page:r}})}deleteArticle(r){this.swalSrv.confirm({text:"\u78ba\u5b9a\u8981\u522a\u9664\u6587\u7ae0\u55ce?"}).pipe((0,f.h)(({isConfirmed:i})=>i),(0,v.w)(()=>this.articleSrv.deleteArticle(r)),(0,f.h)(i=>this.apiSrv.ifSuccess(i)),(0,v.w)(i=>this.swalSrv.alert({icon:D.u.Success,text:i.returnMessage})),(0,n.sL)(this._destroyRef)).subscribe(()=>this.getArticle())}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-article-detail"]],standalone:!0,features:[t._Bn([(0,u.kp)({heroPencilSquare:_.yUl,heroTrash:_.ciC})]),t.jDz],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],["routerLink","/setting/article/create",1,"btn","btn-primary","mb-5"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"total","currentPage","change"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(r,i){if(1&r&&(t.YNc(0,U,2,2,"ng-container",0),t.YNc(1,L,15,4,"ng-template",null,1,t.W1O),t.YNc(3,y,2,0,"ng-template",null,2,t.W1O)),2&r){const o=t.MAs(4);t.Q6J("ngIf",!i.isError())("ngIfElse",o)}},dependencies:[l.ez,l.sg,l.O5,u.Fv,E.q,s.Q,A.g,p.rH]}),a})()},8884:(m,h,e)=>{e.d(h,{n:()=>E});var t=e(4782),l=e(3144),u=e(2223),_=e(2340),p=e(681);let E=(()=>{class s{constructor(){this.http=(0,u.f3M)(l.eN),this.transferSrv=(0,u.f3M)(p.Z),this.articleMap=new Map,this.articleByIdMap=new Map}getArticle(n,g=!0){const c=()=>{if(!g||!this.articleMap.has(n)){const f=n?(new l.LE).append("page",n):void 0,v=this.http.get(`${_.N.baseUrl}/article`,{params:f}).pipe((0,t.d)());this.articleMap.set(n,v)}return this.articleMap.get(n)};return g?this.transferSrv.transfer(`articleList-${n}`,c):c()}getArticleById(n,g=!0){const c=()=>{if(!g||!this.articleByIdMap.has(n)){const f=this.http.get(`${_.N.baseUrl}/article/${n}`).pipe((0,t.d)());this.articleByIdMap.set(n,f)}return this.articleByIdMap.get(n)};return g?this.transferSrv.transfer(`article-${n}`,c):c()}createArticle(n){return this.http.post(`${_.N.baseUrl}/article`,n)}updateArticle(n){return this.http.patch(`${_.N.baseUrl}/article/${n.articleId}`,n)}deleteArticle(n){return this.http.delete(`${_.N.baseUrl}/article/${n}`)}updateArticleViews(n){return this.http.patch(`${_.N.baseUrl}/article/updateArticleViews/${n}`,{})}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275prov=u.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},681:(m,h,e)=>{e.d(h,{Z:()=>E});var t=e(2223),l=e(928),u=e(9646),_=e(8505),p=e(4782);let E=(()=>{class s{constructor(){this.transferState=(0,t.f3M)(t.kie),this.deviceSrv=(0,t.f3M)(l.U)}transfer(n,g){const c=(0,t.Cb6)(n);if(this.transferState.hasKey(c)){const f=this.transferState.get(c,void 0);return(0,u.of)(f)}return g().pipe((0,_.b)(v=>{this.deviceSrv.isServer&&this.transferState.set(c,v)}),(0,p.d)())}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},4782:(m,h,e)=>{e.d(h,{d:()=>u});var t=e(4707),l=e(3099);function u(_,p,E){let s,A=!1;return _&&"object"==typeof _?({bufferSize:s=1/0,windowTime:p=1/0,refCount:A=!1,scheduler:E}=_):s=_??1/0,(0,l.B)({connector:()=>new t.t(s,p,E),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:A})}}}]);