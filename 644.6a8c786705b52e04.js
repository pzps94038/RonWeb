"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[644],{3644:(R,_,o)=>{o.r(_),o.d(_,{LoginComponent:()=>O});var m=o(9079),t=o(4438),l=o(177),g=o(19),e=o(9417),c=o(1032),p=o(8687),f=o(9437),v=o(980),u=o(4702),E=o(4453),h=o(4366),M=o(7343),C=o(2953);function D(r,a){if(1&r){const i=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"span",14),t.EFF(3),t.k0s()(),t.j41(4,"ng-icon",15),t.bIt("click",function(){t.eBV(i);const s=t.XpG();return t.Njj(s.errMsg.set(""))}),t.k0s()()}if(2&r){const i=t.XpG();t.R7$(3),t.JRh(i.errMsg())}}let O=(()=>{var r;class a{constructor(){this.loginSrv=(0,t.WQX)(p.H),this.apiSrv=(0,t.WQX)(M.G),this.userSrv=(0,t.WQX)(C.D),this.router=(0,t.WQX)(h.Ix),this.loading=(0,t.vPA)(!1),this.errMsg=(0,t.vPA)(void 0),this._destroyRef=(0,t.WQX)(t.abz),this.form=new e.gE({account:new e.MJ("",[e.k0.required]),password:new e.MJ("",[e.k0.required])}),this.loginOptions={path:"assets/lottie/login.json"}}submit(){this.form.markAllAsTouched(),!this.form.invalid&&(this.loading.set(!0),this.loginSrv.login({account:this.form.controls.account.value,password:this.form.controls.password.value}).pipe((0,f.W)(n=>{throw this.errMsg.set("\u7cfb\u7d71\u767c\u751f\u932f\u8aa4"),n}),(0,v.j)(()=>this.loading.set(!1)),(0,m.pQ)(this._destroyRef)).subscribe(n=>{const{returnMessage:s,data:d}=n;if(this.apiSrv.ifSuccess(n,!1)){const{token:P,userId:b}=d;this.userSrv.setToken(P),this.userSrv.setUserId(b),this.userSrv.isLogin.set(!0),this.router.navigate(["setting"])}else this.errMsg.set(s)}))}}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275cmp=t.VBU({type:r,selectors:[["app-login"]],standalone:!0,features:[t.Jv_([(0,u.EB)({heroXMark:E.QK7})]),t.aNF],decls:16,vars:6,consts:[[1,"bg-banner","bg-cover","bg-fixed","h-screen","flex","justify-center","items-center"],[1,"bg-base-100","text-base-content","rounded-md","mt-20","md:mt-0","mx-5"],[1,"text-center","text-3xl","font-semibold","my-3"],[1,"w-60","mx-auto"],[3,"options"],[1,"flex","flex-wrap","items-center","w-full","sm:w-[500px]",3,"ngSubmit","formGroup"],[1,"w-full","px-3","my-2"],["class","alert alert-error shadow-lg border-2 bg-rose-800/[0.1] border-rose-900 relative py-5",4,"ngIf"],["placeholder","\u8acb\u8f38\u5165\u5e33\u865f","formControlName","account",1,"w-full"],["type","password","placeholder","\u8acb\u8f38\u5165\u5bc6\u78bc","formControlName","password",1,"w-full"],[1,"w-full","flex","justify-center","items-center"],["type","submit",1,"btn","btn-primary","my-3","px-8",3,"disabled"],[1,"alert","alert-error","shadow-lg","border-2","bg-rose-800/[0.1]","border-rose-900","relative","py-5"],[1,"absolute","left-5","top-2"],[1,"text-base","font-semibold","text-rose-900"],["name","heroXMark",1,"cursor-pointer","absolute","right-5","top-1","md:top-3","text-rose-900",3,"click"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3,"\u767b\u5165"),t.k0s(),t.j41(4,"div",3),t.nrm(5,"ng-lottie",4),t.k0s(),t.j41(6,"form",5),t.bIt("ngSubmit",function(){return s.submit()}),t.j41(7,"div",6),t.DNE(8,D,5,1,"div",7),t.k0s(),t.j41(9,"div",6),t.nrm(10,"app-input",8),t.k0s(),t.j41(11,"div",6),t.nrm(12,"app-input",9),t.k0s(),t.j41(13,"div",10)(14,"button",11),t.EFF(15," \u767b\u5165 "),t.k0s()()()()()),2&n&&(t.R7$(5),t.Y8G("options",s.loginOptions),t.R7$(),t.Y8G("formGroup",s.form),t.R7$(2),t.Y8G("ngIf",s.errMsg()),t.R7$(6),t.AVh("loading",s.loading()),t.Y8G("disabled",s.loading()))},dependencies:[l.MD,l.bT,g.S,e.X1,e.qT,e.BC,e.cb,e.j4,e.JD,c.e,u.Uq]}),a})()}}]);