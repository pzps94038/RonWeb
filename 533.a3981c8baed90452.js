"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[533],{1533:(j,p,r)=>{r.r(p),r.d(p,{LabelComponent:()=>W});var e=r(4438),c=r(177),g=r(9079),d=r(4366),h=r(4572),m=r(5964),E=r(9437),b=r(980),u=r(3181),v=r(7113),C=r(9584),f=r(4014),P=r(8255),M=r(6147),I=r(8403),L=r(7343),D=r(2656);const O=(n,s)=>({categoryId:n,categoryName:s});function B(n,s){if(1&n){const a=e.RV6();e.j41(0,"app-article-card",6),e.bIt("category",function(o){e.eBV(a);const _=e.XpG(3);return e.Njj(_.navigateCategory(o))})("label",function(o){e.eBV(a);const _=e.XpG(3);return e.Njj(_.navigateLabel(o))})("showMore",function(){const o=e.eBV(a).$implicit,_=e.XpG(3);return e.Njj(_.showMore(o.articleId))}),e.k0s()}if(2&n){const a=s.$implicit;e.Y8G("articleId",a.articleId)("title",a.articleTitle)("date",a.createDate)("category",e.l_i(6,O,a.categoryId,a.categoryName))("labels",a.labels)("previewContent",a.previewContent)}}function T(n,s){if(1&n&&(e.qex(0),e.j41(1,"div",4)(2,"h3"),e.EFF(3),e.k0s()(),e.DNE(4,B,1,9,"app-article-card",5),e.bVm()),2&n){const a=e.XpG(2);e.R7$(3),e.SpI("\u4ee5\u4e0b\u662f",a.label(),"\u7684\u641c\u5c0b\u7d50\u679c\uff1a"),e.R7$(),e.Y8G("ngForOf",a.articles())}}function R(n,s){if(1&n&&(e.qex(0),e.DNE(1,T,5,2,"ng-container",2),e.bVm()),2&n){const a=e.XpG(),t=e.sdS(2);e.R7$(),e.Y8G("ngIf",!a.isLoading())("ngIfElse",t)}}function A(n,s){1&n&&e.nrm(0,"app-loading-keyword")(1,"app-loading-card")(2,"app-loading-card")(3,"app-loading-card")}function y(n,s){if(1&n){const a=e.RV6();e.j41(0,"div",7)(1,"app-error",8),e.bIt("refresh",function(){e.eBV(a);const o=e.XpG();return e.Njj(o.searchLabel(o.labelId(),o.page()))}),e.k0s()()}}let W=(()=>{var n;class s{constructor(){this.route=(0,e.WQX)(d.nX),this.router=(0,e.WQX)(d.Ix),this.searchSrv=(0,e.WQX)(u.S),this.apiSrv=(0,e.WQX)(L.G),this.codeBlockSrv=(0,e.WQX)(D.G),this.label=(0,e.vPA)(""),this.labelId=(0,e.vPA)(void 0),this.total=(0,e.vPA)(0),this.articles=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this.page=(0,e.vPA)(1),this._destroyRef=(0,e.WQX)(e.abz)}ngOnInit(){(0,h.z)([this.route.paramMap,this.route.queryParamMap]).pipe((0,m.p)(([t])=>!(!t.get("id")||isNaN(parseInt(t.get("id"))))||(this.router.navigate(["blog"]),!1)),(0,g.pQ)(this._destroyRef)).subscribe(([t,o])=>{const _=parseInt(t.get("id"));this.labelId.set(_);const l=o.get("page"),i=l?parseInt(l):1;this.page.set(isNaN(i)?1:i),this.searchLabel(_,this.page())})}searchLabel(t,o){this.isError.set(!1),this.isLoading.set(!0),this.searchSrv.label(t,o).pipe((0,E.W)(_=>{throw this.isError.set(!0),_}),(0,b.j)(()=>this.isLoading.set(!1)),(0,g.pQ)(this._destroyRef)).subscribe(_=>{if(this.apiSrv.ifSuccess(_,!1)){const{data:{total:l,articles:i,keyword:U}}=_;this.total.set(l),this.articles.set(i),this.label.set(U),this.codeBlockSrv.highlightAllBlock()}else _.returnCode===v.M.NotFound?this.router.navigate(["blog","notFound"]):this.isError.set(!0)})}showMore(t){this.router.navigateByUrl("/blog/article/".concat(t))}navigateCategory({categoryId:t}){this.router.navigateByUrl("/blog/category/".concat(t))}navigateLabel({labelId:t}){this.router.navigateByUrl("/blog/label/".concat(t))}paginationChange(t){this.router.navigate(["blog","label",this.labelId()],{queryParams:{page:t}})}}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-label"]],standalone:!0,features:[e.aNF],decls:6,vars:4,consts:[["loading",""],["error",""],[4,"ngIf","ngIfElse"],[3,"change","total","currentPage"],[1,"p-5","bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","mb-5"],[3,"articleId","title","date","category","labels","previewContent","label","showMore",4,"ngFor","ngForOf"],[3,"category","label","showMore","articleId","title","date","labels","previewContent"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(t,o){if(1&t){const _=e.RV6();e.DNE(0,R,2,2,"ng-container",2)(1,A,4,0,"ng-template",null,0,e.C5r)(3,y,2,0,"ng-template",null,1,e.C5r),e.j41(5,"app-pagination",3),e.bIt("change",function(i){return e.eBV(_),e.Njj(o.paginationChange(i))}),e.k0s()}if(2&t){const _=e.sdS(4);e.Y8G("ngIf",!o.isError())("ngIfElse",_),e.R7$(5),e.Y8G("total",o.total())("currentPage",o.page())}},dependencies:[c.MD,c.Sq,c.bT,C.A,f.e,P.G,M.z,I.O]}),s})()}}]);