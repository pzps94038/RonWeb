"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[263],{7263:(D,c,r)=>{r.r(c),r.d(c,{ArticleLabelEditComponent:()=>C});var e=r(4438),m=r(177),s=r(9417),p=r(19),u=r(4366),f=r(9478),b=r(9079),v=r(8141),l=r(5964),_=r(6354),E=r(5558),h=r(980),g=r(7343),L=r(2953),A=r(6483);function I(a,o){if(1&a){const i=e.RV6();e.qex(0),e.j41(1,"form",2),e.bIt("ngSubmit",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.submit())}),e.j41(2,"div",3),e.nrm(3,"app-input",4),e.k0s(),e.j41(4,"div",5)(5,"button",6),e.EFF(6," \u4fee\u6539\u6a19\u7c64 "),e.k0s()()(),e.bVm()}if(2&a){const i=e.XpG();e.R7$(),e.Y8G("formGroup",i.form),e.R7$(4),e.AVh("loading",i.isLoading()),e.Y8G("disabled",i.isLoading())}}function M(a,o){1&a&&(e.j41(0,"div",7)(1,"div")(2,"div",8),e.nrm(3,"div",9),e.k0s()()())}let C=(()=>{var a;class o{constructor(){this.apiSrv=(0,e.WQX)(g.G),this.userSrv=(0,e.WQX)(L.D),this.swalSrv=(0,e.WQX)(f.X),this.articleLabelSrv=(0,e.WQX)(A.P),this.route=(0,e.WQX)(u.nX),this.router=(0,e.WQX)(u.Ix),this.isLoading=(0,e.vPA)(!1),this.editIsLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this._destroyRef=(0,e.WQX)(e.abz),this.form=new s.gE({labelId:new s.MJ(void 0,[s.k0.required]),labelName:new s.MJ("",[s.k0.required])})}ngOnInit(){this.route.paramMap.pipe((0,v.M)(()=>this.isLoading.set(!0)),(0,l.p)(t=>!!t.get("id")),(0,_.T)(t=>t.get("id")),(0,l.p)(t=>!isNaN(parseInt(t))),(0,_.T)(t=>parseInt(t)),(0,E.n)(t=>this.articleLabelSrv.getArticleLabelById(t)),(0,l.p)(t=>this.apiSrv.ifSuccess(t)),(0,_.T)(({data:t})=>t),(0,b.pQ)(this._destroyRef)).subscribe(t=>{const{labelId:n,labelName:d}=t;this.form.controls.labelId.setValue(n),this.form.controls.labelName.setValue(d),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const t={labelId:this.form.controls.labelId.value,labelName:this.form.controls.labelName.value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.articleLabelSrv.updateArticleLabel(t).pipe((0,l.p)(n=>this.apiSrv.ifSuccess(n,!0)),(0,E.n)(({returnMessage:n})=>this.swalSrv.alert({icon:f.J.Success,text:n})),(0,h.j)(()=>this.editIsLoading.set(!1)),(0,b.pQ)(this._destroyRef)).subscribe(()=>this.router.navigate(["/setting/article-label"]))}}return(a=o).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.VBU({type:a,selectors:[["app-article-label-edit"]],standalone:!0,features:[e.aNF],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"ngSubmit","formGroup"],[1,"my-5"],["labelName","\u6a19\u7c64","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u6a19\u7c64","formControlName","labelName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(t,n){if(1&t&&e.DNE(0,I,7,4,"ng-container",1)(1,M,4,0,"ng-template",null,0,e.C5r),2&t){const d=e.sdS(2);e.Y8G("ngIf",!n.isLoading())("ngIfElse",d)}},dependencies:[m.MD,m.bT,p.S,s.X1,s.qT,s.BC,s.cb,s.j4,s.JD]}),o})()}}]);