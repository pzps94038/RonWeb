"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[960],{1960:(k,m,s)=>{s.r(m),s.d(m,{CodeDetailComponent:()=>L});var e=s(4438),c=s(177),p=s(9079),l=s(4366),f=s(4572),D=s(980),u=s(5964),E=s(5558),g=s(9478),h=s(4702),C=s(4453),v=s(9584),I=s(4014),T=s(2183),P=s(7343),b=s(2539);const j=n=>["/setting","code-type",n,"create"],R=n=>({codeTypeName:n}),y=(n,i)=>["/setting","code-type",n,"edit",i],M=()=>[1,2,3,4,5];function A(n,i){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"th",10)(2,"a",11),e.nrm(3,"ng-icon",12),e.k0s(),e.j41(4,"button",13),e.bIt("click",function(){const r=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.deleteCode(r.id))}),e.nrm(5,"ng-icon",14),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"dayJs"),e.k0s()()}if(2&n){const t=i.$implicit,o=e.XpG(3);e.R7$(2),e.Y8G("routerLink",e.l_i(7,y,o.codeTypeId(),t.id)),e.R7$(5),e.JRh(t.codeId),e.R7$(2),e.JRh(t.codeName),e.R7$(2),e.JRh(e.i5U(12,4,t.createDate,"YYYY/MM/DD"))}}function O(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",3)(2,"div")(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()(),e.j41(7,"button",4),e.EFF(8," \u65b0\u589e\u4ee3\u78bc "),e.k0s()(),e.j41(9,"div",5)(10,"table",6)(11,"thead")(12,"tr"),e.nrm(13,"th"),e.j41(14,"th",7),e.EFF(15,"\u4ee3\u78bcID"),e.k0s(),e.j41(16,"th",7),e.EFF(17,"\u4ee3\u78bc\u540d\u7a31"),e.k0s(),e.j41(18,"th",7),e.EFF(19,"\u5efa\u7acb\u65e5\u671f"),e.k0s()()(),e.j41(20,"tbody"),e.DNE(21,A,13,10,"tr",8),e.k0s()()(),e.j41(22,"app-pagination",9),e.bIt("change",function(r){e.eBV(t);const a=e.XpG(2);return e.Njj(a.paginationChange(r))}),e.k0s(),e.bVm()}if(2&n){const t=e.XpG(2);e.R7$(4),e.SpI("\u4ee3\u78bc\u985e\u578bID: ",t.codeTypeId(),""),e.R7$(2),e.SpI("\u4ee3\u78bc\u985e\u578b\u540d\u7a31: ",t.codeTypeName(),""),e.R7$(),e.Y8G("routerLink",e.eq3(7,j,t.codeTypeId()))("state",e.eq3(9,R,t.codeTypeName())),e.R7$(14),e.Y8G("ngForOf",t.codes()),e.R7$(),e.Y8G("total",t.total())("currentPage",t.page())}}function B(n,i){if(1&n&&(e.qex(0),e.DNE(1,O,23,11,"ng-container",2),e.bVm()),2&n){const t=e.XpG(),o=e.sdS(2);e.R7$(),e.Y8G("ngIf",!t.isLoading())("ngIfElse",o)}}function F(n,i){1&n&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"div",15),e.k0s(),e.j41(3,"td"),e.nrm(4,"div",15),e.k0s(),e.j41(5,"td"),e.nrm(6,"div",15),e.k0s(),e.j41(7,"td"),e.nrm(8,"div",15),e.k0s()())}function x(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"table",6)(2,"tbody")(3,"tr"),e.nrm(4,"td"),e.j41(5,"th",7),e.EFF(6,"\u4ee3\u78bcID"),e.k0s(),e.j41(7,"th",7),e.EFF(8,"\u4ee3\u78bc\u540d\u7a31"),e.k0s(),e.j41(9,"th",7),e.EFF(10,"\u5efa\u7acb\u65e5\u671f"),e.k0s()(),e.DNE(11,F,9,0,"tr",8),e.k0s()()(),e.j41(12,"app-pagination",9),e.bIt("change",function(r){e.eBV(t);const a=e.XpG();return e.Njj(a.paginationChange(r))}),e.k0s()}if(2&n){const t=e.XpG();e.R7$(11),e.Y8G("ngForOf",e.lJ4(3,M)),e.R7$(),e.Y8G("total",t.total())("currentPage",t.page())}}function W(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",16)(1,"app-error",17),e.bIt("refresh",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.refreshCode())}),e.k0s()()}}let L=(()=>{var n;class i{constructor(){this.adminCodeSrv=(0,e.WQX)(b._),this.apiSrv=(0,e.WQX)(P.G),this.swalSrv=(0,e.WQX)(g.X),this.route=(0,e.WQX)(l.nX),this.router=(0,e.WQX)(l.Ix),this.total=(0,e.vPA)(0),this.codes=(0,e.vPA)([]),this.codeTypeId=(0,e.vPA)(null),this.codeTypeName=(0,e.vPA)(null),this.isLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this.page=(0,e.vPA)(1),this._destroyRef=(0,e.WQX)(e.abz)}ngOnInit(){(0,f.z)([this.route.paramMap,this.route.queryParamMap]).pipe((0,p.pQ)(this._destroyRef)).subscribe(([o,r])=>{const a=o.get("code-type-id");this.codeTypeId.set(a);const _=r.get("page"),d=_?parseInt(_):1;this.page.set(isNaN(d)?1:d),this.getAdminCode(a,this.page())})}getAdminCode(o,r){this.isError.set(!1),this.isLoading.set(!0),this.adminCodeSrv.getAdminCode(o,r).pipe((0,D.j)(()=>this.isLoading.set(!1)),(0,p.pQ)(this._destroyRef)).subscribe({next:a=>{if(this.apiSrv.ifSuccess(a,!1)){const{data:{total:_,codes:d,codeTypeId:S,codeTypeName:U}}=a;this.total.set(_),this.codes.set(d),this.codeTypeId.set(S),this.codeTypeName.set(U)}else this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}paginationChange(o){this.router.navigate(["/setting/code-type/".concat(this.codeTypeId(),"/detail")],{queryParams:{page:o}})}deleteCode(o){this.swalSrv.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u4ee3\u78bc\u55ce?",text:"\u9019\u500b\u64cd\u4f5c\u5c07\u6c38\u4e45\u522a\u9664\u8a72\u4ee3\u78bc\u3002\u8acb\u78ba\u8a8d\u60a8\u7684\u6c7a\u5b9a\uff0c\u56e0\u70ba\u9019\u4e9b\u5167\u5bb9\u5c07\u7121\u6cd5\u6062\u5fa9\u3002"}).pipe((0,u.p)(({isConfirmed:r})=>r),(0,E.n)(()=>this.adminCodeSrv.deleteAdminCode(o)),(0,u.p)(r=>this.apiSrv.ifSuccess(r)),(0,E.n)(r=>this.swalSrv.alert({icon:g.J.Success,text:r.returnMessage})),(0,p.pQ)(this._destroyRef)).subscribe(()=>{this.page.set(1),this.getAdminCode(this.codeTypeId(),this.page())})}refreshCode(){this.page.set(1),this.getAdminCode(this.codeTypeId(),this.page())}}return(n=i).\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-code-detail"]],standalone:!0,features:[e.Jv_([(0,h.EB)({heroPencilSquare:C.r6l,heroTrash:C.dmW})]),e.aNF],decls:5,vars:2,consts:[["loading",""],["error",""],[4,"ngIf","ngIfElse"],[1,"mb-5","flex","justify-between","items-center"],[1,"btn","btn-primary",3,"routerLink","state"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"change","total","currentPage"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(o,r){if(1&o&&e.DNE(0,B,2,2,"ng-container",2)(1,x,13,4,"ng-template",null,0,e.C5r)(3,W,2,0,"ng-template",null,1,e.C5r),2&o){const a=e.sdS(4);e.Y8G("ngIf",!r.isError())("ngIfElse",a)}},dependencies:[c.MD,c.Sq,c.bT,I.e,h.Uq,l.Wk,T.s,v.A]}),i})()}}]);