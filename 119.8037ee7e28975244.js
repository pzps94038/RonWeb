"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[119],{119:(p,b,t)=>{t.r(b),t.d(b,{ArticleLabelEditComponent:()=>O});var e=t(9416),d=t(4755),s=t(9401),n=t(6355),u=t(1415),E=t(9096),l=t(5855),v=t(8505),r=t(9300),o=t(4004),h=t(3900),c=t(8746),m=t(1514),I=t(7929),g=t(4052);function A(f,L){if(1&f){const a=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(a);const _=e.oxw();return e.KtG(_.submit())}),e.TgZ(2,"div",3),e._UZ(3,"app-input",4),e.qZA(),e.TgZ(4,"div",5)(5,"button",6),e._uU(6," \u4fee\u6539\u6a19\u7c64 "),e.qZA()()(),e.BQk()}if(2&f){const a=e.oxw();e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(4),e.ekj("loading",a.isLoading()),e.Q6J("disabled",a.isLoading())}}function D(f,L){1&f&&(e.TgZ(0,"div",7)(1,"div")(2,"div",8),e._UZ(3,"div",9),e.qZA()()())}let O=(()=>{class f{constructor(){this.apiSrv=(0,e.f3M)(I.s),this.userSrv=(0,e.f3M)(g.K),this.swalSrv=(0,e.f3M)(E.J),this.articleLabelSrv=(0,e.f3M)(m.F),this.route=(0,e.f3M)(u.gz),this.router=(0,e.f3M)(u.F0),this.isLoading=(0,e.tdS)(!1),this.editIsLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this._destroyRef=(0,e.f3M)(e.ktI),this.form=new s.cw({labelId:new s.NI(void 0,[s.kI.required]),labelName:new s.NI("",[s.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,v.b)(()=>this.isLoading.set(!0)),(0,r.h)(a=>!!a.get("id")),(0,o.U)(a=>a.get("id")),(0,r.h)(a=>!isNaN(parseInt(a))),(0,o.U)(a=>parseInt(a)),(0,h.w)(a=>this.articleLabelSrv.getArticleLabelById(a,!1)),(0,r.h)(a=>this.apiSrv.ifSuccess(a)),(0,o.U)(({data:a})=>a),(0,v.b)(({labelId:a,labelName:i})=>{var _,M;null===(_=this.form.get("labelId"))||void 0===_||_.setValue(a),null===(M=this.form.get("labelName"))||void 0===M||M.setValue(i)}),(0,l.sL)(this._destroyRef)).subscribe(a=>{var i,_;const{labelId:M,labelName:P}=a;null===(i=this.form.get("labelId"))||void 0===i||i.setValue(M),null===(_=this.form.get("labelName"))||void 0===_||_.setValue(P),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const a={labelId:this.form.get("labelId").value,labelName:this.form.get("labelName").value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.articleLabelSrv.updateArticleLabel(a).pipe((0,r.h)(i=>this.apiSrv.ifSuccess(i,!0)),(0,h.w)(({returnMessage:i})=>this.swalSrv.alert({icon:E.u.Success,text:i})),(0,c.x)(()=>this.editIsLoading.set(!1)),(0,l.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article-label"])})}}return f.\u0275fac=function(a){return new(a||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-article-label-edit"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u6a19\u7c64","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u6a19\u7c64","formControlName","labelName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(a,i){if(1&a&&(e.YNc(0,A,7,4,"ng-container",0),e.YNc(1,D,4,0,"ng-template",null,1,e.W1O)),2&a){const _=e.MAs(2);e.Q6J("ngIf",!i.isLoading())("ngIfElse",_)}},dependencies:[d.ez,d.O5,n.a,s.UX,s._Y,s.JJ,s.JL,s.sg,s.u]}),f})()},1514:(p,b,t)=>{t.d(b,{F:()=>E});var e=t(3144),d=t(9416),s=t(2340),n=t(4782),u=t(681);let E=(()=>{class l{constructor(){this.http=(0,d.f3M)(e.eN),this.transferSrv=(0,d.f3M)(u.Z),this.articleLabelMap=new Map,this.articleLabelByIdMap=new Map}getArticleLabel(r,o=!0){return this.transferSrv.transfer(`labelList-${r}`,()=>{if(o&&this.articleLabelMap.has(r))return this.articleLabelMap.get(r);const c=r?(new e.LE).append("page",r):void 0,m=this.http.get(`${s.N.baseUrl}/articleLabel`,{params:c}).pipe((0,n.d)());return this.articleLabelMap.set(r,m),m},o)}getArticleLabelById(r,o=!0){return this.transferSrv.transfer(`label-${r}`,()=>{if(o&&this.articleLabelByIdMap.has(r))return this.articleLabelByIdMap.get(r);const c=this.http.get(`${s.N.baseUrl}/articleLabel/${r}`).pipe((0,n.d)());return this.articleLabelByIdMap.set(r,c),c},o)}updateArticleLabel(r){return this.http.patch(`${s.N.baseUrl}/articleLabel/${r.labelId}`,r)}createArticleLabel(r){return this.http.post(`${s.N.baseUrl}/articleLabel`,r)}deleteArticleLabel(r){return this.http.delete(`${s.N.baseUrl}/articleLabel/${r}`)}}return l.\u0275fac=function(r){return new(r||l)},l.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},681:(p,b,t)=>{t.d(b,{Z:()=>E});var e=t(9416),d=t(928),s=t(9646),n=t(8505),u=t(4782);let E=(()=>{class l{constructor(){this.transferState=(0,e.f3M)(e.kie),this.deviceSrv=(0,e.f3M)(d.U)}transfer(r,o,h=!0){const c=(0,e.Cb6)(r);if(this.transferState.hasKey(c)&&h){const m=this.transferState.get(c,void 0);return(0,s.of)(m)}return o().pipe((0,n.b)(I=>{this.deviceSrv.isServer&&this.transferState.set(c,I)}),(0,u.d)())}}return l.\u0275fac=function(r){return new(r||l)},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},4782:(p,b,t)=>{t.d(b,{d:()=>s});var e=t(4707),d=t(3099);function s(n,u,E){let l,v=!1;return n&&"object"==typeof n?({bufferSize:l=1/0,windowTime:u=1/0,refCount:v=!1,scheduler:E}=n):l=null!=n?n:1/0,(0,d.B)({connector:()=>new e.t(l,u,E),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:v})}}}]);