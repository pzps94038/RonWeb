"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[174],{5174:(R,g,o)=>{o.r(g),o.d(g,{CategoryComponent:()=>b});var l=o(5855),t=o(2223),c=o(4755),p=o(3262),d=o(7915),h=o(9841),C=o(9300),m=o(262),E=o(8746),u=o(3757),y=o(8028),f=o(9908),M=o(4217),v=o(9415),O=o(4544),P=o(7929),D=o(2958);const I=function(a,s){return{categoryId:a,categoryName:s}};function T(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"app-article-card",6),t.NdJ("category",function(r){t.CHM(e);const _=t.oxw(3);return t.KtG(_.navigateCategory(r))})("label",function(r){t.CHM(e);const _=t.oxw(3);return t.KtG(_.navigateLabel(r))})("showMore",function(){const _=t.CHM(e).$implicit,i=t.oxw(3);return t.KtG(i.showMore(_.articleId))}),t.qZA()}if(2&a){const e=s.$implicit;t.Q6J("title",e.articleTitle)("date",e.createDate)("category",t.WLB(5,I,e.categoryId,e.categoryName))("labels",e.labels)("previewContent",e.previewContent)}}function x(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"div",4)(2,"h3"),t._uU(3),t.qZA()(),t.YNc(4,T,1,8,"app-article-card",5),t.BQk()),2&a){const e=t.oxw(2);t.xp6(3),t.hij("\u4ee5\u4e0b\u662f",e.category(),"\u7684\u641c\u5c0b\u7d50\u679c\uff1a"),t.xp6(1),t.Q6J("ngForOf",e.articles())}}function B(a,s){if(1&a&&(t.ynx(0),t.YNc(1,x,5,2,"ng-container",0),t.BQk()),2&a){const e=t.oxw(),n=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!e.isLoading())("ngIfElse",n)}}function L(a,s){1&a&&t._UZ(0,"app-loading-keyword")(1,"app-loading-card")(2,"app-loading-card")(3,"app-loading-card")}function A(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",7)(1,"app-error",8),t.NdJ("refresh",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.searchCategory(r.categoryId(),r.page()))}),t.qZA()()}}let b=(()=>{class a{constructor(){this.route=(0,t.f3M)(p.gz),this.router=(0,t.f3M)(p.F0),this.searchSrv=(0,t.f3M)(u.o),this.apiSrv=(0,t.f3M)(P.s),this.codeBlockSrv=(0,t.f3M)(D.n),this.category=(0,t.tdS)(""),this.categoryId=(0,t.tdS)(void 0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){(0,h.a)([this.route.paramMap,this.route.queryParamMap]).pipe((0,C.h)(([e])=>!(!e.get("id")||isNaN(parseInt(e.get("id"))))||(this.router.navigate(["blog"]),!1)),(0,l.sL)(this._destroyRef)).subscribe(([e,n])=>{const r=parseInt(e.get("id"));this.categoryId.set(r);const _=n.get("page"),i=_?parseInt(_):1;this.page.set(isNaN(i)?1:i),this.searchCategory(r,this.page())})}searchCategory(e,n){this.isError.set(!1),this.isLoading.set(!0),this.searchSrv.category(e,n).pipe((0,m.K)(r=>{throw this.isError.set(!0),r}),(0,E.x)(()=>this.isLoading.set(!1)),(0,l.sL)(this._destroyRef)).subscribe(r=>{if(this.apiSrv.ifSuccess(r,!1)){const{data:{total:_,articles:i,keyword:K}}=r;this.total.set(_),this.articles.set(i),this.category.set(K),this.codeBlockSrv.highlightAllBlock()}else r.returnCode===v.N.NotFound?this.router.navigate(["blog","notFound"]):this.isError.set(!0)})}showMore(e){this.router.navigateByUrl(`/blog/article/${e}`)}navigateCategory({categoryId:e}){this.router.navigateByUrl(`/blog/category/${e}`)}navigateLabel({labelId:e}){this.router.navigateByUrl(`/blog/label/${e}`)}paginationChange(e){this.router.navigate(["blog","category",this.categoryId()],{queryParams:{page:e}})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-category"]],standalone:!0,features:[t.jDz],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[3,"total","currentPage","change"],[1,"p-5","bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","mb-5"],[3,"title","date","category","labels","previewContent","label","showMore",4,"ngFor","ngForOf"],[3,"title","date","category","labels","previewContent","label","showMore"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,n){if(1&e&&(t.YNc(0,B,2,2,"ng-container",0),t.YNc(1,L,4,0,"ng-template",null,1,t.W1O),t.YNc(3,A,2,0,"ng-template",null,2,t.W1O),t.TgZ(5,"app-pagination",3),t.NdJ("change",function(_){return n.paginationChange(_)}),t.qZA()),2&e){const r=t.MAs(4);t.Q6J("ngIf",!n.isError())("ngIfElse",r),t.xp6(5),t.Q6J("total",n.total())("currentPage",n.page())}},dependencies:[c.ez,c.sg,c.O5,d.Q,f.y,y.q,O.g,M.o]}),a})()}}]);