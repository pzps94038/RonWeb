"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[721],{9721:(M,v,e)=>{e.r(v),e.d(v,{ArticleCategoryEditComponent:()=>P});var t=e(9416),c=e(4755),n=e(5855),s=e(9401),f=e(1415),u=e(8505),o=e(9300),d=e(4004),a=e(3900),E=e(8746),h=e(6274),_=e(9096),y=e(6355),p=e(7929),I=e(4052);function D(g,C){if(1&g){const r=t.EpF();t.ynx(0),t.TgZ(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.submit())}),t.TgZ(2,"div",3),t._UZ(3,"app-input",4),t.qZA(),t.TgZ(4,"div",5)(5,"button",6),t._uU(6," \u4fee\u6539\u5206\u985e "),t.qZA()()(),t.BQk()}if(2&g){const r=t.oxw();t.xp6(1),t.Q6J("formGroup",r.form),t.xp6(4),t.ekj("loading",r.isLoading()),t.Q6J("disabled",r.isLoading())}}function O(g,C){1&g&&(t.TgZ(0,"div",7)(1,"div")(2,"div",8),t._UZ(3,"div",9),t.qZA()()())}let P=(()=>{class g{constructor(){this.apiSrv=(0,t.f3M)(p.s),this.userSrv=(0,t.f3M)(I.K),this.swalSrv=(0,t.f3M)(_.J),this.articleCategorySrv=(0,t.f3M)(h.h),this.route=(0,t.f3M)(f.gz),this.router=(0,t.f3M)(f.F0),this.isLoading=(0,t.tdS)(!1),this.editIsLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this._destroyRef=(0,t.f3M)(t.ktI),this.form=new s.cw({categoryId:new s.NI(void 0,[s.kI.required]),categoryName:new s.NI("",[s.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,u.b)(()=>this.isLoading.set(!0)),(0,o.h)(r=>!!r.get("id")),(0,d.U)(r=>r.get("id")),(0,o.h)(r=>!isNaN(parseInt(r))),(0,d.U)(r=>parseInt(r)),(0,a.w)(r=>this.articleCategorySrv.getArticleCategoryById(r,!1)),(0,o.h)(r=>this.apiSrv.ifSuccess(r)),(0,d.U)(({data:r})=>r),(0,u.b)(({categoryId:r,categoryName:i})=>{var l,m;null===(l=this.form.get("categoryId"))||void 0===l||l.setValue(r),null===(m=this.form.get("categoryName"))||void 0===m||m.setValue(i)}),(0,n.sL)(this._destroyRef)).subscribe(r=>{var i,l;const{categoryId:m,categoryName:A}=r;null===(i=this.form.get("categoryId"))||void 0===i||i.setValue(m),null===(l=this.form.get("categoryName"))||void 0===l||l.setValue(A),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const r={categoryId:this.form.get("categoryId").value,categoryName:this.form.get("categoryName").value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.articleCategorySrv.updateArticleCategory(r).pipe((0,o.h)(i=>this.apiSrv.ifSuccess(i,!0)),(0,a.w)(({returnMessage:i})=>this.swalSrv.alert({icon:_.u.Success,text:i})),(0,E.x)(()=>this.editIsLoading.set(!1)),(0,n.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article-category"])})}}return g.\u0275fac=function(r){return new(r||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-article-category-edit"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u5206\u985e","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u5206\u985e","formControlName","categoryName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(r,i){if(1&r&&(t.YNc(0,D,7,4,"ng-container",0),t.YNc(1,O,4,0,"ng-template",null,1,t.W1O)),2&r){const l=t.MAs(2);t.Q6J("ngIf",!i.isLoading())("ngIfElse",l)}},dependencies:[c.ez,c.O5,y.a,s.UX,s._Y,s.JJ,s.JL,s.sg,s.u]}),g})()},6274:(M,v,e)=>{e.d(v,{h:()=>u});var t=e(3144),c=e(9416),n=e(2340),s=e(4782),f=e(681);let u=(()=>{class o{constructor(){this.http=(0,c.f3M)(t.eN),this.transferSrv=(0,c.f3M)(f.Z),this.articleCategoryMap=new Map,this.articleCategoryByIdMap=new Map}getArticleCategory(a,E=!0){return this.transferSrv.transfer(`categoryList-${a}`,()=>{if(E&&this.articleCategoryMap.has(a))return this.articleCategoryMap.get(a);const _=a?(new t.LE).append("page",a):void 0,y=this.http.get(`${n.N.baseUrl}/articleCategory`,{params:_}).pipe((0,s.d)());return this.articleCategoryMap.set(a,y),y},E)}getArticleCategoryById(a,E=!0){return this.transferSrv.transfer(`category-${a}`,()=>{if(E&&this.articleCategoryByIdMap.has(a))return this.articleCategoryByIdMap.get(a);const _=this.http.get(`${n.N.baseUrl}/articleCategory/${a}`).pipe((0,s.d)());return this.articleCategoryByIdMap.set(a,_),_},E)}updateArticleCategory(a){return this.http.patch(`${n.N.baseUrl}/articleCategory/${a.categoryId}`,a)}createArticleCategory(a){return this.http.post(`${n.N.baseUrl}/articleCategory`,a)}deleteArticleCategory(a){return this.http.delete(`${n.N.baseUrl}/articleCategory/${a}`)}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},681:(M,v,e)=>{e.d(v,{Z:()=>u});var t=e(9416),c=e(928),n=e(9646),s=e(8505),f=e(4782);let u=(()=>{class o{constructor(){this.transferState=(0,t.f3M)(t.kie),this.deviceSrv=(0,t.f3M)(c.U)}transfer(a,E,h=!0){const _=(0,t.Cb6)(a);if(this.transferState.hasKey(_)&&h){const y=this.transferState.get(_,void 0);return(0,n.of)(y)}return E().pipe((0,s.b)(p=>{this.deviceSrv.isServer&&this.transferState.set(_,p)}),(0,f.d)())}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4782:(M,v,e)=>{e.d(v,{d:()=>n});var t=e(4707),c=e(3099);function n(s,f,u){let o,d=!1;return s&&"object"==typeof s?({bufferSize:o=1/0,windowTime:f=1/0,refCount:d=!1,scheduler:u}=s):o=null!=s?s:1/0,(0,c.B)({connector:()=>new t.t(o,f,u),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}}}]);