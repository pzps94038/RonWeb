"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[119],{119:(v,h,n)=>{n.r(h),n.d(h,{ArticleLabelEditComponent:()=>O});var e=n(2223),f=n(4755),i=n(9401),t=n(6355),_=n(5796),c=n(9096),r=n(5855),d=n(8505),l=n(9300),m=n(4004),E=n(3900),s=n(8746),p=n(1514),u=n(7929),a=n(4052);function I(g,b){if(1&g){const o=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const C=e.oxw();return e.KtG(C.submit())}),e.TgZ(2,"div",3),e._UZ(3,"app-input",4),e.qZA(),e.TgZ(4,"div",5)(5,"button",6),e._uU(6," \u4fee\u6539\u6a19\u7c64 "),e.qZA()()(),e.BQk()}if(2&g){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(4),e.ekj("loading",o.isLoading()),e.Q6J("disabled",o.isLoading())}}function L(g,b){1&g&&(e.TgZ(0,"div",7)(1,"div")(2,"div",8),e._UZ(3,"div",9),e.qZA()()())}let O=(()=>{class g{constructor(){this.apiSrv=(0,e.f3M)(u.s),this.userSrv=(0,e.f3M)(a.K),this.swalSrv=(0,e.f3M)(c.J),this.articleLabelSrv=(0,e.f3M)(p.F),this.route=(0,e.f3M)(_.gz),this.router=(0,e.f3M)(_.F0),this.isLoading=(0,e.tdS)(!1),this.editIsLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this._destroyRef=(0,e.f3M)(e.ktI),this.form=new i.cw({labelId:new i.NI(void 0,[i.kI.required]),labelName:new i.NI("",[i.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,d.b)(()=>this.isLoading.set(!0)),(0,l.h)(o=>!!o.get("id")),(0,m.U)(o=>o.get("id")),(0,l.h)(o=>!isNaN(parseInt(o))),(0,m.U)(o=>parseInt(o)),(0,E.w)(o=>this.articleLabelSrv.getArticleLabelById(o,!1)),(0,l.h)(o=>this.apiSrv.ifSuccess(o)),(0,m.U)(({data:o})=>o),(0,d.b)(({labelId:o,labelName:M})=>{this.form.get("labelId")?.setValue(o),this.form.get("labelName")?.setValue(M)}),(0,r.sL)(this._destroyRef)).subscribe(o=>{const{labelId:M,labelName:C}=o;this.form.get("labelId")?.setValue(M),this.form.get("labelName")?.setValue(C),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const o={labelId:this.form.get("labelId").value,labelName:this.form.get("labelName").value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.articleLabelSrv.updateArticleLabel(o).pipe((0,l.h)(M=>this.apiSrv.ifSuccess(M,!0)),(0,E.w)(({returnMessage:M})=>this.swalSrv.alert({icon:c.u.Success,text:M})),(0,s.x)(()=>this.editIsLoading.set(!1)),(0,r.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article-label"])})}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-article-label-edit"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u6a19\u7c64","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u6a19\u7c64","formControlName","labelName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(o,M){if(1&o&&(e.YNc(0,I,7,4,"ng-container",0),e.YNc(1,L,4,0,"ng-template",null,1,e.W1O)),2&o){const C=e.MAs(2);e.Q6J("ngIf",!M.isLoading())("ngIfElse",C)}},dependencies:[f.ez,f.O5,t.a,i.UX,i._Y,i.JJ,i.JL,i.sg,i.u]}),g})()},1514:(v,h,n)=>{n.d(h,{F:()=>c});var e=n(3144),f=n(2223),i=n(2340),t=n(4782),_=n(681);let c=(()=>{class r{constructor(){this.http=(0,f.f3M)(e.eN),this.transferSrv=(0,f.f3M)(_.Z),this.articleLabelMap=new Map,this.articleLabelByIdMap=new Map}getArticleLabel(l,m=!0){return this.transferSrv.transfer(`labelList-${l}`,()=>{if(m&&this.articleLabelMap.has(l))return this.articleLabelMap.get(l);const s=l?(new e.LE).append("page",l):void 0,p=this.http.get(`${i.N.baseUrl}/articleLabel`,{params:s}).pipe((0,t.d)());return this.articleLabelMap.set(l,p),p},m)}getArticleLabelById(l,m=!0){return this.transferSrv.transfer(`label-${l}`,()=>{if(m&&this.articleLabelByIdMap.has(l))return this.articleLabelByIdMap.get(l);const s=this.http.get(`${i.N.baseUrl}/articleLabel/${l}`).pipe((0,t.d)());return this.articleLabelByIdMap.set(l,s),s},m)}updateArticleLabel(l){return this.http.patch(`${i.N.baseUrl}/articleLabel/${l.labelId}`,l)}createArticleLabel(l){return this.http.post(`${i.N.baseUrl}/articleLabel`,l)}deleteArticleLabel(l){return this.http.delete(`${i.N.baseUrl}/articleLabel/${l}`)}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=f.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},5376:(v,h,n)=>{n.d(h,{A:()=>t,x:()=>i});var e=n(2223),f=n(9401);const i=_=>({provide:f.JU,useExisting:(0,e.Gpc)(()=>_),multi:!0});let t=(()=>{class _{constructor(r,d){this.injector=r,this.cdr=d,this.labelClass="",this.class="",this.showErrorMsg=!0,this.val="",this.disabled=!1}ngOnInit(){this.ngControl=this.injector.get(f.a5)}ngAfterViewInit(){this.control=this.ngControl?.control,this.cdr.detectChanges()}writeValue(r){this.val=r}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r}change(){this.onChange&&this.onTouched&&(this.onChange(this.val),this.onTouched())}}return _.\u0275fac=function(r){return new(r||_)(e.Y36(e.zs3),e.Y36(e.sBO))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-basic-input"]],inputs:{labelName:"labelName",labelClass:"labelClass",class:"class",showErrorMsg:"showErrorMsg"},standalone:!0,features:[e.jDz],decls:0,vars:0,template:function(r,d){},encapsulation:2}),_})()},6355:(v,h,n)=>{n.d(h,{a:()=>E});var e=n(9401),f=n(4755),i=n(5376),t=n(2223);const _=function(s,p){return{"text-success":s,"text-error":p}};function c(s,p){if(1&s&&(t.TgZ(0,"label",3),t._uU(1),t.qZA()),2&s){const u=t.oxw();t.Tol(u.labelClass),t.Q6J("for",null==u.ngControl?null:u.ngControl.name)("ngClass",t.WLB(5,_,(null==u.control?null:u.control.touched)&&!(null!=u.control&&u.control.errors),(null==u.control?null:u.control.touched)&&(null==u.control?null:u.control.errors))),t.xp6(1),t.Oqu(u.labelName)}}function r(s,p){1&s&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u6b64\u6b04\u4f4d\u5fc5\u586b"),t.qZA()())}function d(s,p){1&s&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u8acb\u8f38\u5165\u6b63\u78ba\u683c\u5f0f\u7684\u96fb\u5b50\u4fe1\u7bb1"),t.qZA()())}function l(s,p){if(1&s&&(t.ynx(0),t.YNc(1,r,3,0,"p",4),t.YNc(2,d,3,0,"p",4),t.BQk()),2&s){const u=t.oxw();t.xp6(1),t.Q6J("ngIf",null==u.control||null==u.control.errors?null:u.control.errors.required),t.xp6(1),t.Q6J("ngIf",null==u.control||null==u.control.errors?null:u.control.errors.email)}}const m=function(s,p){return{"input-error":s,"input-success":p}};let E=(()=>{class s extends i.A{constructor(){super(...arguments),this.type="text",this.placeholder="",this.size="md",this.inputmode="text"}}return s.\u0275fac=function(){let p;return function(a){return(p||(p=t.n5z(s)))(a||s)}}(),s.\u0275cmp=t.Xpm({type:s,selectors:[["app-input"]],inputs:{type:"type",placeholder:"placeholder",size:"size",inputmode:"inputmode"},standalone:!0,features:[t._Bn([(0,i.x)(s)]),t.qOj,t.jDz],decls:3,vars:22,consts:[["class","block",3,"for","class","ngClass",4,"ngIf"],[1,"input","input-bordered","border-2",3,"type","id","ngModel","ngClass","disabled","inputMode","placeholder","ngModelChange"],[4,"ngIf"],[1,"block",3,"for","ngClass"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"]],template:function(u,a){1&u&&(t.YNc(0,c,2,8,"label",0),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(L){return a.val=L})("ngModelChange",function(){return a.change()}),t.qZA(),t.YNc(2,l,3,2,"ng-container",2)),2&u&&(t.Q6J("ngIf",a.labelName),t.xp6(1),t.Tol(a.class),t.ekj("input-xs","xs"===a.size)("input-sm","sm"===a.size)("input-md","md"===a.size)("input-lg","lg"===a.size),t.Q6J("type",a.type)("id",null==a.ngControl?null:a.ngControl.name)("ngModel",a.val)("ngClass",t.WLB(19,m,(null==a.control?null:a.control.touched)&&(null==a.control?null:a.control.errors),(null==a.control?null:a.control.touched)&&!(null!=a.control&&a.control.errors)))("disabled",a.disabled)("inputMode",a.inputmode)("placeholder",a.placeholder),t.xp6(1),t.Q6J("ngIf",(null==a.control?null:a.control.touched)&&(null==a.control?null:a.control.errors)&&a.showErrorMsg))},dependencies:[f.ez,f.mk,f.O5,e.u5,e.Fj,e.JJ,e.On],styles:["[_nghost-%COMP%]{width:100%}"]}),s})()},7929:(v,h,n)=>{n.d(h,{s:()=>_});var e=n(2223),f=n(5698),i=n(9415),t=n(9096);let _=(()=>{class c{constructor(){this.swalSrv=(0,e.f3M)(t.J)}ifSuccess(d,l=!0){return l?d.returnCode===i.N.Success||(this.swalSrv.alert({text:d.returnMessage}).pipe((0,f.q)(1)).subscribe(),!1):d.returnCode===i.N.Success}}return c.\u0275fac=function(d){return new(d||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},681:(v,h,n)=>{n.d(h,{Z:()=>c});var e=n(2223),f=n(928),i=n(9646),t=n(8505),_=n(4782);let c=(()=>{class r{constructor(){this.transferState=(0,e.f3M)(e.kie),this.deviceSrv=(0,e.f3M)(f.U)}transfer(l,m,E=!0){const s=(0,e.Cb6)(l);if(this.transferState.hasKey(s)&&E){const p=this.transferState.get(s,void 0);return(0,i.of)(p)}return m().pipe((0,t.b)(u=>{this.deviceSrv.isServer&&this.transferState.set(s,u)}),(0,_.d)())}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},4782:(v,h,n)=>{n.d(h,{d:()=>i});var e=n(4707),f=n(3099);function i(t,_,c){let r,d=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:_=1/0,refCount:d=!1,scheduler:c}=t):r=t??1/0,(0,f.B)({connector:()=>new e.t(r,_,c),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}}}]);