"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[420],{420:(O,m,o)=>{o.r(m),o.d(m,{CodeEditComponent:()=>B});var e=o(4438),_=o(177),s=o(9417),C=o(19),c=o(4366),E=o(9478),p=o(9079),v=o(8141),a=o(5964),l=o(6354),f=o(5558),h=o(980),g=o(7343),I=o(2953),D=o(2539);function b(r,i){if(1&r){const d=e.RV6();e.qex(0),e.j41(1,"form",2),e.bIt("ngSubmit",function(){e.eBV(d);const n=e.XpG();return e.Njj(n.submit())}),e.j41(2,"div",3),e.nrm(3,"app-input",4),e.k0s(),e.j41(4,"div",3),e.nrm(5,"app-input",5),e.k0s(),e.j41(6,"div",3),e.nrm(7,"app-input",6),e.k0s(),e.j41(8,"div",3),e.nrm(9,"app-input",7),e.k0s(),e.j41(10,"div",8)(11,"button",9),e.EFF(12," \u4fee\u6539\u4ee3\u78bc "),e.k0s()()(),e.bVm()}if(2&r){const d=e.XpG();e.R7$(),e.Y8G("formGroup",d.form),e.R7$(10),e.AVh("loading",d.isLoading()),e.Y8G("disabled",d.isLoading())}}function M(r,i){1&r&&(e.j41(0,"div",10)(1,"div")(2,"div",11),e.nrm(3,"div",12),e.k0s()()())}let B=(()=>{var r;class i{constructor(){this.apiSrv=(0,e.WQX)(g.G),this.userSrv=(0,e.WQX)(I.D),this.swalSrv=(0,e.WQX)(E.X),this.adminCodeSrv=(0,e.WQX)(D._),this.route=(0,e.WQX)(c.nX),this.router=(0,e.WQX)(c.Ix),this.isLoading=(0,e.vPA)(!1),this.editIsLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this._destroyRef=(0,e.WQX)(e.abz),this.form=new s.gE({id:new s.MJ(void 0,[s.k0.required]),codeTypeId:new s.MJ({value:"",disabled:!0},[s.k0.required]),codeTypeName:new s.MJ({value:"",disabled:!0},[s.k0.required]),codeId:new s.MJ("",[s.k0.required]),codeName:new s.MJ("",[s.k0.required])})}ngOnInit(){this.route.paramMap.pipe((0,v.M)(()=>this.isLoading.set(!0)),(0,a.p)(t=>!!t.get("id")),(0,l.T)(t=>t.get("id")),(0,a.p)(t=>!isNaN(parseInt(t))),(0,l.T)(t=>parseInt(t)),(0,f.n)(t=>this.adminCodeSrv.getAdminCodeById(t)),(0,a.p)(t=>this.apiSrv.ifSuccess(t)),(0,l.T)(({data:t})=>t),(0,p.pQ)(this._destroyRef)).subscribe(t=>{const{id:n,codeId:u,codeName:T,codeTypeId:P,codeTypeName:A}=t;this.form.controls.id.setValue(n),this.form.controls.codeId.setValue(u),this.form.controls.codeName.setValue(T),this.form.controls.codeTypeId.setValue(P),this.form.controls.codeTypeName.setValue(A),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const t={codeTypeId:this.form.controls.codeTypeId.value,codeId:this.form.controls.codeId.value,codeName:this.form.controls.codeName.value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.adminCodeSrv.updateAdminCode(this.form.controls.id.value,t).pipe((0,a.p)(n=>this.apiSrv.ifSuccess(n,!0)),(0,f.n)(({returnMessage:n})=>this.swalSrv.alert({icon:E.J.Success,text:n})),(0,h.j)(()=>this.editIsLoading.set(!1)),(0,p.pQ)(this._destroyRef)).subscribe(()=>this.router.navigate(["/setting/code-type/".concat(this.form.controls.codeTypeId.value)]))}}return(r=i).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.VBU({type:r,selectors:[["app-code-edit"]],standalone:!0,features:[e.aNF],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"ngSubmit","formGroup"],[1,"my-5"],["labelName","\u4ee3\u78bc\u985e\u578bID","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u985e\u578bID","formControlName","codeTypeId",1,"w-full"],["labelName","\u4ee3\u78bc\u985e\u578b\u540d\u7a31","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u985e\u578b\u540d\u7a31","formControlName","codeTypeName",1,"w-full"],["labelName","\u4ee3\u78bcID","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bcID","formControlName","codeId",1,"w-full"],["labelName","\u4ee3\u78bc\u540d\u7a31","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u540d\u7a31","formControlName","codeName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(t,n){if(1&t&&e.DNE(0,b,13,4,"ng-container",1)(1,M,4,0,"ng-template",null,0,e.C5r),2&t){const u=e.sdS(2);e.Y8G("ngIf",!n.isLoading())("ngIfElse",u)}},dependencies:[_.MD,_.bT,C.S,s.X1,s.qT,s.BC,s.cb,s.j4,s.JD]}),i})()}}]);