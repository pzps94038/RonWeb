"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[547],{9003:(I,d,r)=>{r.r(d),r.d(d,{CodeTypeDetailComponent:()=>U});var e=r(9416),s=r(4755),p=r(5855),c=r(1415),h=r(8746),l=r(9300),g=r(3900),u=r(9096),T=r(2993),f=r(5249),m=r(8028),C=r(7915),E=r(3665),y=r(7929),D=r(358);const Z=function(n){return["/setting","code-type","edit",n]};function x(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th",10)(2,"a",11),e._UZ(3,"ng-icon",12),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){const _=e.CHM(t).$implicit,B=e.oxw(3);return e.KtG(B.deleteCodeType(_.id))}),e._UZ(5,"ng-icon",14),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"dayJs"),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(7,Z,t.id)),e.xp6(5),e.Oqu(t.codeTypeId),e.xp6(2),e.Oqu(t.codeTypeName),e.xp6(2),e.Oqu(e.xi3(12,4,t.createDate,"YYYY/MM/DD"))}}function A(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"button",4),e._uU(3,"\u65b0\u589e\u4ee3\u78bc\u985e\u578b"),e.qZA()(),e.TgZ(4,"div",5)(5,"table",6)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th",7),e._uU(10,"\u4ee3\u78bc\u985e\u578bID"),e.qZA(),e.TgZ(11,"th",7),e._uU(12,"\u4ee3\u78bc\u985e\u578b"),e.qZA(),e.TgZ(13,"th",7),e._uU(14,"\u5efa\u7acb\u65e5\u671f"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,x,13,9,"tr",8),e.qZA()()(),e.TgZ(17,"app-pagination",9),e.NdJ("change",function(a){e.CHM(t);const _=e.oxw(2);return e.KtG(_.paginationChange(a))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(16),e.Q6J("ngForOf",t.codeTypes()),e.xp6(1),e.Q6J("total",t.total())("currentPage",t.page())}}function M(n,i){if(1&n&&(e.ynx(0),e.YNc(1,A,18,3,"ng-container",0),e.BQk()),2&n){const t=e.oxw(),o=e.MAs(2);e.xp6(1),e.Q6J("ngIf",!t.isLoading())("ngIfElse",o)}}function v(n,i){1&n&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"div",15),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"div",15),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"div",15),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"div",15),e.qZA()())}const O=function(){return[1,2,3,4,5]};function P(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"table",6)(2,"tbody")(3,"tr"),e._UZ(4,"td"),e.TgZ(5,"th",7),e._uU(6,"\u4ee3\u78bc\u985e\u578bID"),e.qZA(),e.TgZ(7,"th",7),e._uU(8,"\u4ee3\u78bc\u985e\u578b"),e.qZA(),e.TgZ(9,"th",7),e._uU(10,"\u5efa\u7acb\u65e5\u671f"),e.qZA()(),e.YNc(11,v,9,0,"tr",8),e.qZA()()(),e.TgZ(12,"app-pagination",9),e.NdJ("change",function(a){e.CHM(t);const _=e.oxw();return e.KtG(_.paginationChange(a))}),e.qZA()}if(2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",e.DdM(3,O)),e.xp6(1),e.Q6J("total",t.total())("currentPage",t.page())}}function b(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"app-error",17),e.NdJ("refresh",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.refreshCodeType())}),e.qZA()()}}let U=(()=>{class n{constructor(){this.adminCodeTypeSrv=(0,e.f3M)(D.B),this.apiSrv=(0,e.f3M)(y.s),this.swalSrv=(0,e.f3M)(u.J),this.route=(0,e.f3M)(c.gz),this.router=(0,e.f3M)(c.F0),this.total=(0,e.tdS)(0),this.codeTypes=(0,e.tdS)([]),this.isLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this.page=(0,e.tdS)(1),this._destroyRef=(0,e.f3M)(e.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,p.sL)(this._destroyRef)).subscribe(t=>{const o=t.get("page"),a=o?parseInt(o):1;this.page.set(isNaN(a)?1:a),this.getAdminCodeType(this.page())})}getAdminCodeType(t){this.isError.set(!1),this.isLoading.set(!0),this.adminCodeTypeSrv.getAdminCodeType(t).pipe((0,h.x)(()=>this.isLoading.set(!1)),(0,p.sL)(this._destroyRef)).subscribe({next:o=>{if(this.apiSrv.ifSuccess(o,!1)){const{data:{total:a,codeTypes:_}}=o;this.total.set(a),this.codeTypes.set(_)}else this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}paginationChange(t){this.router.navigate(["/setting/code-type/detail"],{queryParams:{page:t}})}deleteCodeType(t){this.swalSrv.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u4ee3\u78bc\u985e\u578b\u55ce?",text:"\u9019\u500b\u64cd\u4f5c\u5c07\u6c38\u4e45\u522a\u9664\u8a72\u4ee3\u78bc\u985e\u578b\u53ca\u76f8\u95dc\u7684\u4ee3\u78bc\u3002\u8acb\u78ba\u8a8d\u60a8\u7684\u6c7a\u5b9a\uff0c\u56e0\u70ba\u9019\u4e9b\u5167\u5bb9\u5c07\u7121\u6cd5\u6062\u5fa9\u3002"}).pipe((0,l.h)(({isConfirmed:o})=>o),(0,g.w)(()=>this.adminCodeTypeSrv.deleteAdminCodeType(t)),(0,l.h)(o=>this.apiSrv.ifSuccess(o)),(0,g.w)(o=>this.swalSrv.alert({icon:u.u.Success,text:o.returnMessage})),(0,p.sL)(this._destroyRef)).subscribe(()=>{this.page.set(1),this.getAdminCodeType(this.page())})}refreshCodeType(){this.page.set(1),this.getAdminCodeType(this.page())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-code-type-detail"]],standalone:!0,features:[e._Bn([(0,T.kp)({heroPencilSquare:f.yUl,heroTrash:f.ciC})]),e.jDz],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"mb-5","flex","justify-end"],["routerLink","/setting/code-type/create",1,"btn","btn-primary"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"total","currentPage","change"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(t,o){if(1&t&&(e.YNc(0,M,2,2,"ng-container",0),e.YNc(1,P,13,4,"ng-template",null,1,e.W1O),e.YNc(3,b,2,0,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(4);e.Q6J("ngIf",!o.isError())("ngIfElse",a)}},dependencies:[s.ez,s.sg,s.O5,C.Q,T.Fv,c.rH,E.g,m.q]}),n})()}}]);