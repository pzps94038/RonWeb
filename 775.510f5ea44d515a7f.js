"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[775],{4775:(A,_,s)=>{s.r(_),s.d(_,{ArticleComponent:()=>O});var t=s(3020),d=s(4755),v=s(2993),c=s(5249),n=s(508),o=s(9148),u=s(262),P=s(8746),l=s(9300),h=s(3900),g=s(8884),D=s(3500),E=s(9096);let O=(()=>{class i{constructor(){this.articleSrv=(0,t.f3M)(g.n),this.sharedSrv=(0,t.f3M)(D.F),this.swalSrv=(0,t.f3M)(E.J),this.route=(0,t.f3M)(o.gz),this.router=(0,t.f3M)(o.F0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,n.sL)(this._destroyRef)).subscribe(r=>{const e=r.get("page"),a=e?parseInt(e):1;this.page.set(isNaN(a)?1:a),this.getArticle(this.page())})}getArticle(r){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(r).pipe((0,u.K)(e=>{throw this.isError.set(!0),e}),(0,P.x)(()=>this.isLoading.set(!1)),(0,n.sL)(this._destroyRef)).subscribe(e=>{if(this.sharedSrv.ifSuccess(e)){const{data:{total:a,articles:f}}=e;this.total.set(a),this.articles.set(f)}else this.isError.set(!0)})}paginationChange(r){this.router.navigate(["/setting/article"],{queryParams:{page:r}})}deleteArticle(r){this.swalSrv.confirm({text:"\u78ba\u5b9a\u8981\u522a\u9664\u6587\u7ae0\u55ce?"}).pipe((0,l.h)(({isConfirmed:e})=>e),(0,h.w)(()=>this.articleSrv.deleteArticle(r)),(0,l.h)(e=>this.sharedSrv.ifSuccess(e,!0)),(0,h.w)(e=>this.swalSrv.alert({icon:E.u.Success,text:e.returnMessage})),(0,n.sL)(this._destroyRef)).subscribe(()=>this.getArticle())}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-article"]],standalone:!0,features:[t._Bn([(0,v.kp)({heroPencilSquare:c.yUl,heroTrash:c.ciC})]),t.jDz],decls:2,vars:0,consts:[[1,"container","mx-auto","my-5"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[d.ez,o.lC]}),i})()}}]);