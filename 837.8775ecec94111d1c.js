"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[837],{9837:(M,h,e)=>{e.r(h),e.d(h,{ArticleLabelDetailComponent:()=>y});var t=e(2223),c=e(4755),_=e(5855),i=e(3262),d=e(262),b=e(8746),l=e(9300),u=e(3900),a=e(9096),p=e(2993),E=e(5249),f=e(8028),A=e(7915),v=e(3665),m=e(1514),D=e(7929);const C=function(n){return["/setting","article-label","edit",n]};function O(n,g){if(1&n){const r=t.EpF();t.TgZ(0,"tr")(1,"th",10)(2,"a",11),t._UZ(3,"ng-icon",12),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){const L=t.CHM(r).$implicit,R=t.oxw(3);return t.KtG(R.deleteArticleLabel(L.labelId))}),t._UZ(5,"ng-icon",14),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"dayJs"),t.qZA()()}if(2&n){const r=g.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(6,C,r.labelId)),t.xp6(5),t.Oqu(r.labelName),t.xp6(2),t.Oqu(t.xi3(10,3,r.createDate,"YYYY/MM/DD"))}}function P(n,g){if(1&n){const r=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"button",4),t._uU(3,"\u65b0\u589e\u6a19\u7c64"),t.qZA()(),t.TgZ(4,"div",5)(5,"table",6)(6,"thead")(7,"tr"),t._UZ(8,"th"),t.TgZ(9,"th",7),t._uU(10,"\u6a19\u7c64"),t.qZA(),t.TgZ(11,"th",7),t._uU(12,"\u5efa\u7acb\u65e5\u671f"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,O,11,8,"tr",8),t.qZA()()(),t.TgZ(15,"app-pagination",9),t.NdJ("change",function(o){t.CHM(r);const L=t.oxw(2);return t.KtG(L.paginationChange(o))}),t.qZA(),t.BQk()}if(2&n){const r=t.oxw(2);t.xp6(14),t.Q6J("ngForOf",r.labels()),t.xp6(1),t.Q6J("total",r.total())("currentPage",r.page())}}function T(n,g){if(1&n&&(t.ynx(0),t.YNc(1,P,16,3,"ng-container",0),t.BQk()),2&n){const r=t.oxw(),s=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!r.isLoading())("ngIfElse",s)}}function x(n,g){1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",15),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"div",15),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"div",15),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"div",15),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"div",15),t.qZA()())}const U=function(){return[1,2,3,4,5]};function Z(n,g){if(1&n){const r=t.EpF();t.TgZ(0,"div",5)(1,"table",6)(2,"tbody")(3,"tr"),t._UZ(4,"td"),t.TgZ(5,"td",7),t._uU(6,"\u6a19\u7c64"),t.qZA(),t.TgZ(7,"td",7),t._uU(8,"\u5efa\u7acb\u65e5\u671f"),t.qZA()(),t.YNc(9,x,11,0,"tr",8),t.qZA()()(),t.TgZ(10,"app-pagination",9),t.NdJ("change",function(o){t.CHM(r);const L=t.oxw();return t.KtG(L.paginationChange(o))}),t.qZA()}if(2&n){const r=t.oxw();t.xp6(9),t.Q6J("ngForOf",t.DdM(3,U)),t.xp6(1),t.Q6J("total",r.total())("currentPage",r.page())}}function I(n,g){if(1&n){const r=t.EpF();t.TgZ(0,"div",16)(1,"app-error",17),t.NdJ("refresh",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.refreshArticleLabel())}),t.qZA()()}}let y=(()=>{class n{constructor(){this.articleLabelSrv=(0,t.f3M)(m.F),this.apiSrv=(0,t.f3M)(D.s),this.swalSrv=(0,t.f3M)(a.J),this.route=(0,t.f3M)(i.gz),this.router=(0,t.f3M)(i.F0),this.total=(0,t.tdS)(0),this.labels=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,_.sL)(this._destroyRef)).subscribe(r=>{const s=r.get("page"),o=s?parseInt(s):1;this.page.set(isNaN(o)?1:o),this.getArticleLabel(this.page())})}getArticleLabel(r){this.isError.set(!1),this.isLoading.set(!0),this.articleLabelSrv.getArticleLabel(r,!1).pipe((0,d.K)(s=>{throw this.isError.set(!0),s}),(0,b.x)(()=>this.isLoading.set(!1)),(0,_.sL)(this._destroyRef)).subscribe(s=>{if(this.apiSrv.ifSuccess(s,!1)){const{data:{total:o,labels:L}}=s;this.total.set(o),this.labels.set(L)}else this.isError.set(!0)})}paginationChange(r){this.router.navigate(["/setting/article-label"],{queryParams:{page:r}})}deleteArticleLabel(r){this.swalSrv.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6a19\u7c64\u55ce?",text:"\u9019\u500b\u64cd\u4f5c\u5c07\u6c38\u4e45\u522a\u9664\u8a72\u6a19\u7c64\u53ca\u76f8\u95dc\u7684\u6240\u6709\u6587\u7ae0\u7684\u5c0d\u61c9\u95dc\u4fc2\u3002\u8acb\u78ba\u8a8d\u60a8\u7684\u6c7a\u5b9a\uff0c\u56e0\u70ba\u9019\u4e9b\u5167\u5bb9\u5c07\u7121\u6cd5\u6062\u5fa9\u3002"}).pipe((0,l.h)(({isConfirmed:s})=>s),(0,u.w)(()=>this.articleLabelSrv.deleteArticleLabel(r)),(0,l.h)(s=>this.apiSrv.ifSuccess(s)),(0,u.w)(s=>this.swalSrv.alert({icon:a.u.Success,text:s.returnMessage})),(0,_.sL)(this._destroyRef)).subscribe(()=>{this.page.set(1),this.getArticleLabel(this.page())})}refreshArticleLabel(){this.page.set(1),this.getArticleLabel(this.page())}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article-label-detail"]],standalone:!0,features:[t._Bn([(0,p.kp)({heroPencilSquare:E.yUl,heroTrash:E.ciC})]),t.jDz],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"mb-5","flex","justify-end"],["routerLink","/setting/article-label/create",1,"btn","btn-primary"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"total","currentPage","change"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(r,s){if(1&r&&(t.YNc(0,T,2,2,"ng-container",0),t.YNc(1,Z,11,4,"ng-template",null,1,t.W1O),t.YNc(3,I,2,0,"ng-template",null,2,t.W1O)),2&r){const o=t.MAs(4);t.Q6J("ngIf",!s.isError())("ngIfElse",o)}},dependencies:[c.ez,c.sg,c.O5,A.Q,p.Fv,i.rH,v.g,f.q]}),n})()},1514:(M,h,e)=>{e.d(h,{F:()=>b});var t=e(3144),c=e(2223),_=e(2340),i=e(4782),d=e(681);let b=(()=>{class l{constructor(){this.http=(0,c.f3M)(t.eN),this.transferSrv=(0,c.f3M)(d.Z),this.articleLabelMap=new Map,this.articleLabelByIdMap=new Map}getArticleLabel(a,p=!0){return this.transferSrv.transfer(`labelList-${a}`,()=>{if(p&&this.articleLabelMap.has(a))return this.articleLabelMap.get(a);const f=a?(new t.LE).append("page",a):void 0,A=this.http.get(`${_.N.baseUrl}/articleLabel`,{params:f}).pipe((0,i.d)());return this.articleLabelMap.set(a,A),A},p)}getArticleLabelById(a,p=!0){return this.transferSrv.transfer(`label-${a}`,()=>{if(p&&this.articleLabelByIdMap.has(a))return this.articleLabelByIdMap.get(a);const f=this.http.get(`${_.N.baseUrl}/articleLabel/${a}`).pipe((0,i.d)());return this.articleLabelByIdMap.set(a,f),f},p)}updateArticleLabel(a){return this.http.patch(`${_.N.baseUrl}/articleLabel/${a.labelId}`,a)}createArticleLabel(a){return this.http.post(`${_.N.baseUrl}/articleLabel`,a)}deleteArticleLabel(a){return this.http.delete(`${_.N.baseUrl}/articleLabel/${a}`)}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},681:(M,h,e)=>{e.d(h,{Z:()=>b});var t=e(2223),c=e(928),_=e(9646),i=e(8505),d=e(4782);let b=(()=>{class l{constructor(){this.transferState=(0,t.f3M)(t.kie),this.deviceSrv=(0,t.f3M)(c.U)}transfer(a,p,E=!0){const f=(0,t.Cb6)(a);if(this.transferState.hasKey(f)&&E){const A=this.transferState.get(f,void 0);return(0,_.of)(A)}return p().pipe((0,i.b)(v=>{this.deviceSrv.isServer&&this.transferState.set(f,v)}),(0,d.d)())}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},4782:(M,h,e)=>{e.d(h,{d:()=>_});var t=e(4707),c=e(3099);function _(i,d,b){let l,u=!1;return i&&"object"==typeof i?({bufferSize:l=1/0,windowTime:d=1/0,refCount:u=!1,scheduler:b}=i):l=i??1/0,(0,c.B)({connector:()=>new t.t(l,d,b),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}}}]);