"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[174],{5174:(R,g,a)=>{a.r(g),a.d(g,{CategoryComponent:()=>L});var p=a(508),t=a(3020),c=a(4755),l=a(9302),d=a(3556),h=a(9841),C=a(9300),m=a(262),u=a(8746),E=a(3757),y=a(3500),f=a(3772),M=a(6453),v=a(279),O=a(9415);const P=function(r,_){return{categoryId:r,categoryName:_}};function D(r,_){if(1&r){const e=t.EpF();t.TgZ(0,"app-article-card",6),t.NdJ("category",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.navigateCategory(o))})("showMore",function(){const s=t.CHM(e).$implicit,i=t.oxw(3);return t.KtG(i.showMore(s.articleId))}),t.qZA()}if(2&r){const e=_.$implicit;t.Q6J("title",e.articleTitle)("date",e.createDate)("category",t.WLB(4,P,e.categoryId,e.categoryName))("previewContent",e.previewContent)}}function I(r,_){if(1&r&&(t.ynx(0),t.YNc(1,D,1,7,"app-article-card",5),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.articles())}}function T(r,_){if(1&r&&(t.ynx(0),t.YNc(1,I,2,1,"ng-container",1),t.BQk()),2&r){const e=t.oxw(),n=t.MAs(5);t.xp6(1),t.Q6J("ngIf",!e.isLoading())("ngIfElse",n)}}function x(r,_){1&r&&t._UZ(0,"app-loading-card")(1,"app-loading-card")(2,"app-loading-card")}function B(r,_){if(1&r){const e=t.EpF();t.TgZ(0,"div",7)(1,"app-error",8),t.NdJ("refresh",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.searchCategory(o.categoryId(),o.page()))}),t.qZA()()}}let L=(()=>{class r{constructor(){this.route=(0,t.f3M)(l.gz),this.router=(0,t.f3M)(l.F0),this.searchSrv=(0,t.f3M)(E.o),this.sharedSrv=(0,t.f3M)(y.F),this.category=(0,t.tdS)(""),this.categoryId=(0,t.tdS)(""),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){(0,h.a)([this.route.paramMap,this.route.queryParamMap]).pipe((0,C.h)(([e])=>!!e.get("id")||(this.router.navigate(["blog"]),!1)),(0,p.sL)(this._destroyRef)).subscribe(([e,n])=>{const o=e.get("id");this.categoryId.set(o);const s=n.get("page"),i=s?parseInt(s):1;this.page.set(isNaN(i)?1:i),this.searchCategory(this.categoryId(),this.page())})}searchCategory(e,n){this.isError.set(!1),this.isLoading.set(!0),this.searchSrv.category(e,n).pipe((0,m.K)(o=>{throw this.isError.set(!0),o}),(0,u.x)(()=>this.isLoading.set(!1)),(0,p.sL)(this._destroyRef)).subscribe(o=>{if(this.sharedSrv.ifSuccess(o)){const{data:{total:s,articles:i,keyword:A}}=o;this.total.set(s),this.articles.set(i),this.category.set(A)}else o.returnCode===O.N.NotFound?this.router.navigate(["blog","notFound"]):this.isError.set(!0)})}showMore(e){this.router.navigateByUrl(`/blog/article/${e}`)}navigateCategory({categoryId:e}){this.router.navigateByUrl(`/blog/category/${e}`)}paginationChange(e){this.router.navigate(["blog","category",this.categoryId()],{queryParams:{page:e}})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-category"]],standalone:!0,features:[t.jDz],decls:9,vars:5,consts:[[1,"p-5","bg-slate-800","rounded-md","mx-0","md:mx-5","mb-5"],[4,"ngIf","ngIfElse"],["loading",""],["error",""],[3,"total","currentPage","change"],[3,"title","date","category","previewContent","showMore",4,"ngFor","ngForOf"],[3,"title","date","category","previewContent","showMore"],[1,"bg-slate-800","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.qZA()(),t.YNc(3,T,2,2,"ng-container",1),t.YNc(4,x,3,0,"ng-template",null,2,t.W1O),t.YNc(6,B,2,0,"ng-template",null,3,t.W1O),t.TgZ(8,"app-pagination",4),t.NdJ("change",function(s){return n.paginationChange(s)}),t.qZA()),2&e){const o=t.MAs(7);t.xp6(2),t.hij("\u5206\u985e",n.category(),"\u7684\u641c\u5c0b\u7d50\u679c\u5982\u4e0b:"),t.xp6(1),t.Q6J("ngIf",!n.isError())("ngIfElse",o),t.xp6(5),t.Q6J("total",n.total())("currentPage",n.page())}},dependencies:[c.ez,c.sg,c.O5,d.Q,M.y,f.q,v.o]}),r})()}}]);