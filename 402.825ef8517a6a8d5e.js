"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[402],{6402:(C,f,r)=>{r.r(f),r.d(f,{HomeComponent:()=>T});var c=r(5855),t=r(2223),l=r(4755),_=r(6935),E=r(7915),m=r(8884),o=r(262),M=r(8746),n=r(5796),d=r(8028),p=r(4217),u=r(7929);const v=function(a,g){return{categoryId:a,categoryName:g}};function P(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"app-article-card",5),t.NdJ("category",function(s){t.CHM(e);const h=t.oxw(3);return t.KtG(h.navigateCategory(s))})("label",function(s){t.CHM(e);const h=t.oxw(3);return t.KtG(h.navigateLabel(s))})("showMore",function(){const h=t.CHM(e).$implicit,O=t.oxw(3);return t.KtG(O.showMore(h.articleId))}),t.qZA()}if(2&a){const e=g.$implicit;t.Q6J("title",e.articleTitle)("date",e.createDate)("category",t.WLB(5,v,e.categoryId,e.categoryName))("labels",e.labels)("previewContent",e.previewContent)}}function D(a,g){if(1&a&&(t.ynx(0),t.YNc(1,P,1,8,"app-article-card",4),t.BQk()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.articles())}}function I(a,g){if(1&a&&(t.ynx(0),t.YNc(1,D,2,1,"ng-container",0),t.BQk()),2&a){const e=t.oxw(),i=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!e.isLoading())("ngIfElse",i)}}function A(a,g){1&a&&t._UZ(0,"app-loading-card")(1,"app-loading-card")(2,"app-loading-card")}function y(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"div",6)(1,"app-error",7),t.NdJ("refresh",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.getArticle(s.page(),!1))}),t.qZA()()}}let T=(()=>{class a{constructor(){this.articleSrv=(0,t.f3M)(m.n),this.apiSrv=(0,t.f3M)(u.s),this.route=(0,t.f3M)(n.gz),this.router=(0,t.f3M)(n.F0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,c.sL)(this._destroyRef)).subscribe(e=>{const i=e.get("page"),s=i?parseInt(i):1;this.page.set(isNaN(s)?1:s),this.getArticle(this.page())})}getArticle(e,i=!0){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(e,i).pipe((0,o.K)(s=>{throw this.isError.set(!0),s}),(0,M.x)(()=>this.isLoading.set(!1)),(0,c.sL)(this._destroyRef)).subscribe(s=>{if(this.apiSrv.ifSuccess(s,!1)){const{data:{total:h,articles:O}}=s;this.total.set(h),this.articles.set(O)}else this.isError.set(!0)})}showMore(e){this.router.navigateByUrl(`/blog/article/${e}`)}navigateCategory({categoryId:e}){this.router.navigateByUrl(`/blog/category/${e}`)}navigateLabel({labelId:e}){this.router.navigateByUrl(`/blog/label/${e}`)}paginationChange(e){this.router.navigate(["/blog/home"],{queryParams:{page:e}})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-home"]],standalone:!0,features:[t.jDz],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[3,"total","currentPage","change"],[3,"title","date","category","labels","previewContent","label","showMore",4,"ngFor","ngForOf"],[3,"title","date","category","labels","previewContent","label","showMore"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,i){if(1&e&&(t.YNc(0,I,2,2,"ng-container",0),t.YNc(1,A,3,0,"ng-template",null,1,t.W1O),t.YNc(3,y,2,0,"ng-template",null,2,t.W1O),t.TgZ(5,"app-pagination",3),t.NdJ("change",function(h){return i.paginationChange(h)}),t.qZA()),2&e){const s=t.MAs(4);t.Q6J("ngIf",!i.isError())("ngIfElse",s),t.xp6(5),t.Q6J("total",i.total())("currentPage",i.page())}},dependencies:[l.ez,l.sg,l.O5,_.y,E.Q,d.q,p.o]}),a})()},8884:(C,f,r)=>{r.d(f,{n:()=>m});var c=r(4782),t=r(3144),l=r(2223),_=r(2340),E=r(681);let m=(()=>{class o{constructor(){this.http=(0,l.f3M)(t.eN),this.transferSrv=(0,l.f3M)(E.Z),this.articleMap=new Map,this.articleByIdMap=new Map}getArticle(n,d=!0){const p=()=>{if(!d||!this.articleMap.has(n)){const u=n?(new t.LE).append("page",n):void 0,v=this.http.get(`${_.N.baseUrl}/article`,{params:u}).pipe((0,c.d)());this.articleMap.set(n,v)}return this.articleMap.get(n)};return d?this.transferSrv.transfer(`articleList-${n}`,p):p()}getArticleById(n,d=!0){const p=()=>{if(!d||!this.articleByIdMap.has(n)){const u=this.http.get(`${_.N.baseUrl}/article/${n}`).pipe((0,c.d)());this.articleByIdMap.set(n,u)}return this.articleByIdMap.get(n)};return d?this.transferSrv.transfer(`article-${n}`,p):p()}createArticle(n){return this.http.post(`${_.N.baseUrl}/article`,n)}updateArticle(n){return this.http.patch(`${_.N.baseUrl}/article/${n.articleId}`,n)}deleteArticle(n){return this.http.delete(`${_.N.baseUrl}/article/${n}`)}updateArticleViews(n){return this.http.patch(`${_.N.baseUrl}/article/updateArticleViews/${n}`,{})}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},681:(C,f,r)=>{r.d(f,{Z:()=>m});var c=r(2223),t=r(928),l=r(9646),_=r(8505),E=r(4782);let m=(()=>{class o{constructor(){this.transferState=(0,c.f3M)(c.kie),this.deviceSrv=(0,c.f3M)(t.U)}transfer(n,d){const p=(0,c.Cb6)(n);if(this.transferState.hasKey(p)){const u=this.transferState.get(p,void 0);return(0,l.of)(u)}return d().pipe((0,_.b)(v=>{this.deviceSrv.isServer&&this.transferState.set(p,v)}),(0,E.d)())}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4782:(C,f,r)=>{r.d(f,{d:()=>l});var c=r(4707),t=r(3099);function l(_,E,m){let o,M=!1;return _&&"object"==typeof _?({bufferSize:o=1/0,windowTime:E=1/0,refCount:M=!1,scheduler:m}=_):o=_??1/0,(0,t.B)({connector:()=>new c.t(o,E,m),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:M})}}}]);