"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[432],{7432:(P,u,s)=>{s.r(u),s.d(u,{CodeTypeEditComponent:()=>M});var e=s(4438),p=s(177),o=s(9417),C=s(19),m=s(4366),E=s(9478),c=s(9079),v=s(8141),a=s(5964),_=s(6354),f=s(5558),T=s(980),h=s(7343),g=s(2953),y=s(1547);function D(n,d){if(1&n){const i=e.RV6();e.qex(0),e.j41(1,"form",2),e.bIt("ngSubmit",function(){e.eBV(i);const r=e.XpG();return e.Njj(r.submit())}),e.j41(2,"div",3),e.nrm(3,"app-input",4),e.k0s(),e.j41(4,"div",3),e.nrm(5,"app-input",5),e.k0s(),e.j41(6,"div",6)(7,"button",7),e.EFF(8," \u4fee\u6539\u4ee3\u78bc\u985e\u578b "),e.k0s()()(),e.bVm()}if(2&n){const i=e.XpG();e.R7$(),e.Y8G("formGroup",i.form),e.R7$(6),e.AVh("loading",i.isLoading()),e.Y8G("disabled",i.isLoading())}}function I(n,d){1&n&&(e.j41(0,"div",8)(1,"div")(2,"div",9),e.nrm(3,"div",10),e.k0s()()())}let M=(()=>{var n;class d{constructor(){this.apiSrv=(0,e.WQX)(h.G),this.userSrv=(0,e.WQX)(g.D),this.swalSrv=(0,e.WQX)(E.X),this.adminCodeTypeSrv=(0,e.WQX)(y.K),this.route=(0,e.WQX)(m.nX),this.router=(0,e.WQX)(m.Ix),this.isLoading=(0,e.vPA)(!1),this.editIsLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this._destroyRef=(0,e.WQX)(e.abz),this.form=new o.gE({id:new o.MJ(void 0,[o.k0.required]),codeTypeId:new o.MJ("",[o.k0.required]),codeTypeName:new o.MJ("",[o.k0.required])})}ngOnInit(){this.route.paramMap.pipe((0,v.M)(()=>this.isLoading.set(!0)),(0,a.p)(t=>!!t.get("id")),(0,_.T)(t=>t.get("id")),(0,a.p)(t=>!isNaN(parseInt(t))),(0,_.T)(t=>parseInt(t)),(0,f.n)(t=>this.adminCodeTypeSrv.getAdminCodeTypeById(t)),(0,a.p)(t=>this.apiSrv.ifSuccess(t)),(0,_.T)(({data:t})=>t),(0,c.pQ)(this._destroyRef)).subscribe(t=>{const{id:r,codeTypeId:l,codeTypeName:b}=t;this.form.controls.id.setValue(r),this.form.controls.codeTypeId.setValue(l),this.form.controls.codeTypeName.setValue(b),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const t={codeTypeId:this.form.controls.codeTypeId.value,codeTypeName:this.form.controls.codeTypeName.value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.adminCodeTypeSrv.updateAdminCodeType(this.form.controls.id.value,t).pipe((0,a.p)(r=>this.apiSrv.ifSuccess(r,!0)),(0,f.n)(({returnMessage:r})=>this.swalSrv.alert({icon:E.J.Success,text:r})),(0,T.j)(()=>this.editIsLoading.set(!1)),(0,c.pQ)(this._destroyRef)).subscribe(()=>this.router.navigate(["/setting/code-type"]))}}return(n=d).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-code-type-edit"]],standalone:!0,features:[e.aNF],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"ngSubmit","formGroup"],[1,"my-5"],["labelName","\u4ee3\u78bc\u985e\u578bID","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u985e\u578bID","formControlName","codeTypeId",1,"w-full"],["labelName","\u4ee3\u78bc\u985e\u578b\u540d\u7a31","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u985e\u578b\u540d\u7a31","formControlName","codeTypeName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(t,r){if(1&t&&e.DNE(0,D,9,4,"ng-container",1)(1,I,4,0,"ng-template",null,0,e.C5r),2&t){const l=e.sdS(2);e.Y8G("ngIf",!r.isLoading())("ngIfElse",l)}},dependencies:[p.MD,p.bT,C.S,o.X1,o.qT,o.BC,o.cb,o.j4,o.JD]}),d})()}}]);