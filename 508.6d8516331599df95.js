"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[508],{3508:(F,l,o)=>{o.r(l),o.d(l,{ProjectExperienceDetailComponent:()=>B});var c=o(177),e=o(4438),_=o(9079),f=o(9417),p=o(4366),E=o(4702),g=o(4453),h=o(980),m=o(5964),u=o(5558),d=o(7653),x=o(9584),P=o(4014),D=o(2183),v=o(7343),j=o(9478);const C=t=>["/setting","project-experience","edit",t],b=()=>[1,2,3,4,5];function M(t,s){if(1&t){const n=e.RV6();e.j41(0,"tr")(1,"th",10)(2,"a",11),e.nrm(3,"ng-icon",12),e.k0s(),e.j41(4,"button",13),e.bIt("click",function(){const r=e.eBV(n).$implicit,a=e.XpG(3);return e.Njj(a.deleteProjectExperience(r.projectExperienceId))}),e.nrm(5,"ng-icon",14),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.nI1(10,"dayJs"),e.k0s()()}if(2&t){const n=s.$implicit;e.R7$(2),e.Y8G("routerLink",e.eq3(6,C,n.projectExperienceId)),e.R7$(5),e.JRh(n.name),e.R7$(2),e.JRh(e.i5U(10,3,n.createDate,"YYYY/MM/DD"))}}function O(t,s){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",3)(2,"button",4),e.EFF(3," \u65b0\u589e\u5c08\u6848\u7d93\u6b77 "),e.k0s()(),e.j41(4,"div",5)(5,"table",6)(6,"thead")(7,"tr"),e.nrm(8,"th"),e.j41(9,"th",7),e.EFF(10,"\u5c08\u6848\u540d\u7a31"),e.k0s(),e.j41(11,"th",7),e.EFF(12,"\u5efa\u7acb\u65e5\u671f"),e.k0s()()(),e.j41(13,"tbody"),e.DNE(14,M,11,8,"tr",8),e.k0s()()(),e.j41(15,"app-pagination",9),e.bIt("change",function(r){e.eBV(n);const a=e.XpG(2);return e.Njj(a.paginationChange(r))}),e.k0s(),e.bVm()}if(2&t){const n=e.XpG(2);e.R7$(14),e.Y8G("ngForOf",n.projectExperiences()),e.R7$(),e.Y8G("total",n.total())("currentPage",n.page())}}function R(t,s){if(1&t&&(e.qex(0),e.DNE(1,O,16,3,"ng-container",2),e.bVm()),2&t){const n=e.XpG(),i=e.sdS(2);e.R7$(),e.Y8G("ngIf",!n.isLoading())("ngIfElse",i)}}function I(t,s){1&t&&(e.j41(0,"tr")(1,"td"),e.nrm(2,"div",15),e.k0s(),e.j41(3,"td"),e.nrm(4,"div",15),e.k0s(),e.j41(5,"td"),e.nrm(6,"div",15),e.k0s()())}function T(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"table",6)(2,"tbody")(3,"tr"),e.nrm(4,"td"),e.j41(5,"td",7),e.EFF(6,"\u5c08\u6848\u540d\u7a31"),e.k0s(),e.j41(7,"td",7),e.EFF(8,"\u5efa\u7acb\u65e5\u671f"),e.k0s()(),e.DNE(9,I,7,0,"tr",8),e.k0s()()(),e.j41(10,"app-pagination",9),e.bIt("change",function(r){e.eBV(n);const a=e.XpG();return e.Njj(a.paginationChange(r))}),e.k0s()}if(2&t){const n=e.XpG();e.R7$(9),e.Y8G("ngForOf",e.lJ4(3,b)),e.R7$(),e.Y8G("total",n.total())("currentPage",n.page())}}function A(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",16)(1,"app-error",17),e.bIt("refresh",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.getProjectExperience(r.page()))}),e.k0s()()}}let B=(()=>{var t;class s{constructor(){this.projectExperienceSrv=(0,e.WQX)(d.M),this.apiSrv=(0,e.WQX)(v.G),this.swalSrv=(0,e.WQX)(j.X),this.route=(0,e.WQX)(p.nX),this.router=(0,e.WQX)(p.Ix),this.total=(0,e.vPA)(0),this.projectExperiences=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isError=(0,e.vPA)(!1),this.page=(0,e.vPA)(1),this._destroyRef=(0,e.WQX)(e.abz)}ngOnInit(){this.route.queryParamMap.pipe((0,_.pQ)(this._destroyRef)).subscribe(i=>{const r=i.get("page"),a=r?parseInt(r):1;this.page.set(isNaN(a)?1:a),this.getProjectExperience(this.page())})}getProjectExperience(i){this.isError.set(!1),this.isLoading.set(!0),this.projectExperienceSrv.getProjectExperience(i).pipe((0,h.j)(()=>this.isLoading.set(!1)),(0,_.pQ)(this._destroyRef)).subscribe({next:r=>{if(this.apiSrv.ifSuccess(r,!1)){const{data:{total:a,projectExperiences:W}}=r;this.total.set(a),this.projectExperiences.set(W)}else this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}paginationChange(i){this.router.navigate(["/setting/project-experience/detail"],{queryParams:{page:i}})}deleteProjectExperience(i){this.swalSrv.confirm({text:"\u78ba\u5b9a\u8981\u522a\u9664\u5c08\u6848\u7d93\u6b77\u55ce?"}).pipe((0,m.p)(({isConfirmed:r})=>r),(0,u.n)(()=>this.projectExperienceSrv.deleteProjectExperience(i)),(0,m.p)(r=>this.apiSrv.ifSuccess(r)),(0,u.n)(r=>this.swalSrv.alert({icon:j.J.Success,text:r.returnMessage})),(0,_.pQ)(this._destroyRef)).subscribe(()=>this.paginationChange(1))}search(){this.paginationChange(1)}}return(t=s).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-project-experience-detail"]],standalone:!0,features:[e.Jv_([(0,E.EB)({heroPencilSquare:g.r6l,heroTrash:g.dmW})]),e.aNF],decls:5,vars:2,consts:[["loading",""],["error",""],[4,"ngIf","ngIfElse"],[1,"mb-5","flex","justify-end"],["routerLink","/setting/project-experience/create",1,"btn","btn-primary"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"change","total","currentPage"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(i,r){if(1&i&&e.DNE(0,R,2,2,"ng-container",2)(1,T,11,4,"ng-template",null,0,e.C5r)(3,A,2,0,"ng-template",null,1,e.C5r),2&i){const a=e.sdS(4);e.Y8G("ngIf",!r.isError())("ngIfElse",a)}},dependencies:[c.MD,c.Sq,c.bT,E.Uq,x.A,P.e,D.s,p.Wk,f.YN]}),s})()}}]);