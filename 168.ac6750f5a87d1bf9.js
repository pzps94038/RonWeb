"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[168],{6168:(M,h,e)=>{e.r(h),e.d(h,{LoginComponent:()=>B});var u=e(5855),n=e(2223),m=e(4755),t=e(6355),l=e(9401),d=e(5512),i=e(3144),g=e(2340);let v=(()=>{class c{constructor(){this.http=(0,n.f3M)(i.eN)}login(a){return this.http.post(`${g.N.baseUrl}/login`,a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var T=e(262),E=e(8746),s=e(2993),p=e(5249),r=e(5796),o=e(7929),I=e(4052);function b(c,C){if(1&c){const a=n.EpF();n.TgZ(0,"div",12)(1,"div",13)(2,"span",14),n._uU(3),n.qZA()(),n.TgZ(4,"ng-icon",15),n.NdJ("click",function(){n.CHM(a);const _=n.oxw();return n.KtG(_.errMsg.set(""))}),n.qZA()()}if(2&c){const a=n.oxw();n.xp6(3),n.Oqu(a.errMsg())}}let B=(()=>{class c{constructor(){this.loginSrv=(0,n.f3M)(v),this.apiSrv=(0,n.f3M)(o.s),this.userSrv=(0,n.f3M)(I.K),this.router=(0,n.f3M)(r.F0),this.loading=(0,n.tdS)(!1),this.errMsg=(0,n.tdS)(void 0),this._destroyRef=(0,n.f3M)(n.ktI),this.form=new l.cw({account:new l.NI("",[l.kI.required]),password:new l.NI("",[l.kI.required])}),this.loginOptions={path:"assets/lottie/login.json"}}get account(){return this.form.get("account")}get password(){return this.form.get("password")}submit(){this.form.markAllAsTouched(),this.form.valid&&(this.loading.set(!0),this.loginSrv.login({account:this.account.value,password:this.password.value}).pipe((0,T.K)(a=>{throw this.errMsg.set("\u7cfb\u7d71\u767c\u751f\u932f\u8aa4"),a}),(0,E.x)(()=>this.loading.set(!1)),(0,u.sL)(this._destroyRef)).subscribe(a=>{const{returnMessage:f,data:_}=a;if(this.apiSrv.ifSuccess(a,!1)){const{token:A,userId:O}=_;this.userSrv.setToken(A),this.userSrv.setUserId(O),this.userSrv.isLogin.set(!0),this.router.navigate(["setting"])}else this.errMsg.set(f)}))}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["app-login"]],standalone:!0,features:[n._Bn([(0,s.kp)({heroXMark:p.CZj})]),n.jDz],decls:16,vars:6,consts:[[1,"bg-banner","bg-cover","bg-fixed","h-screen","flex","justify-center","items-center"],[1,"bg-base-100","text-base-content","rounded-md","mt-20","md:mt-0","mx-5"],[1,"text-center","text-3xl","font-semibold","my-3"],[1,"w-60","mx-auto"],[3,"options"],[1,"flex","flex-wrap","items-center","w-full","sm:w-[500px]",3,"formGroup","ngSubmit"],[1,"w-full","px-3","my-2"],["class","alert alert-error shadow-lg border-2 bg-rose-800/[0.1] border-rose-900 relative py-5",4,"ngIf"],["placeholder","\u8acb\u8f38\u5165\u5e33\u865f","formControlName","account",1,"w-full"],["type","password","placeholder","\u8acb\u8f38\u5165\u5bc6\u78bc","formControlName","password",1,"w-full"],[1,"w-full","flex","justify-center","items-center"],["type","submit",1,"btn","btn-primary","my-3","px-8",3,"disabled"],[1,"alert","alert-error","shadow-lg","border-2","bg-rose-800/[0.1]","border-rose-900","relative","py-5"],[1,"absolute","left-5","top-2"],[1,"text-base","font-semibold","text-rose-900"],["name","heroXMark",1,"cursor-pointer","absolute","right-5","top-1","md:top-3","text-rose-900",3,"click"]],template:function(a,f){1&a&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),n._uU(3,"\u767b\u5165"),n.qZA(),n.TgZ(4,"div",3),n._UZ(5,"ng-lottie",4),n.qZA(),n.TgZ(6,"form",5),n.NdJ("ngSubmit",function(){return f.submit()}),n.TgZ(7,"div",6),n.YNc(8,b,5,1,"div",7),n.qZA(),n.TgZ(9,"div",6),n._UZ(10,"app-input",8),n.qZA(),n.TgZ(11,"div",6),n._UZ(12,"app-input",9),n.qZA(),n.TgZ(13,"div",10)(14,"button",11),n._uU(15," \u767b\u5165 "),n.qZA()()()()()),2&a&&(n.xp6(5),n.Q6J("options",f.loginOptions),n.xp6(1),n.Q6J("formGroup",f.form),n.xp6(2),n.Q6J("ngIf",f.errMsg()),n.xp6(6),n.ekj("loading",f.loading()),n.Q6J("disabled",f.loading()))},dependencies:[m.ez,m.O5,t.a,l.UX,l._Y,l.JJ,l.JL,l.sg,l.u,d.r,s.Fv]}),c})()},5376:(M,h,e)=>{e.d(h,{A:()=>t,x:()=>m});var u=e(2223),n=e(9401);const m=l=>({provide:n.JU,useExisting:(0,u.Gpc)(()=>l),multi:!0});let t=(()=>{class l{constructor(i,g){this.injector=i,this.cdr=g,this.labelClass="",this.class="",this.showErrorMsg=!0,this.val="",this.disabled=!1}ngOnInit(){this.ngControl=this.injector.get(n.a5)}ngAfterViewInit(){this.control=this.ngControl?.control,this.cdr.detectChanges()}writeValue(i){this.val=i}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i}change(){this.onChange&&this.onTouched&&(this.onChange(this.val),this.onTouched())}}return l.\u0275fac=function(i){return new(i||l)(u.Y36(u.zs3),u.Y36(u.sBO))},l.\u0275cmp=u.Xpm({type:l,selectors:[["app-basic-input"]],inputs:{labelName:"labelName",labelClass:"labelClass",class:"class",showErrorMsg:"showErrorMsg"},standalone:!0,features:[u.jDz],decls:0,vars:0,template:function(i,g){},encapsulation:2}),l})()},6355:(M,h,e)=>{e.d(h,{a:()=>E});var u=e(9401),n=e(4755),m=e(5376),t=e(2223);const l=function(s,p){return{"text-success":s,"text-error":p}};function d(s,p){if(1&s&&(t.TgZ(0,"label",3),t._uU(1),t.qZA()),2&s){const r=t.oxw();t.Tol(r.labelClass),t.Q6J("for",null==r.ngControl?null:r.ngControl.name)("ngClass",t.WLB(5,l,(null==r.control?null:r.control.touched)&&!(null!=r.control&&r.control.errors),(null==r.control?null:r.control.touched)&&(null==r.control?null:r.control.errors))),t.xp6(1),t.Oqu(r.labelName)}}function i(s,p){1&s&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u6b64\u6b04\u4f4d\u5fc5\u586b"),t.qZA()())}function g(s,p){1&s&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u8acb\u8f38\u5165\u6b63\u78ba\u683c\u5f0f\u7684\u96fb\u5b50\u4fe1\u7bb1"),t.qZA()())}function v(s,p){if(1&s&&(t.ynx(0),t.YNc(1,i,3,0,"p",4),t.YNc(2,g,3,0,"p",4),t.BQk()),2&s){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.control||null==r.control.errors?null:r.control.errors.required),t.xp6(1),t.Q6J("ngIf",null==r.control||null==r.control.errors?null:r.control.errors.email)}}const T=function(s,p){return{"input-error":s,"input-success":p}};let E=(()=>{class s extends m.A{constructor(){super(...arguments),this.type="text",this.placeholder="",this.size="md",this.inputmode="text"}}return s.\u0275fac=function(){let p;return function(o){return(p||(p=t.n5z(s)))(o||s)}}(),s.\u0275cmp=t.Xpm({type:s,selectors:[["app-input"]],inputs:{type:"type",placeholder:"placeholder",size:"size",inputmode:"inputmode"},standalone:!0,features:[t._Bn([(0,m.x)(s)]),t.qOj,t.jDz],decls:3,vars:22,consts:[["class","block",3,"for","class","ngClass",4,"ngIf"],[1,"input","input-bordered","border-2",3,"type","id","ngModel","ngClass","disabled","inputMode","placeholder","ngModelChange"],[4,"ngIf"],[1,"block",3,"for","ngClass"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"]],template:function(r,o){1&r&&(t.YNc(0,d,2,8,"label",0),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(b){return o.val=b})("ngModelChange",function(){return o.change()}),t.qZA(),t.YNc(2,v,3,2,"ng-container",2)),2&r&&(t.Q6J("ngIf",o.labelName),t.xp6(1),t.Tol(o.class),t.ekj("input-xs","xs"===o.size)("input-sm","sm"===o.size)("input-md","md"===o.size)("input-lg","lg"===o.size),t.Q6J("type",o.type)("id",null==o.ngControl?null:o.ngControl.name)("ngModel",o.val)("ngClass",t.WLB(19,T,(null==o.control?null:o.control.touched)&&(null==o.control?null:o.control.errors),(null==o.control?null:o.control.touched)&&!(null!=o.control&&o.control.errors)))("disabled",o.disabled)("inputMode",o.inputmode)("placeholder",o.placeholder),t.xp6(1),t.Q6J("ngIf",(null==o.control?null:o.control.touched)&&(null==o.control?null:o.control.errors)&&o.showErrorMsg))},dependencies:[n.ez,n.mk,n.O5,u.u5,u.Fj,u.JJ,u.On],styles:["[_nghost-%COMP%]{width:100%}"]}),s})()},7929:(M,h,e)=>{e.d(h,{s:()=>l});var u=e(2223),n=e(5698),m=e(9415),t=e(9096);let l=(()=>{class d{constructor(){this.swalSrv=(0,u.f3M)(t.J)}ifSuccess(g,v=!0){return v?g.returnCode===m.N.Success||(this.swalSrv.alert({text:g.returnMessage}).pipe((0,n.q)(1)).subscribe(),!1):g.returnCode===m.N.Success}}return d.\u0275fac=function(g){return new(g||d)},d.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);