"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[257],{257:(E,h,r)=>{r.r(h),r.d(h,{ArticleCategoryDetailComponent:()=>I});var t=r(9523),l=r(4755),c=r(6274),u=r(3500),s=r(9096),p=r(5796),o=r(6736),d=r(262),m=r(8746),C=r(9300),f=r(3900),D=r(7915),y=r(2993),A=r(5249),M=r(3665),v=r(8028);function T(a,_){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"th",9)(2,"button",10),t._UZ(3,"ng-icon",11),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){const g=t.CHM(e).$implicit,L=t.oxw(3);return t.KtG(L.deleteArticleCategory(g.categoryId))}),t._UZ(5,"ng-icon",13),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"dayJs"),t.qZA()()}if(2&a){const e=_.$implicit;t.xp6(2),t.Q6J("routerLink","/setting/article-category/edit/"+e.categoryId),t.xp6(5),t.Oqu(e.categoryName),t.xp6(2),t.Oqu(t.xi3(10,3,e.createDate,"YYYY/MM/DD hh:mm"))}}function x(a,_){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",3),t._uU(2," \u65b0\u589e\u5206\u985e "),t.qZA(),t.TgZ(3,"div",4)(4,"table",5)(5,"thead")(6,"tr"),t._UZ(7,"th"),t.TgZ(8,"th",6),t._uU(9,"\u5206\u985e"),t.qZA(),t.TgZ(10,"th",6),t._uU(11,"\u5efa\u7acb\u65e5\u671f"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,T,11,6,"tr",7),t.qZA()()(),t.TgZ(14,"app-pagination",8),t.NdJ("change",function(i){t.CHM(e);const g=t.oxw(2);return t.KtG(g.paginationChange(i))}),t.qZA(),t.BQk()}if(2&a){const e=t.oxw(2);t.xp6(13),t.Q6J("ngForOf",e.categorys()),t.xp6(1),t.Q6J("total",e.total())("currentPage",e.page())}}function Z(a,_){if(1&a&&(t.ynx(0),t.YNc(1,x,15,3,"ng-container",0),t.BQk()),2&a){const e=t.oxw(),n=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!e.isLoading())("ngIfElse",n)}}function O(a,_){1&a&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",14),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"div",14),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"div",14),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"div",14),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"div",14),t.qZA()())}const P=function(){return[1,2,3,4,5]};function U(a,_){if(1&a){const e=t.EpF();t.TgZ(0,"div",4)(1,"table",5)(2,"tbody")(3,"tr"),t._UZ(4,"td"),t.TgZ(5,"td",6),t._uU(6,"\u5206\u985e"),t.qZA(),t.TgZ(7,"td",6),t._uU(8,"\u5efa\u7acb\u65e5\u671f"),t.qZA()(),t.YNc(9,O,11,0,"tr",7),t.qZA()()(),t.TgZ(10,"app-pagination",8),t.NdJ("change",function(i){t.CHM(e);const g=t.oxw();return t.KtG(g.paginationChange(i))}),t.qZA()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",t.DdM(3,P)),t.xp6(1),t.Q6J("total",e.total())("currentPage",e.page())}}function b(a,_){if(1&a){const e=t.EpF();t.TgZ(0,"div",15)(1,"app-error",16),t.NdJ("refresh",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.refreshArticleCategory())}),t.qZA()()}}let I=(()=>{class a{constructor(){this.articleCategorySrv=(0,t.f3M)(c.h),this.sharedSrv=(0,t.f3M)(u.F),this.swalSrv=(0,t.f3M)(s.J),this.route=(0,t.f3M)(p.gz),this.router=(0,t.f3M)(p.F0),this.total=(0,t.tdS)(0),this.categorys=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,o.sL)(this._destroyRef)).subscribe(e=>{const n=e.get("page"),i=n?parseInt(n):1;this.page.set(isNaN(i)?1:i),this.getArticleCategory(this.page())})}getArticleCategory(e){this.isError.set(!1),this.isLoading.set(!0),this.articleCategorySrv.getArticleCategory(e).pipe((0,d.K)(n=>{throw this.isError.set(!0),n}),(0,m.x)(()=>this.isLoading.set(!1)),(0,o.sL)(this._destroyRef)).subscribe(n=>{if(this.sharedSrv.ifSuccess(n,!1)){const{data:{total:i,categorys:g}}=n;this.total.set(i),this.categorys.set(g)}else this.isError.set(!0)})}paginationChange(e){this.router.navigate(["/setting/article-category"],{queryParams:{page:e}})}deleteArticleCategory(e){this.swalSrv.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u5206\u985e\u55ce?",text:"\u9019\u500b\u64cd\u4f5c\u5c07\u6c38\u4e45\u522a\u9664\u8a72\u5206\u985e\u53ca\u76f8\u95dc\u7684\u6240\u6709\u6587\u7ae0\u3002\u8acb\u78ba\u8a8d\u60a8\u7684\u6c7a\u5b9a\uff0c\u56e0\u70ba\u9019\u4e9b\u5167\u5bb9\u5c07\u7121\u6cd5\u6062\u5fa9\u3002"}).pipe((0,C.h)(({isConfirmed:n})=>n),(0,f.w)(()=>this.articleCategorySrv.deleteArticleCategory(e)),(0,C.h)(n=>this.sharedSrv.ifSuccess(n)),(0,f.w)(n=>this.swalSrv.alert({icon:s.u.Success,text:n.returnMessage})),(0,o.sL)(this._destroyRef)).subscribe(()=>{this.page.set(1),this.getArticleCategory(this.page())})}refreshArticleCategory(){this.page.set(1),this.getArticleCategory(this.page())}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-article-category-detail"]],standalone:!0,features:[t._Bn([(0,y.kp)({heroPencilSquare:A.yUl,heroTrash:A.ciC})]),t.jDz],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],["routerLink","/setting/article-category/create",1,"btn","btn-primary","mb-5"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"total","currentPage","change"],[1,"flex"],["type","button",1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,n){if(1&e&&(t.YNc(0,Z,2,2,"ng-container",0),t.YNc(1,U,11,4,"ng-template",null,1,t.W1O),t.YNc(3,b,2,0,"ng-template",null,2,t.W1O)),2&e){const i=t.MAs(4);t.Q6J("ngIf",!n.isError())("ngIfElse",i)}},dependencies:[l.ez,l.sg,l.O5,D.Q,y.Fv,p.rH,M.g,v.q]}),a})()},6274:(E,h,r)=>{r.d(h,{h:()=>u});var t=r(3144),l=r(9523),c=r(2340);let u=(()=>{class s{constructor(){this.http=(0,l.f3M)(t.eN)}getArticleCategory(o){if(o){const d=(new t.LE).append("page",o);return this.http.get(`${c.N.baseUrl}/articleCategory`,{params:d})}return this.http.get(`${c.N.baseUrl}/articleCategory`)}getArticleCategoryById(o){return this.http.get(`${c.N.baseUrl}/articleCategory/${o}`)}updateArticleCategory(o){return this.http.patch(`${c.N.baseUrl}/articleCategory/${o.categoryId}`,o)}createArticleCategory(o){return this.http.post(`${c.N.baseUrl}/articleCategory`,o)}deleteArticleCategory(o){return this.http.delete(`${c.N.baseUrl}/articleCategory/${o}`)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);