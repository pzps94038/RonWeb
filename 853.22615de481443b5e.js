"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[853],{853:(M,h,n)=>{n.r(h),n.d(h,{ArticleDetailComponent:()=>B});var s=n(9401),t=n(9416),l=n(4755),u=n(2993),g=n(5249),o=n(1415),c=n(8028),i=n(7915),A=n(3665),p=n(5855),D=n(8746),E=n(9300),m=n(3900),v=n(9096),T=n(7929),Z=n(6355),O=n(8184);const x=function(r){return["/setting","article","edit",r]};function P(r,f){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th",14)(2,"a",15),t._UZ(3,"ng-icon",16),t.qZA(),t.TgZ(4,"button",17),t.NdJ("click",function(){const d=t.CHM(e).$implicit,C=t.oxw(3);return t.KtG(C.deleteArticle(d.articleId))}),t._UZ(5,"ng-icon",18),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"dayJs"),t.qZA()()}if(2&r){const e=f.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(9,x,e.articleId)),t.xp6(5),t.Oqu(e.articleTitle),t.xp6(2),t.Oqu(e.categoryName),t.xp6(2),t.Oqu(e.flag),t.xp6(2),t.Oqu(e.viewCount),t.xp6(2),t.Oqu(t.xi3(16,6,e.createDate,"YYYY/MM/DD"))}}function U(r,f){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",4)(3,"div",5)(4,"app-input",6),t.NdJ("ngModelChange",function(_){t.CHM(e);const d=t.oxw(2);return t.KtG(d.keyword=_)}),t.qZA()(),t.TgZ(5,"button",7),t.NdJ("click",function(){t.CHM(e);const _=t.oxw(2);return t.KtG(_.search())}),t._uU(6," \u641c\u5c0b "),t.qZA()(),t.TgZ(7,"button",8),t._uU(8,"\u65b0\u589e\u6587\u7ae0"),t.qZA()(),t.TgZ(9,"div",9)(10,"table",10)(11,"thead")(12,"tr"),t._UZ(13,"th"),t.TgZ(14,"th",11),t._uU(15,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(16,"th",11),t._uU(17,"\u5206\u985e"),t.qZA(),t.TgZ(18,"th",11),t._uU(19,"\u555f\u7528"),t.qZA(),t.TgZ(20,"th",11),t._uU(21,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(22,"th",11),t._uU(23,"\u5efa\u7acb\u65e5\u671f"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,P,17,11,"tr",12),t.qZA()()(),t.TgZ(26,"app-pagination",13),t.NdJ("change",function(_){t.CHM(e);const d=t.oxw(2);return t.KtG(d.paginationChange(_))}),t.qZA(),t.BQk()}if(2&r){const e=t.oxw(2);t.xp6(4),t.Q6J("ngModel",e.keyword),t.xp6(21),t.Q6J("ngForOf",e.articles()),t.xp6(1),t.Q6J("total",e.total())("currentPage",e.page())}}function y(r,f){if(1&r&&(t.ynx(0),t.YNc(1,U,27,4,"ng-container",0),t.BQk()),2&r){const e=t.oxw(),a=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!e.isLoading())("ngIfElse",a)}}function I(r,f){1&r&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",19),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"div",19),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"div",19),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"div",19),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"div",19),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"div",19),t.qZA()())}const K=function(){return[1,2,3,4,5]};function b(r,f){if(1&r){const e=t.EpF();t.TgZ(0,"div",9)(1,"table",10)(2,"tbody")(3,"tr"),t._UZ(4,"td"),t.TgZ(5,"td",11),t._uU(6,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(7,"td",11),t._uU(8,"\u5206\u985e"),t.qZA(),t.TgZ(9,"td",11),t._uU(10,"\u555f\u7528"),t.qZA(),t.TgZ(11,"td",11),t._uU(12,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(13,"td",11),t._uU(14,"\u5efa\u7acb\u65e5\u671f"),t.qZA()(),t.YNc(15,I,13,0,"tr",12),t.qZA()()(),t.TgZ(16,"app-pagination",13),t.NdJ("change",function(_){t.CHM(e);const d=t.oxw();return t.KtG(d.paginationChange(_))}),t.qZA()}if(2&r){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",t.DdM(3,K)),t.xp6(1),t.Q6J("total",e.total())("currentPage",e.page())}}function L(r,f){if(1&r){const e=t.EpF();t.TgZ(0,"div",20)(1,"app-error",21),t.NdJ("refresh",function(){t.CHM(e);const _=t.oxw();return t.KtG(_.getArticle(_.page(),_.queryKeyword))}),t.qZA()()}}let B=(()=>{class r{constructor(){this.articleSrv=(0,t.f3M)(O.r),this.apiSrv=(0,t.f3M)(T.s),this.swalSrv=(0,t.f3M)(v.J),this.route=(0,t.f3M)(o.gz),this.router=(0,t.f3M)(o.F0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,p.sL)(this._destroyRef)).subscribe(e=>{const a=e.get("page"),_=e.get("keyword")?e.get("keyword"):void 0,d=a?parseInt(a):1;this.page.set(isNaN(d)?1:d),this.queryKeyword=_,this.getArticle(this.page(),_)})}getArticle(e,a){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(e,a).pipe((0,D.x)(()=>this.isLoading.set(!1)),(0,p.sL)(this._destroyRef)).subscribe({next:_=>{if(this.apiSrv.ifSuccess(_,!1)){const{data:{total:d,articles:C}}=_;this.total.set(d),this.articles.set(C)}else this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}paginationChange(e){this.router.navigate(["/setting/article"],{queryParams:{page:e,keyword:this.queryKeyword?this.queryKeyword:void 0}})}deleteArticle(e){this.swalSrv.confirm({text:"\u78ba\u5b9a\u8981\u522a\u9664\u6587\u7ae0\u55ce?"}).pipe((0,E.h)(({isConfirmed:a})=>a),(0,m.w)(()=>this.articleSrv.deleteArticle(e)),(0,E.h)(a=>this.apiSrv.ifSuccess(a)),(0,m.w)(a=>this.swalSrv.alert({icon:v.u.Success,text:a.returnMessage})),(0,p.sL)(this._destroyRef)).subscribe(()=>this.paginationChange(1))}search(){this.queryKeyword=this.keyword,this.paginationChange(1)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-article-detail"]],standalone:!0,features:[t._Bn([(0,u.kp)({heroPencilSquare:g.yUl,heroTrash:g.ciC})]),t.jDz],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"flex","justify-between","flex-wrap"],[1,"flex","w-full","mb-5","md:w-1/2","lg:w-1/3"],[1,"w-10/12"],["type","search","placeholder","\u641c\u5c0b\u95dc\u9375\u5b57","inputmode","search",1,"w-full",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","mx-2","w-3/12","sm:w-2/12","md:w-3/12",3,"click"],["routerLink","/setting/article/create",1,"btn","btn-primary","mb-5"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"total","currentPage","change"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,a){if(1&e&&(t.YNc(0,y,2,2,"ng-container",0),t.YNc(1,b,17,4,"ng-template",null,1,t.W1O),t.YNc(3,L,2,0,"ng-template",null,2,t.W1O)),2&e){const _=t.MAs(4);t.Q6J("ngIf",!a.isError())("ngIfElse",_)}},dependencies:[l.ez,l.sg,l.O5,u.Fv,c.q,i.Q,A.g,o.rH,s.u5,s.JJ,s.On,Z.a]}),r})()},8184:(M,h,n)=>{n.d(h,{r:()=>g});var s=n(3144),t=n(9416),l=n(2340),u=n(681);let g=(()=>{class o{constructor(){this.http=(0,t.f3M)(s.eN),this.transferSrv=(0,t.f3M)(u.Z)}getArticle(i,A){let p=new s.LE;return i&&(p=p.append("page",i)),A&&(p=p.append("keyword",A)),this.http.get(`${l.N.baseUrl}/adminArticle`,{params:p})}getArticleById(i){return this.http.get(`${l.N.baseUrl}/adminArticle/${i}`)}createArticle(i){return this.http.post(`${l.N.baseUrl}/adminArticle`,i)}updateArticle(i){return this.http.patch(`${l.N.baseUrl}/adminArticle/${i.articleId}`,i)}deleteArticle(i){return this.http.delete(`${l.N.baseUrl}/adminArticle/${i}`)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},681:(M,h,n)=>{n.d(h,{Z:()=>o});var s=n(9416),t=n(928),l=n(9646),u=n(8505),g=n(4782);let o=(()=>{class c{constructor(){this.transferState=(0,s.f3M)(s.kie),this.deviceSrv=(0,s.f3M)(t.U)}transfer(A,p,D=!0){const E=(0,s.Cb6)(A);if(this.transferState.hasKey(E)&&D){const m=this.transferState.get(E,void 0);return(0,l.of)(m)}return p().pipe((0,u.b)(v=>{this.deviceSrv.isServer&&this.transferState.set(E,v)}),(0,g.d)())}}return c.\u0275fac=function(A){return new(A||c)},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},4782:(M,h,n)=>{n.d(h,{d:()=>l});var s=n(4707),t=n(3099);function l(u,g,o){let c,i=!1;return u&&"object"==typeof u?({bufferSize:c=1/0,windowTime:g=1/0,refCount:i=!1,scheduler:o}=u):c=null!=u?u:1/0,(0,t.B)({connector:()=>new s.t(c,g,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}}}]);