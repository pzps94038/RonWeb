"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[119],{119:(O,g,o)=>{o.r(g),o.d(g,{ArticleLabelEditComponent:()=>v});var e=o(3020),p=o(4755),i=o(5030),t=o(6355),_=o(9148),h=o(3500),a=o(9096),m=o(6736),b=o(8505),f=o(9300),C=o(4004),r=o(3900),u=o(8746),s=o(1514);function n(c,I){if(1&c){const l=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(l);const E=e.oxw();return e.KtG(E.submit())}),e.TgZ(2,"div",3),e._UZ(3,"app-input",4),e.qZA(),e.TgZ(4,"div",5)(5,"button",6),e._uU(6," \u4fee\u6539\u6a19\u7c64 "),e.qZA()()(),e.BQk()}if(2&c){const l=e.oxw();e.xp6(1),e.Q6J("formGroup",l.form),e.xp6(4),e.ekj("loading",l.isLoading()),e.Q6J("disabled",l.isLoading())}}function M(c,I){1&c&&(e.TgZ(0,"div",7)(1,"div")(2,"div",8),e._UZ(3,"div",9),e.qZA()()())}let v=(()=>{class c{constructor(){this.sharedSrv=(0,e.f3M)(h.F),this.swalSrv=(0,e.f3M)(a.J),this.articleLabelSrv=(0,e.f3M)(s.F),this.route=(0,e.f3M)(_.gz),this.router=(0,e.f3M)(_.F0),this.isLoading=(0,e.tdS)(!1),this.editIsLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this._destroyRef=(0,e.f3M)(e.ktI),this.form=new i.cw({labelId:new i.NI(void 0,[i.kI.required]),labelName:new i.NI("",[i.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,b.b)(()=>this.isLoading.set(!0)),(0,f.h)(l=>!!l.get("id")),(0,C.U)(l=>l.get("id")),(0,f.h)(l=>!isNaN(parseInt(l))),(0,C.U)(l=>parseInt(l)),(0,r.w)(l=>this.articleLabelSrv.getArticleLabelById(l)),(0,f.h)(l=>this.sharedSrv.ifSuccess(l)),(0,C.U)(({data:l})=>l),(0,b.b)(({labelId:l,labelName:d})=>{this.form.get("labelId")?.setValue(l),this.form.get("labelName")?.setValue(d)}),(0,m.sL)(this._destroyRef)).subscribe(l=>{const{labelId:d,labelName:E}=l;this.form.get("labelId")?.setValue(d),this.form.get("labelName")?.setValue(E),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),!this.form.valid)return;const l={labelId:this.form.get("labelId").value,labelName:this.form.get("labelName").value,userId:this.sharedSrv.getUserId()};this.editIsLoading.set(!0),this.articleLabelSrv.updateArticleLabel(l).pipe((0,f.h)(d=>this.sharedSrv.ifSuccess(d,!0)),(0,r.w)(({returnMessage:d})=>this.swalSrv.alert({icon:a.u.Success,text:d})),(0,u.x)(()=>this.editIsLoading.set(!1)),(0,m.sL)(this._destroyRef)).subscribe(()=>{this.router.navigate(["/setting/article-label"])})}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-article-label-edit"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u6a19\u7c64","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u6a19\u7c64","formControlName","labelName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(l,d){if(1&l&&(e.YNc(0,n,7,4,"ng-container",0),e.YNc(1,M,4,0,"ng-template",null,1,e.W1O)),2&l){const E=e.MAs(2);e.Q6J("ngIf",!d.isLoading())("ngIfElse",E)}},dependencies:[p.ez,p.O5,t.a,i.UX,i._Y,i.JJ,i.JL,i.sg,i.u]}),c})()},5376:(O,g,o)=>{o.d(g,{A:()=>t,x:()=>i});var e=o(3020),p=o(5030);const i=_=>({provide:p.JU,useExisting:(0,e.Gpc)(()=>_),multi:!0});let t=(()=>{class _{constructor(a,m){this.injector=a,this.cdr=m,this.labelClass="",this.class="",this.showErrorMsg=!0,this.val="",this.disabled=!1}ngOnInit(){this.ngControl=this.injector.get(p.a5)}ngAfterViewInit(){this.control=this.ngControl?.control,this.cdr.detectChanges()}writeValue(a){this.val=a}registerOnChange(a){this.onChange=a}registerOnTouched(a){this.onTouched=a}setDisabledState(a){this.disabled=a}change(){this.onChange&&this.onTouched&&(this.onChange(this.val),this.onTouched())}}return _.\u0275fac=function(a){return new(a||_)(e.Y36(e.zs3),e.Y36(e.sBO))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-basic-input"]],inputs:{labelName:"labelName",labelClass:"labelClass",class:"class",showErrorMsg:"showErrorMsg"},standalone:!0,features:[e.jDz],decls:0,vars:0,template:function(a,m){},encapsulation:2}),_})()},6355:(O,g,o)=>{o.d(g,{a:()=>C});var e=o(5030),p=o(4755),i=o(5376),t=o(3020);const _=function(r,u){return{"text-success":r,"text-error":u}};function h(r,u){if(1&r&&(t.TgZ(0,"label",3),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.Tol(s.labelClass),t.Q6J("for",null==s.ngControl?null:s.ngControl.name)("ngClass",t.WLB(5,_,(null==s.control?null:s.control.touched)&&!(null!=s.control&&s.control.errors),(null==s.control?null:s.control.touched)&&(null==s.control?null:s.control.errors))),t.xp6(1),t.Oqu(s.labelName)}}function a(r,u){1&r&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u6b64\u6b04\u4f4d\u5fc5\u586b"),t.qZA()())}function m(r,u){1&r&&(t.TgZ(0,"p",5)(1,"span",6),t._uU(2,"\u8acb\u8f38\u5165\u6b63\u78ba\u683c\u5f0f\u7684\u96fb\u5b50\u4fe1\u7bb1"),t.qZA()())}function b(r,u){if(1&r&&(t.ynx(0),t.YNc(1,a,3,0,"p",4),t.YNc(2,m,3,0,"p",4),t.BQk()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",null==s.control||null==s.control.errors?null:s.control.errors.required),t.xp6(1),t.Q6J("ngIf",null==s.control||null==s.control.errors?null:s.control.errors.email)}}const f=function(r,u){return{"input-error":r,"input-success":u}};let C=(()=>{class r extends i.A{constructor(){super(...arguments),this.type="text",this.placeholder="",this.size="md",this.inputmode="text"}}return r.\u0275fac=function(){let u;return function(n){return(u||(u=t.n5z(r)))(n||r)}}(),r.\u0275cmp=t.Xpm({type:r,selectors:[["app-input"]],inputs:{type:"type",placeholder:"placeholder",size:"size",inputmode:"inputmode"},standalone:!0,features:[t._Bn([(0,i.x)(r)]),t.qOj,t.jDz],decls:3,vars:22,consts:[["class","block",3,"for","class","ngClass",4,"ngIf"],[1,"input","input-bordered","border-2",3,"type","id","ngModel","ngClass","disabled","inputMode","placeholder","ngModelChange"],[4,"ngIf"],[1,"block",3,"for","ngClass"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"]],template:function(s,n){1&s&&(t.YNc(0,h,2,8,"label",0),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(v){return n.val=v})("ngModelChange",function(){return n.change()}),t.qZA(),t.YNc(2,b,3,2,"ng-container",2)),2&s&&(t.Q6J("ngIf",n.labelName),t.xp6(1),t.Tol(n.class),t.ekj("input-xs","xs"===n.size)("input-sm","sm"===n.size)("input-md","md"===n.size)("input-lg","lg"===n.size),t.Q6J("type",n.type)("id",null==n.ngControl?null:n.ngControl.name)("ngModel",n.val)("ngClass",t.WLB(19,f,(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.errors),(null==n.control?null:n.control.touched)&&!(null!=n.control&&n.control.errors)))("disabled",n.disabled)("inputMode",n.inputmode)("placeholder",n.placeholder),t.xp6(1),t.Q6J("ngIf",(null==n.control?null:n.control.touched)&&(null==n.control?null:n.control.errors)&&n.showErrorMsg))},dependencies:[p.ez,p.mk,p.O5,e.u5,e.Fj,e.JJ,e.On],styles:["[_nghost-%COMP%]{width:100%}"]}),r})()}}]);