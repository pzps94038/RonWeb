(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[270],{4270:(L,_,c)=>{"use strict";c.r(_),c.d(_,{ArticleComponent:()=>u});var t=c(3020),D=c(4755),v=c(8884),g=c(6736),m=c(9300),y=c(4004),f=c(8505),M=c(262),R=c(8746),b=c(9148),T=c(9415),w=c(3500),j=c(8028),H=c(2993),Y=c(5249),J=c(3665),z=c(992),E=c(7579),O=c(2722),N=c(928);let U=(()=>{class n{constructor(){this.deviceSrv=(0,t.f3M)(N.U),this.sharedSrv=(0,t.f3M)(w.F),this.elementRef=(0,t.f3M)(t.SBq),this.router=(0,t.f3M)(b.F0),this.darkMode$=(0,g.Dx)(this.sharedSrv.darkMode),this._destroy$=new E.x}ngOnInit(){this.router.events.pipe((0,m.h)(e=>e instanceof b.OD),(0,O.R)(this._destroy$)).subscribe(()=>{this.elementRef.nativeElement.innerHTML=""}),this.router.events.pipe((0,m.h)(e=>e instanceof b.m2),(0,O.R)(this._destroy$)).subscribe(()=>{this.generateComment()})}ngAfterViewInit(){this.generateComment()}ngOnDestroy(){this._destroy$.next(null),this._destroy$.complete()}generateComment(){if(!this.deviceSrv.isClient)return;let e;const d=this.elementRef.nativeElement;this.darkMode$.pipe((0,O.R)(this._destroy$)).subscribe(p=>{e&&d.removeChild(e),e=document.createElement("script"),e.setAttribute("src","https://giscus.app/client.js"),e.setAttribute("data-repo","pzps94038/RonWeb"),e.setAttribute("data-repo-id","R_kgDOJU7i_Q"),e.setAttribute("data-category","Announcements"),e.setAttribute("data-category-id","DIC_kwDOJU7i_c4CWkJZ"),e.setAttribute("data-mapping","title"),e.setAttribute("data-reactions-enabled","1"),e.setAttribute("data-emit-metadata","0"),e.setAttribute("data-theme",p?"dark_tritanopia":"light_tritanopia"),e.setAttribute("data-lang","zh-TW"),e.setAttribute("data-loading","lazy"),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",""),d.appendChild(e)})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-giscus"]],standalone:!0,features:[t.jDz],decls:0,vars:0,template:function(e,d){},dependencies:[D.ez],encapsulation:2}),n})();const $=function(n){return["blog","category",n]};function h(n,l){if(1&n&&(t.ynx(0),t.TgZ(1,"div")(2,"h3",4),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"div",5),t._UZ(6,"ng-icon",6),t.TgZ(7,"h4"),t._uU(8),t.ALo(9,"dayJs"),t.qZA()(),t.TgZ(10,"a",7),t._UZ(11,"ng-icon",8),t.TgZ(12,"h5"),t._uU(13),t.qZA()()()(),t._UZ(14,"div",9)(15,"div",10),t.ALo(16,"safe"),t._UZ(17,"div",11)(18,"div",10),t.ALo(19,"safe"),t._UZ(20,"div",12)(21,"app-giscus"),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.article().articleTitle),t.xp6(5),t.Oqu(t.xi3(9,6,e.article().createDate,"YYYY/MM/DD hh:mm")),t.xp6(2),t.Q6J("routerLink",t.VKq(15,$,e.article().categoryId)),t.xp6(3),t.Oqu(e.article().categoryName),t.xp6(2),t.Q6J("innerHTML",t.xi3(16,9,e.article().previewContent,"html"),t.oJD),t.xp6(3),t.Q6J("innerHTML",t.xi3(19,12,e.article().content,"html"),t.oJD)}}function I(n,l){if(1&n&&(t.ynx(0),t.YNc(1,h,22,17,"ng-container",1),t.BQk()),2&n){const e=t.oxw(),d=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!e.isLoading()&&e.article())("ngIfElse",d)}}function P(n,l){1&n&&(t.TgZ(0,"div",5),t._UZ(1,"div",15),t.qZA())}function o(n,l){1&n&&t._UZ(0,"div",16)}const s=function(){return[1,2]},r=function(){return[1,2,3,4,5,6,7,8,9,10]};function a(n,l){1&n&&(t.TgZ(0,"div"),t.YNc(1,P,2,0,"div",13),t.qZA(),t._UZ(2,"div",9),t.TgZ(3,"div"),t.YNc(4,o,1,0,"div",14),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(2,s)),t.xp6(3),t.Q6J("ngForOf",t.DdM(3,r)))}function i(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"app-error",17),t.NdJ("refresh",function(){t.CHM(e);const p=t.oxw();return t.KtG(p.getArticleById(p.articleId()))}),t.qZA()}}let u=(()=>{class n{constructor(){this.articleSrv=(0,t.f3M)(v.n),this.route=(0,t.f3M)(b.gz),this.sharedSrv=(0,t.f3M)(w.F),this.router=(0,t.f3M)(b.F0),this.articleId=(0,t.tdS)(""),this.article=(0,t.tdS)(void 0),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.paramMap.pipe((0,m.h)(e=>!!e.get("id")),(0,y.U)(e=>e.get("id")),(0,f.b)(e=>this.articleId.set(e)),(0,g.sL)(this._destroyRef)).subscribe(e=>this.getArticleById(e))}getArticleById(e){this.articleSrv.getArticleById(e).pipe((0,f.b)(()=>this.isLoading.set(!0)),(0,M.K)(d=>{throw this.isError.set(!0),d}),(0,R.x)(()=>this.isLoading.set(!1)),(0,g.sL)(this._destroyRef)).subscribe(d=>{if(this.sharedSrv.ifSuccess(d,!1)){const{data:p}=d,{articleTitle:S}=p;this.sharedSrv.setTitle(S),this.article.set(p),this.updateArticleViews(e)}else d.returnCode===T.N.NotFound?this.router.navigate(["blog","notFound"]):this.isError.set(!0)})}updateArticleViews(e){this.articleSrv.updateArticleViews(e).pipe((0,g.sL)(this._destroyRef)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article"]],standalone:!0,features:[t._Bn([(0,H.kp)({heroCalendarDays:Y.mVh,heroHashtag:Y.u2C,heroTag:Y.PRH})]),t.jDz],decls:6,vars:2,consts:[[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"text-xl","font-semibold"],[1,"flex","items-center"],["name","heroCalendarDays"],[1,"flex","items-center","link","link-secondary",3,"routerLink"],["name","heroHashtag"],[1,"divider","my-1"],[1,"ck-content",3,"innerHTML"],[1,"py-5"],[1,"divider","my-5"],["class","flex items-center",4,"ngFor","ngForOf"],["class","h-5 my-3 w-full rounded-lg bg-slate-300/10 relative before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:border-t before:border-slate-300/10 before:bg-gradient-to-r before:from-transparent before:bg-slate-300/10 before:to-transparent overflow-hidden",4,"ngFor","ngForOf"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[3,"refresh"]],template:function(e,d){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,I,2,2,"ng-container",1),t.YNc(2,a,5,4,"ng-template",null,2,t.W1O),t.YNc(4,i,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&e){const p=t.MAs(5);t.xp6(1),t.Q6J("ngIf",!d.isError())("ngIfElse",p)}},dependencies:[D.ez,D.sg,D.O5,j.q,H.Fv,J.g,b.rH,z.y,U]}),n})()},8884:(L,_,c)=>{"use strict";c.d(_,{n:()=>g});var t=c(3144),D=c(3020),v=c(2340);let g=(()=>{class m{constructor(){this.http=(0,D.f3M)(t.eN)}getArticle(f){if(f){const M=(new t.LE).append("page",f);return this.http.get(`${v.N.baseUrl}/article`,{params:M})}return this.http.get(`${v.N.baseUrl}/article`)}getArticleById(f){return this.http.get(`${v.N.baseUrl}/article/${f}`)}createArticle(f){return this.http.post(`${v.N.baseUrl}/article`,f)}updateArticle(f){return this.http.patch(`${v.N.baseUrl}/article/${f.articleId}`,f)}deleteArticle(f){return this.http.delete(`${v.N.baseUrl}/article/${f}`)}updateArticleViews(f){return this.http.patch(`${v.N.baseUrl}/article/updateArticleViews/${f}`,{})}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275prov=D.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8028:(L,_,c)=>{"use strict";c.d(_,{q:()=>v});var t=c(3020),D=c(5512);let v=(()=>{class g{constructor(){this.errorOptions={path:"assets/lottie/error-404.json"},this.refreshEmitter=new t.vpe}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-error"]],outputs:{refreshEmitter:"refresh"},standalone:!0,features:[t.jDz],decls:5,vars:1,consts:[[3,"options"],[1,"flex","justify-center","items-center"],[1,"btn","btn-warning",3,"click"]],template:function(y,f){1&y&&(t.TgZ(0,"div"),t._UZ(1,"ng-lottie",0),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return f.refreshEmitter.emit(!0)}),t._uU(4,"\u91cd\u65b0\u6574\u7406"),t.qZA()()()),2&y&&(t.xp6(1),t.Q6J("options",f.errorOptions))},dependencies:[D.r]}),g})()},3665:(L,_,c)=>{"use strict";c.d(_,{g:()=>g});var t=c(1764),v=c(3020);let g=(()=>{class m{transform(f,M){return t(f).format(M)}}return m.\u0275fac=function(f){return new(f||m)},m.\u0275pipe=v.Yjl({name:"dayJs",type:m,pure:!0,standalone:!0}),m})()},1764:function(L){L.exports=function(){"use strict";var c=6e4,t=36e5,D="millisecond",v="second",g="minute",m="hour",y="day",f="week",M="month",R="quarter",b="year",T="date",w="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,H=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var s=["th","st","nd","rd"],r=o%100;return"["+o+(s[(r-20)%10]||s[r]||s[0])+"]"}},J=function(o,s,r){var a=String(o);return!a||a.length>=s?o:""+Array(s+1-a.length).join(r)+o},z={s:J,z:function(o){var s=-o.utcOffset(),r=Math.abs(s),a=Math.floor(r/60),i=r%60;return(s<=0?"+":"-")+J(a,2,"0")+":"+J(i,2,"0")},m:function o(s,r){if(s.date()<r.date())return-o(r,s);var a=12*(r.year()-s.year())+(r.month()-s.month()),i=s.clone().add(a,M),u=r-i<0,n=s.clone().add(a+(u?-1:1),M);return+(-(a+(r-i)/(u?i-n:n-i))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M,y:b,w:f,d:y,D:T,h:m,m:g,s:v,ms:D,Q:R}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return void 0===o}},E="en",O={};O[E]=Y;var N=function(o){return o instanceof I},U=function o(s,r,a){var i;if(!s)return E;if("string"==typeof s){var u=s.toLowerCase();O[u]&&(i=u),r&&(O[u]=r,i=u);var n=s.split("-");if(!i&&n.length>1)return o(n[0])}else{var l=s.name;O[l]=s,i=l}return!a&&i&&(E=i),i||!a&&E},$=function(o,s){if(N(o))return o.clone();var r="object"==typeof s?s:{};return r.date=o,r.args=arguments,new I(r)},h=z;h.l=U,h.i=N,h.w=function(o,s){return $(o,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var I=function(){function o(r){this.$L=U(r.locale,null,!0),this.parse(r)}var s=o.prototype;return s.parse=function(r){this.$d=function(a){var i=a.date,u=a.utc;if(null===i)return new Date(NaN);if(h.u(i))return new Date;if(i instanceof Date)return new Date(i);if("string"==typeof i&&!/Z$/i.test(i)){var n=i.match(j);if(n){var l=n[2]-1||0,e=(n[7]||"0").substring(0,3);return u?new Date(Date.UTC(n[1],l,n[3]||1,n[4]||0,n[5]||0,n[6]||0,e)):new Date(n[1],l,n[3]||1,n[4]||0,n[5]||0,n[6]||0,e)}}return new Date(i)}(r),this.$x=r.x||{},this.init()},s.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},s.$utils=function(){return h},s.isValid=function(){return this.$d.toString()!==w},s.isSame=function(r,a){var i=$(r);return this.startOf(a)<=i&&i<=this.endOf(a)},s.isAfter=function(r,a){return $(r)<this.startOf(a)},s.isBefore=function(r,a){return this.endOf(a)<$(r)},s.$g=function(r,a,i){return h.u(r)?this[a]:this.set(i,r)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(r,a){var i=this,u=!!h.u(a)||a,n=h.p(r),l=function(Z,A){var x=h.w(i.$u?Date.UTC(i.$y,A,Z):new Date(i.$y,A,Z),i);return u?x:x.endOf(y)},e=function(Z,A){return h.w(i.toDate()[Z].apply(i.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(A)),i)},d=this.$W,p=this.$M,S=this.$D,C="set"+(this.$u?"UTC":"");switch(n){case b:return u?l(1,0):l(31,11);case M:return u?l(1,p):l(0,p+1);case f:var W=this.$locale().weekStart||0,F=(d<W?d+7:d)-W;return l(u?S-F:S+(6-F),p);case y:case T:return e(C+"Hours",0);case m:return e(C+"Minutes",1);case g:return e(C+"Seconds",2);case v:return e(C+"Milliseconds",3);default:return this.clone()}},s.endOf=function(r){return this.startOf(r,!1)},s.$set=function(r,a){var i,u=h.p(r),n="set"+(this.$u?"UTC":""),l=(i={},i[y]=n+"Date",i[T]=n+"Date",i[M]=n+"Month",i[b]=n+"FullYear",i[m]=n+"Hours",i[g]=n+"Minutes",i[v]=n+"Seconds",i[D]=n+"Milliseconds",i)[u],e=u===y?this.$D+(a-this.$W):a;if(u===M||u===b){var d=this.clone().set(T,1);d.$d[l](e),d.init(),this.$d=d.set(T,Math.min(this.$D,d.daysInMonth())).$d}else l&&this.$d[l](e);return this.init(),this},s.set=function(r,a){return this.clone().$set(r,a)},s.get=function(r){return this[h.p(r)]()},s.add=function(r,a){var i,u=this;r=Number(r);var n=h.p(a),l=function(p){var S=$(u);return h.w(S.date(S.date()+Math.round(p*r)),u)};if(n===M)return this.set(M,this.$M+r);if(n===b)return this.set(b,this.$y+r);if(n===y)return l(1);if(n===f)return l(7);var e=(i={},i[g]=c,i[m]=t,i[v]=1e3,i)[n]||1,d=this.$d.getTime()+r*e;return h.w(d,this)},s.subtract=function(r,a){return this.add(-1*r,a)},s.format=function(r){var a=this,i=this.$locale();if(!this.isValid())return i.invalidDate||w;var u=r||"YYYY-MM-DDTHH:mm:ssZ",n=h.z(this),l=this.$H,e=this.$m,d=this.$M,p=i.weekdays,S=i.months,C=function(A,x,Q,B){return A&&(A[x]||A(a,u))||Q[x].slice(0,B)},W=function(A){return h.s(l%12||12,A,"0")},F=i.meridiem||function(A,x,Q){var B=A<12?"AM":"PM";return Q?B.toLowerCase():B},Z={YY:String(this.$y).slice(-2),YYYY:this.$y,M:d+1,MM:h.s(d+1,2,"0"),MMM:C(i.monthsShort,d,S,3),MMMM:C(S,d),D:this.$D,DD:h.s(this.$D,2,"0"),d:String(this.$W),dd:C(i.weekdaysMin,this.$W,p,2),ddd:C(i.weekdaysShort,this.$W,p,3),dddd:p[this.$W],H:String(l),HH:h.s(l,2,"0"),h:W(1),hh:W(2),a:F(l,e,!0),A:F(l,e,!1),m:String(e),mm:h.s(e,2,"0"),s:String(this.$s),ss:h.s(this.$s,2,"0"),SSS:h.s(this.$ms,3,"0"),Z:n};return u.replace(H,function(A,x){return x||Z[A]||n.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(r,a,i){var u,n=h.p(a),l=$(r),e=(l.utcOffset()-this.utcOffset())*c,d=this-l,p=h.m(this,l);return p=(u={},u[b]=p/12,u[M]=p,u[R]=p/3,u[f]=(d-e)/6048e5,u[y]=(d-e)/864e5,u[m]=d/t,u[g]=d/c,u[v]=d/1e3,u)[n]||d,i?p:h.a(p)},s.daysInMonth=function(){return this.endOf(M).$D},s.$locale=function(){return O[this.$L]},s.locale=function(r,a){if(!r)return this.$L;var i=this.clone(),u=U(r,a,!0);return u&&(i.$L=u),i},s.clone=function(){return h.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},o}(),P=I.prototype;return $.prototype=P,[["$ms",D],["$s",v],["$m",g],["$H",m],["$W",y],["$M",M],["$y",b],["$D",T]].forEach(function(o){P[o[1]]=function(s){return this.$g(s,o[0],o[1])}}),$.extend=function(o,s){return o.$i||(o(s,I,$),o.$i=!0),$},$.locale=U,$.isDayjs=N,$.unix=function(o){return $(1e3*o)},$.en=O[E],$.Ls=O,$.p={},$}()}}]);