"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[857],{8857:(K,c,r)=>{r.r(c),r.d(c,{LabelComponent:()=>B});var e=r(9523),l=r(4755),p=r(6736),g=r(5796),d=r(9841),h=r(9300),m=r(262),u=r(8746),E=r(3757),f=r(9415),C=r(3500),M=r(8028),b=r(7915),L=r(4217),v=r(4544),O=r(6935);const P=function(a,s){return{categoryId:a,categoryName:s}};function D(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-article-card",6),e.NdJ("category",function(n){e.CHM(t);const _=e.oxw(3);return e.KtG(_.navigateCategory(n))})("label",function(n){e.CHM(t);const _=e.oxw(3);return e.KtG(_.navigateLabel(n))})("showMore",function(){const _=e.CHM(t).$implicit,i=e.oxw(3);return e.KtG(i.showMore(_.articleId))}),e.qZA()}if(2&a){const t=s.$implicit;e.Q6J("title",t.articleTitle)("date",t.createDate)("category",e.WLB(5,P,t.categoryId,t.categoryName))("labels",t.labels)("previewContent",t.previewContent)}}function I(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",4)(2,"h3"),e._uU(3),e.qZA()(),e.YNc(4,D,1,8,"app-article-card",5),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.hij("\u4ee5\u4e0b\u662f",t.label(),"\u7684\u641c\u5c0b\u7d50\u679c\uff1a"),e.xp6(1),e.Q6J("ngForOf",t.articles())}}function x(a,s){if(1&a&&(e.ynx(0),e.YNc(1,I,5,2,"ng-container",0),e.BQk()),2&a){const t=e.oxw(),o=e.MAs(2);e.xp6(1),e.Q6J("ngIf",!t.isLoading())("ngIfElse",o)}}function T(a,s){1&a&&e._UZ(0,"app-loading-keyword")(1,"app-loading-card")(2,"app-loading-card")(3,"app-loading-card")}function y(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",7)(1,"app-error",8),e.NdJ("refresh",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.searchLabel(n.labelId(),n.page()))}),e.qZA()()}}let B=(()=>{class a{constructor(){this.route=(0,e.f3M)(g.gz),this.router=(0,e.f3M)(g.F0),this.searchSrv=(0,e.f3M)(E.o),this.sharedSrv=(0,e.f3M)(C.F),this.label=(0,e.tdS)(""),this.labelId=(0,e.tdS)(void 0),this.total=(0,e.tdS)(0),this.articles=(0,e.tdS)([]),this.isLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this.page=(0,e.tdS)(1),this._destroyRef=(0,e.f3M)(e.ktI)}ngOnInit(){(0,d.a)([this.route.paramMap,this.route.queryParamMap]).pipe((0,h.h)(([t])=>!(!t.get("id")||isNaN(parseInt(t.get("id"))))||(this.router.navigate(["blog"]),!1)),(0,p.sL)(this._destroyRef)).subscribe(([t,o])=>{const n=parseInt(t.get("id"));this.labelId.set(n);const _=o.get("page"),i=_?parseInt(_):1;this.page.set(isNaN(i)?1:i),this.searchLabel(n,this.page())})}searchLabel(t,o){this.isError.set(!1),this.isLoading.set(!0),this.searchSrv.label(t,o).pipe((0,m.K)(n=>{throw this.isError.set(!0),n}),(0,u.x)(()=>this.isLoading.set(!1)),(0,p.sL)(this._destroyRef)).subscribe(n=>{if(this.sharedSrv.ifSuccess(n,!1)){const{data:{total:_,articles:i,keyword:A}}=n;this.total.set(_),this.articles.set(i),this.label.set(A)}else n.returnCode===f.N.NotFound?this.router.navigate(["blog","notFound"]):this.isError.set(!0)})}showMore(t){this.router.navigateByUrl(`/blog/article/${t}`)}navigateCategory({categoryId:t}){this.router.navigateByUrl(`/blog/category/${t}`)}navigateLabel({labelId:t}){this.router.navigateByUrl(`/blog/label/${t}`)}paginationChange(t){this.router.navigate(["blog","label",this.labelId()],{queryParams:{page:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-label"]],standalone:!0,features:[e.jDz],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[3,"total","currentPage","change"],[1,"p-5","bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","mb-5"],[3,"title","date","category","labels","previewContent","label","showMore",4,"ngFor","ngForOf"],[3,"title","date","category","labels","previewContent","label","showMore"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(t,o){if(1&t&&(e.YNc(0,x,2,2,"ng-container",0),e.YNc(1,T,4,0,"ng-template",null,1,e.W1O),e.YNc(3,y,2,0,"ng-template",null,2,e.W1O),e.TgZ(5,"app-pagination",3),e.NdJ("change",function(_){return o.paginationChange(_)}),e.qZA()),2&t){const n=e.MAs(4);e.Q6J("ngIf",!o.isError())("ngIfElse",n),e.xp6(5),e.Q6J("total",o.total())("currentPage",o.page())}},dependencies:[l.ez,l.sg,l.O5,M.q,b.Q,L.o,v.g,O.y]}),a})()}}]);