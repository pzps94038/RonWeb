"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[458],{8458:(P,a,o)=>{o.r(a),o.d(a,{LoginComponent:()=>O});var d=o(5855),t=o(9416),l=o(4755),g=o(6355),n=o(9401),m=o(5512),p=o(5112),c=o(262),f=o(8746),u=o(2993),v=o(5249),h=o(1415),E=o(7929),M=o(4052);function C(r,_){if(1&r){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"span",14),t._uU(3),t.qZA()(),t.TgZ(4,"ng-icon",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.errMsg.set(""))}),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(3),t.Oqu(e.errMsg())}}let O=(()=>{class r{constructor(){this.loginSrv=(0,t.f3M)(p.r),this.apiSrv=(0,t.f3M)(E.s),this.userSrv=(0,t.f3M)(M.K),this.router=(0,t.f3M)(h.F0),this.loading=(0,t.tdS)(!1),this.errMsg=(0,t.tdS)(void 0),this._destroyRef=(0,t.f3M)(t.ktI),this.form=new n.cw({account:new n.NI("",[n.kI.required]),password:new n.NI("",[n.kI.required])}),this.loginOptions={path:"assets/lottie/login.json"}}submit(){this.form.markAllAsTouched(),!this.form.invalid&&(this.loading.set(!0),this.loginSrv.login({account:this.form.controls.account.value,password:this.form.controls.password.value}).pipe((0,c.K)(e=>{throw this.errMsg.set("\u7cfb\u7d71\u767c\u751f\u932f\u8aa4"),e}),(0,f.x)(()=>this.loading.set(!1)),(0,d.sL)(this._destroyRef)).subscribe(e=>{const{returnMessage:s,data:i}=e;if(this.apiSrv.ifSuccess(e,!1)){const{token:D,userId:T}=i;this.userSrv.setToken(D),this.userSrv.setUserId(T),this.userSrv.isLogin.set(!0),this.router.navigate(["setting"])}else this.errMsg.set(s)}))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-login"]],standalone:!0,features:[t._Bn([(0,u.kp)({heroXMark:v.CZj})]),t.jDz],decls:16,vars:6,consts:[[1,"bg-banner","bg-cover","bg-fixed","h-screen","flex","justify-center","items-center"],[1,"bg-base-100","text-base-content","rounded-md","mt-20","md:mt-0","mx-5"],[1,"text-center","text-3xl","font-semibold","my-3"],[1,"w-60","mx-auto"],[3,"options"],[1,"flex","flex-wrap","items-center","w-full","sm:w-[500px]",3,"formGroup","ngSubmit"],[1,"w-full","px-3","my-2"],["class","alert alert-error shadow-lg border-2 bg-rose-800/[0.1] border-rose-900 relative py-5",4,"ngIf"],["placeholder","\u8acb\u8f38\u5165\u5e33\u865f","formControlName","account",1,"w-full"],["type","password","placeholder","\u8acb\u8f38\u5165\u5bc6\u78bc","formControlName","password",1,"w-full"],[1,"w-full","flex","justify-center","items-center"],["type","submit",1,"btn","btn-primary","my-3","px-8",3,"disabled"],[1,"alert","alert-error","shadow-lg","border-2","bg-rose-800/[0.1]","border-rose-900","relative","py-5"],[1,"absolute","left-5","top-2"],[1,"text-base","font-semibold","text-rose-900"],["name","heroXMark",1,"cursor-pointer","absolute","right-5","top-1","md:top-3","text-rose-900",3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3,"\u767b\u5165"),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"ng-lottie",4),t.qZA(),t.TgZ(6,"form",5),t.NdJ("ngSubmit",function(){return s.submit()}),t.TgZ(7,"div",6),t.YNc(8,C,5,1,"div",7),t.qZA(),t.TgZ(9,"div",6),t._UZ(10,"app-input",8),t.qZA(),t.TgZ(11,"div",6),t._UZ(12,"app-input",9),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t._uU(15," \u767b\u5165 "),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("options",s.loginOptions),t.xp6(1),t.Q6J("formGroup",s.form),t.xp6(2),t.Q6J("ngIf",s.errMsg()),t.xp6(6),t.ekj("loading",s.loading()),t.Q6J("disabled",s.loading()))},dependencies:[l.ez,l.O5,g.a,n.UX,n._Y,n.JJ,n.JL,n.sg,n.u,m.r,u.Fv]}),r})()}}]);