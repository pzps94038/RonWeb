"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[499],{499:(x,g,n)=>{n.r(g),n.d(g,{CategoryComponent:()=>W});var p=n(9079),t=n(4438),l=n(177),d=n(4366),h=n(4014),m=n(4572),C=n(5964),E=n(980),u=n(3181),y=n(9584),v=n(8403),f=n(8255),P=n(7113),I=n(6147),M=n(7343),D=n(2656);const O=(r,s)=>({categoryId:r,categoryName:s});function b(r,s){if(1&r){const a=t.RV6();t.j41(0,"app-article-card",6),t.bIt("category",function(o){t.eBV(a);const _=t.XpG(3);return t.Njj(_.navigateCategory(o))})("label",function(o){t.eBV(a);const _=t.XpG(3);return t.Njj(_.navigateLabel(o))})("showMore",function(){const o=t.eBV(a).$implicit,_=t.XpG(3);return t.Njj(_.showMore(o.articleId))}),t.k0s()}if(2&r){const a=s.$implicit;t.Y8G("articleId",a.articleId)("title",a.articleTitle)("date",a.createDate)("category",t.l_i(6,O,a.categoryId,a.categoryName))("labels",a.labels)("previewContent",a.previewContent)}}function B(r,s){if(1&r&&(t.qex(0),t.j41(1,"div",4)(2,"h3"),t.EFF(3),t.k0s()(),t.DNE(4,b,1,9,"app-article-card",5),t.bVm()),2&r){const a=t.XpG(2);t.R7$(3),t.SpI("\u4ee5\u4e0b\u662f",a.category(),"\u7684\u641c\u5c0b\u7d50\u679c\uff1a"),t.R7$(),t.Y8G("ngForOf",a.articles())}}function T(r,s){if(1&r&&(t.qex(0),t.DNE(1,B,5,2,"ng-container",2),t.bVm()),2&r){const a=t.XpG(),e=t.sdS(2);t.R7$(),t.Y8G("ngIf",!a.isLoading())("ngIfElse",e)}}function R(r,s){1&r&&t.nrm(0,"app-loading-keyword")(1,"app-loading-card")(2,"app-loading-card")(3,"app-loading-card")}function A(r,s){if(1&r){const a=t.RV6();t.j41(0,"div",7)(1,"app-error",8),t.bIt("refresh",function(){t.eBV(a);const o=t.XpG();return t.Njj(o.searchCategory(o.categoryId(),o.page()))}),t.k0s()()}}let W=(()=>{var r;class s{constructor(){this.route=(0,t.WQX)(d.nX),this.router=(0,t.WQX)(d.Ix),this.searchSrv=(0,t.WQX)(u.S),this.apiSrv=(0,t.WQX)(M.G),this.codeBlockSrv=(0,t.WQX)(D.G),this.category=(0,t.vPA)(""),this.categoryId=(0,t.vPA)(void 0),this.total=(0,t.vPA)(0),this.articles=(0,t.vPA)([]),this.isLoading=(0,t.vPA)(!1),this.isError=(0,t.vPA)(!1),this.page=(0,t.vPA)(1),this._destroyRef=(0,t.WQX)(t.abz)}ngOnInit(){(0,m.z)([this.route.paramMap,this.route.queryParamMap]).pipe((0,C.p)(([e])=>!(!e.get("id")||isNaN(parseInt(e.get("id"))))||(this.router.navigate(["blog"]),!1)),(0,p.pQ)(this._destroyRef)).subscribe(([e,o])=>{const _=parseInt(e.get("id"));this.categoryId.set(_);const c=o.get("page"),i=c?parseInt(c):1;this.page.set(isNaN(i)?1:i),this.searchCategory(_,this.page())})}searchCategory(e,o){this.isError.set(!1),this.isLoading.set(!0),this.searchSrv.category(e,o).pipe((0,E.j)(()=>this.isLoading.set(!1)),(0,p.pQ)(this._destroyRef)).subscribe({next:_=>{if(this.apiSrv.ifSuccess(_,!1)){const{data:{total:c,articles:i,keyword:L}}=_;this.total.set(c),this.articles.set(i),this.category.set(L),this.codeBlockSrv.highlightAllBlock()}else _.returnCode===P.M.NotFound?this.router.navigate(["blog","notFound"]):this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}showMore(e){this.router.navigateByUrl("/blog/article/".concat(e))}navigateCategory({categoryId:e}){this.router.navigateByUrl("/blog/category/".concat(e))}navigateLabel({labelId:e}){this.router.navigateByUrl("/blog/label/".concat(e))}paginationChange(e){this.router.navigate(["blog","category",this.categoryId()],{queryParams:{page:e}})}}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.VBU({type:r,selectors:[["app-category"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[["loading",""],["error",""],[4,"ngIf","ngIfElse"],[3,"change","total","currentPage"],[1,"p-5","bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","mb-5"],[3,"articleId","title","date","category","labels","previewContent","label","showMore",4,"ngFor","ngForOf"],[3,"category","label","showMore","articleId","title","date","labels","previewContent"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,o){if(1&e){const _=t.RV6();t.DNE(0,T,2,2,"ng-container",2)(1,R,4,0,"ng-template",null,0,t.C5r)(3,A,2,0,"ng-template",null,1,t.C5r),t.j41(5,"app-pagination",3),t.bIt("change",function(i){return t.eBV(_),t.Njj(o.paginationChange(i))}),t.k0s()}if(2&e){const _=t.sdS(4);t.Y8G("ngIf",!o.isError())("ngIfElse",_),t.R7$(5),t.Y8G("total",o.total())("currentPage",o.page())}},dependencies:[l.MD,l.Sq,l.bT,h.e,v.O,y.A,I.z,f.G]}),s})()}}]);