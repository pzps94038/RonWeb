"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[824],{6824:(B,A,e)=>{e.r(A),e.d(A,{ArticleDetailComponent:()=>F});var u=e(9417),t=e(4438),p=e(177),E=e(4702),D=e(4453),d=e(4366),_=e(9584),C=e(4014),n=e(2183),o=e(9079),c=e(980),f=e(5964),m=e(5558),M=e(9478),h=e(7343),g=e(19),P=e(2803);const j=i=>["/setting","article","edit",i],R=()=>[1,2,3,4,5];function O(i,v){if(1&i){const r=t.RV6();t.j41(0,"tr")(1,"th",14)(2,"a",15),t.nrm(3,"ng-icon",16),t.k0s(),t.j41(4,"button",17),t.bIt("click",function(){const s=t.eBV(r).$implicit,l=t.XpG(3);return t.Njj(l.deleteArticle(s.articleId))}),t.nrm(5,"ng-icon",18),t.k0s()(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.k0s(),t.j41(14,"td"),t.EFF(15),t.nI1(16,"dayJs"),t.k0s()()}if(2&i){const r=v.$implicit;t.R7$(2),t.Y8G("routerLink",t.eq3(9,j,r.articleId)),t.R7$(5),t.JRh(r.articleTitle),t.R7$(2),t.JRh(r.categoryName),t.R7$(2),t.JRh(r.flag),t.R7$(2),t.JRh(r.viewCount),t.R7$(2),t.JRh(t.i5U(16,6,r.createDate,"YYYY/MM/DD"))}}function y(i,v){if(1&i){const r=t.RV6();t.qex(0),t.j41(1,"div",3)(2,"div",4)(3,"div",5)(4,"app-input",6),t.mxI("ngModelChange",function(s){t.eBV(r);const l=t.XpG(2);return t.DH7(l.keyword,s)||(l.keyword=s),t.Njj(s)}),t.k0s()(),t.j41(5,"button",7),t.bIt("click",function(){t.eBV(r);const s=t.XpG(2);return t.Njj(s.search())}),t.EFF(6," \u641c\u5c0b "),t.k0s()(),t.j41(7,"button",8),t.EFF(8,"\u65b0\u589e\u6587\u7ae0"),t.k0s()(),t.j41(9,"div",9)(10,"table",10)(11,"thead")(12,"tr"),t.nrm(13,"th"),t.j41(14,"th",11),t.EFF(15,"\u6587\u7ae0\u6a19\u984c"),t.k0s(),t.j41(16,"th",11),t.EFF(17,"\u5206\u985e"),t.k0s(),t.j41(18,"th",11),t.EFF(19,"\u555f\u7528"),t.k0s(),t.j41(20,"th",11),t.EFF(21,"\u700f\u89bd\u6b21\u6578"),t.k0s(),t.j41(22,"th",11),t.EFF(23,"\u5efa\u7acb\u65e5\u671f"),t.k0s()()(),t.j41(24,"tbody"),t.DNE(25,O,17,11,"tr",12),t.k0s()()(),t.j41(26,"app-pagination",13),t.bIt("change",function(s){t.eBV(r);const l=t.XpG(2);return t.Njj(l.paginationChange(s))}),t.k0s(),t.bVm()}if(2&i){const r=t.XpG(2);t.R7$(4),t.R50("ngModel",r.keyword),t.R7$(21),t.Y8G("ngForOf",r.articles()),t.R7$(),t.Y8G("total",r.total())("currentPage",r.page())}}function I(i,v){if(1&i&&(t.qex(0),t.DNE(1,y,27,4,"ng-container",2),t.bVm()),2&i){const r=t.XpG(),a=t.sdS(2);t.R7$(),t.Y8G("ngIf",!r.isLoading())("ngIfElse",a)}}function W(i,v){1&i&&(t.j41(0,"tr")(1,"td"),t.nrm(2,"div",19),t.k0s(),t.j41(3,"td"),t.nrm(4,"div",19),t.k0s(),t.j41(5,"td"),t.nrm(6,"div",19),t.k0s(),t.j41(7,"td"),t.nrm(8,"div",19),t.k0s(),t.j41(9,"td"),t.nrm(10,"div",19),t.k0s(),t.j41(11,"td"),t.nrm(12,"div",19),t.k0s()())}function b(i,v){if(1&i){const r=t.RV6();t.j41(0,"div",9)(1,"table",10)(2,"tbody")(3,"tr"),t.nrm(4,"td"),t.j41(5,"td",11),t.EFF(6,"\u6587\u7ae0\u6a19\u984c"),t.k0s(),t.j41(7,"td",11),t.EFF(8,"\u5206\u985e"),t.k0s(),t.j41(9,"td",11),t.EFF(10,"\u555f\u7528"),t.k0s(),t.j41(11,"td",11),t.EFF(12,"\u700f\u89bd\u6b21\u6578"),t.k0s(),t.j41(13,"td",11),t.EFF(14,"\u5efa\u7acb\u65e5\u671f"),t.k0s()(),t.DNE(15,W,13,0,"tr",12),t.k0s()()(),t.j41(16,"app-pagination",13),t.bIt("change",function(s){t.eBV(r);const l=t.XpG();return t.Njj(l.paginationChange(s))}),t.k0s()}if(2&i){const r=t.XpG();t.R7$(15),t.Y8G("ngForOf",t.lJ4(3,R)),t.R7$(),t.Y8G("total",r.total())("currentPage",r.page())}}function T(i,v){if(1&i){const r=t.RV6();t.j41(0,"div",20)(1,"app-error",21),t.bIt("refresh",function(){t.eBV(r);const s=t.XpG();return t.Njj(s.getArticle(s.page(),s.queryKeyword))}),t.k0s()()}}let F=(()=>{var i;class v{constructor(){this.articleSrv=(0,t.WQX)(P.N),this.apiSrv=(0,t.WQX)(h.G),this.swalSrv=(0,t.WQX)(M.X),this.route=(0,t.WQX)(d.nX),this.router=(0,t.WQX)(d.Ix),this.total=(0,t.vPA)(0),this.articles=(0,t.vPA)([]),this.isLoading=(0,t.vPA)(!1),this.isError=(0,t.vPA)(!1),this.page=(0,t.vPA)(1),this._destroyRef=(0,t.WQX)(t.abz)}ngOnInit(){this.route.queryParamMap.pipe((0,o.pQ)(this._destroyRef)).subscribe(a=>{const s=a.get("page"),l=a.get("keyword")?a.get("keyword"):void 0,x=s?parseInt(s):1;this.page.set(isNaN(x)?1:x),this.queryKeyword=l,this.getArticle(this.page(),l)})}getArticle(a,s){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(a,s).pipe((0,c.j)(()=>this.isLoading.set(!1)),(0,o.pQ)(this._destroyRef)).subscribe({next:l=>{if(this.apiSrv.ifSuccess(l,!1)){const{data:{total:x,articles:S}}=l;this.total.set(x),this.articles.set(S)}else this.isError.set(!0)},error:()=>{this.isError.set(!0)}})}paginationChange(a){this.router.navigate(["/setting/article/detail"],{queryParams:{page:a,keyword:this.queryKeyword?this.queryKeyword:void 0}})}deleteArticle(a){this.swalSrv.confirm({text:"\u78ba\u5b9a\u8981\u522a\u9664\u6587\u7ae0\u55ce?"}).pipe((0,f.p)(({isConfirmed:s})=>s),(0,m.n)(()=>this.articleSrv.deleteArticle(a)),(0,f.p)(s=>this.apiSrv.ifSuccess(s)),(0,m.n)(s=>this.swalSrv.alert({icon:M.J.Success,text:s.returnMessage})),(0,o.pQ)(this._destroyRef)).subscribe(()=>this.paginationChange(1))}search(){this.queryKeyword=this.keyword,this.paginationChange(1)}}return(i=v).\u0275fac=function(a){return new(a||i)},i.\u0275cmp=t.VBU({type:i,selectors:[["app-article-detail"]],standalone:!0,features:[t.Jv_([(0,E.EB)({heroPencilSquare:D.r6l,heroTrash:D.dmW})]),t.aNF],decls:5,vars:2,consts:[["loading",""],["error",""],[4,"ngIf","ngIfElse"],[1,"flex","justify-between","flex-wrap"],[1,"flex","w-full","mb-5","md:w-1/2","lg:w-1/3"],[1,"w-10/12"],["type","search","placeholder","\u641c\u5c0b\u95dc\u9375\u5b57","inputmode","search",1,"w-full",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","mx-2","w-3/12","sm:w-2/12","md:w-3/12",3,"click"],["routerLink","/setting/article/create",1,"btn","btn-primary","mb-5"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"change","total","currentPage"],[1,"flex"],[1,"btn","btn-primary","m-1","flex","justify-center","items-center",3,"routerLink"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(a,s){if(1&a&&t.DNE(0,I,2,2,"ng-container",2)(1,b,17,4,"ng-template",null,0,t.C5r)(3,T,2,0,"ng-template",null,1,t.C5r),2&a){const l=t.sdS(4);t.Y8G("ngIf",!s.isError())("ngIfElse",l)}},dependencies:[p.MD,p.Sq,p.bT,E.Uq,_.A,C.e,n.s,d.Wk,u.YN,u.BC,u.vS,g.S]}),v})()},2803:(B,A,e)=>{e.d(A,{N:()=>D});var u=e(9785),t=e(4438),p=e(5312),E=e(3994);let D=(()=>{var d;class _{constructor(){this.http=(0,t.WQX)(u.Qq),this.transferSrv=(0,t.WQX)(E.N)}getArticle(n,o){let c=new u.Nl;return n&&(c=c.append("page",n)),o&&(c=c.append("keyword",o)),this.http.get("".concat(p.c.baseUrl,"/adminArticle"),{params:c})}getArticleById(n){return this.http.get("".concat(p.c.baseUrl,"/adminArticle/").concat(n))}createArticle(n){return this.http.post("".concat(p.c.baseUrl,"/adminArticle"),n)}updateArticle(n){return this.http.patch("".concat(p.c.baseUrl,"/adminArticle/").concat(n.articleId),n)}deleteArticle(n){return this.http.delete("".concat(p.c.baseUrl,"/adminArticle/").concat(n))}}return(d=_).\u0275fac=function(n){return new(n||d)},d.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),_})()},3994:(B,A,e)=>{e.d(A,{N:()=>d});var u=e(4438),t=e(9819),p=e(7673),E=e(8141),D=e(9568);let d=(()=>{var _;class C{constructor(){this.transferState=(0,u.WQX)(u.pJN),this.deviceSrv=(0,u.WQX)(t.g)}transfer(o,c,f=!0){const m=(0,u.zw6)(o);if(this.transferState.hasKey(m)&&f){const M=this.transferState.get(m,void 0);return(0,p.of)(M)}return c().pipe((0,E.M)(h=>{this.deviceSrv.isServer&&this.transferState.set(m,h)}),(0,D.t)())}}return(_=C).\u0275fac=function(o){return new(o||_)},_.\u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),C})()},9568:(B,A,e)=>{e.d(A,{t:()=>C});var u=e(2771),t=e(8750),p=e(1413),E=e(7707),D=e(9974);function _(n,o,...c){if(!0===o)return void n();if(!1===o)return;const f=new E.Ms({next:()=>{f.unsubscribe(),n()}});return(0,t.Tg)(o(...c)).subscribe(f)}function C(n,o,c){let f,m=!1;return n&&"object"==typeof n?({bufferSize:f=1/0,windowTime:o=1/0,refCount:m=!1,scheduler:c}=n):f=null!=n?n:1/0,function d(n={}){const{connector:o=(()=>new p.B),resetOnError:c=!0,resetOnComplete:f=!0,resetOnRefCountZero:m=!0}=n;return M=>{let h,g,P,j=0,R=!1,O=!1;const y=()=>{null==g||g.unsubscribe(),g=void 0},I=()=>{y(),h=P=void 0,R=O=!1},W=()=>{const b=h;I(),null==b||b.unsubscribe()};return(0,D.N)((b,T)=>{j++,!O&&!R&&y();const F=P=null!=P?P:o();T.add(()=>{j--,0===j&&!O&&!R&&(g=_(W,m))}),F.subscribe(T),!h&&j>0&&(h=new E.Ms({next:i=>F.next(i),error:i=>{O=!0,y(),g=_(I,c,i),F.error(i)},complete:()=>{R=!0,y(),g=_(I,f),F.complete()}}),(0,t.Tg)(b).subscribe(h))})(M)}}({connector:()=>new u.m(f,o,c),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:m})}}}]);