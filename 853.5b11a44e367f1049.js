"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[853],{853:(y,l,i)=>{i.r(l),i.d(l,{ArticleDetailComponent:()=>B});var t=i(3020),s=i(4755),g=i(2993),u=i(5249),p=i(9148),A=i(3772),m=i(3556),E=i(3665),c=i(508),Z=i(262),T=i(8746),d=i(9300),h=i(3900),D=i(8884),x=i(3500),f=i(9096);function M(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",9)(2,"button",10),t._UZ(3,"ng-icon",11),t.qZA(),t.TgZ(4,"button",12),t.NdJ("click",function(){const _=t.CHM(e).$implicit,I=t.oxw(3);return t.KtG(I.deleteArticle(_.articleId))}),t._UZ(5,"ng-icon",13),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"dayJs"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(7),t.Oqu(e.articleTitle),t.xp6(2),t.Oqu(e.categoryName),t.xp6(2),t.Oqu(e.viewCount),t.xp6(2),t.Oqu(t.xi3(14,4,e.createDate,"YYYY/MM/DD hh:mm"))}}function C(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",3),t._uU(2,"\u65b0\u589e\u6587\u7ae0"),t.qZA(),t.TgZ(3,"div",4)(4,"table",5)(5,"thead")(6,"tr"),t._UZ(7,"th"),t.TgZ(8,"th",6),t._uU(9,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(10,"th",6),t._uU(11,"\u5206\u985e"),t.qZA(),t.TgZ(12,"th",6),t._uU(13,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(14,"th",6),t._uU(15,"\u5efa\u7acb\u65e5\u671f"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,M,15,7,"tr",7),t.qZA()()(),t.TgZ(18,"app-pagination",8),t.NdJ("change",function(a){t.CHM(e);const _=t.oxw(2);return t.KtG(_.paginationChange(a))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(17),t.Q6J("ngForOf",e.articles()),t.xp6(1),t.Q6J("total",e.total())("currentPage",e.page())}}function v(n,o){if(1&n&&(t.ynx(0),t.YNc(1,C,19,3,"ng-container",0),t.BQk()),2&n){const e=t.oxw(),r=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!e.isLoading())("ngIfElse",r)}}function O(n,o){1&n&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"div",14),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"div",14),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"div",14),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"div",14),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"div",14),t.qZA()())}const P=function(){return[1,2,3,4,5]};function U(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"table",5)(2,"tbody")(3,"tr"),t._UZ(4,"td"),t.TgZ(5,"td",6),t._uU(6,"\u6587\u7ae0\u6a19\u984c"),t.qZA(),t.TgZ(7,"td",6),t._uU(8,"\u5206\u985e"),t.qZA(),t.TgZ(9,"td",6),t._uU(10,"\u700f\u89bd\u6b21\u6578"),t.qZA(),t.TgZ(11,"td",6),t._uU(12,"\u5efa\u7acb\u65e5\u671f"),t.qZA()(),t.YNc(13,O,11,0,"tr",7),t.qZA()()(),t.TgZ(14,"app-pagination",8),t.NdJ("change",function(a){t.CHM(e);const _=t.oxw();return t.KtG(_.paginationChange(a))}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",t.DdM(3,P)),t.xp6(1),t.Q6J("total",e.total())("currentPage",e.page())}}function b(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"app-error",16),t.NdJ("refresh",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getArticle())}),t.qZA()()}}let B=(()=>{class n{constructor(){this.articleSrv=(0,t.f3M)(D.n),this.sharedSrv=(0,t.f3M)(x.F),this.swalSrv=(0,t.f3M)(f.J),this.route=(0,t.f3M)(p.gz),this.router=(0,t.f3M)(p.F0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,c.sL)(this._destroyRef)).subscribe(e=>{const r=e.get("page"),a=r?parseInt(r):1;this.page.set(isNaN(a)?1:a),this.getArticle(this.page())})}getArticle(e){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(e).pipe((0,Z.K)(r=>{throw this.isError.set(!0),r}),(0,T.x)(()=>this.isLoading.set(!1)),(0,c.sL)(this._destroyRef)).subscribe(r=>{if(this.sharedSrv.ifSuccess(r)){const{data:{total:a,articles:_}}=r;this.total.set(a),this.articles.set(_)}else this.isError.set(!0)})}paginationChange(e){this.router.navigate(["/setting/article"],{queryParams:{page:e}})}deleteArticle(e){this.swalSrv.confirm({text:"\u78ba\u5b9a\u8981\u522a\u9664\u6587\u7ae0\u55ce?"}).pipe((0,d.h)(({isConfirmed:r})=>r),(0,h.w)(()=>this.articleSrv.deleteArticle(e)),(0,d.h)(r=>this.sharedSrv.ifSuccess(r,!0)),(0,h.w)(r=>this.swalSrv.alert({icon:f.u.Success,text:r.returnMessage})),(0,c.sL)(this._destroyRef)).subscribe(()=>this.getArticle())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-article-detail"]],standalone:!0,features:[t._Bn([(0,g.kp)({heroPencilSquare:u.yUl,heroTrash:u.ciC})]),t.jDz],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"btn","btn-primary","my-5"],[1,"overflow-x-auto","w-full"],[1,"table","table-zebra","w-full"],[1,"text-lg"],[4,"ngFor","ngForOf"],[3,"total","currentPage","change"],[1,"flex"],["type","button",1,"btn","btn-primary","m-1","flex","justify-center","items-center"],["name","heroPencilSquare"],["type","button",1,"btn","btn-error","m-1","flex","justify-center","items-center",3,"click"],["name","heroTrash"],[1,"h-5","my-3","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,r){if(1&e&&(t.YNc(0,v,2,2,"ng-container",0),t.YNc(1,U,15,4,"ng-template",null,1,t.W1O),t.YNc(3,b,2,0,"ng-template",null,2,t.W1O)),2&e){const a=t.MAs(4);t.Q6J("ngIf",!r.isError())("ngIfElse",a)}},dependencies:[s.ez,s.sg,s.O5,g.Fv,A.q,m.Q,E.g]}),n})()}}]);