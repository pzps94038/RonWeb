"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[168],{6168:(L,l,o)=>{o.r(l),o.d(l,{LoginComponent:()=>M});var g=o(508),t=o(3020),d=o(4755),c=o(9128),r=o(5030),m=o(9589),p=o(1730),f=o(3144),h=o(2340);let v=(()=>{class n{constructor(){this.http=(0,t.f3M)(f.eN)}login(e){return this.http.post(`${h.N.baseUrl}/login`,e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=o(3500),Z=o(262),b=o(8746),u=o(2993),C=o(5249),y=o(9148);function S(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"span",14),t._uU(3),t.qZA()(),t.TgZ(4,"ng-icon",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.errMsg.set(""))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.errMsg())}}let M=(()=>{class n{constructor(){this.loginSrv=(0,t.f3M)(v),this.sharedSrv=(0,t.f3M)(x.F),this.router=(0,t.f3M)(y.F0),this.loading=(0,t.tdS)(!1),this.errMsg=(0,t.tdS)(void 0),this._destroyRef=(0,t.f3M)(t.ktI),this.form=new r.cw({account:new r.NI("",[r.kI.required]),password:new r.NI("",[r.kI.required])}),this.loginOptions={path:"assets/lottie/login.json"}}get account(){return this.form.get("account")}get password(){return this.form.get("password")}submit(){this.form.markAllAsTouched(),this.form.valid&&(this.loading.set(!0),this.loginSrv.login({account:this.account.value,password:this.password.value}).pipe((0,Z.K)(e=>{throw this.errMsg.set("\u7cfb\u7d71\u767c\u751f\u932f\u8aa4"),e}),(0,b.x)(()=>this.loading.set(!1)),(0,g.sL)(this._destroyRef)).subscribe(e=>{const{returnMessage:s,data:{token:a,userId:T}}=e;this.sharedSrv.ifSuccess(e)?(this.sharedSrv.setToken(a),this.sharedSrv.setUserId(T),this.sharedSrv.isLogin.set(!0),this.router.navigate(["setting"])):this.errMsg.set(s)}))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],standalone:!0,features:[t._Bn([(0,u.kp)({heroXMark:C.CZj})]),t.jDz],decls:17,vars:6,consts:[[1,"bg-banner","bg-cover","bg-fixed","h-screen","flex","justify-center","items-center"],[1,"bg-base-100","text-base-content","rounded-md","mt-20","md:mt-0","mx-5"],[1,"text-center","text-3xl","font-semibold","my-3"],[1,"w-60","mx-auto"],[3,"options"],[1,"flex","flex-wrap","items-center","w-full","sm:w-[500px]",3,"formGroup","ngSubmit"],[1,"w-full","px-3","my-2"],["class","alert alert-error shadow-lg border-2 bg-rose-800/[0.1] border-rose-900 relative py-5",4,"ngIf"],["placeholder","\u8acb\u8f38\u5165\u5e33\u865f","formControlName","account",1,"w-full"],["type","password","placeholder","\u8acb\u8f38\u5165\u5bc6\u78bc","formControlName","password",1,"w-full"],[1,"w-full","flex","justify-center","items-center"],["type","submit",1,"btn","btn-primary","my-3","px-8",3,"disabled"],[1,"alert","alert-error","shadow-lg","border-2","bg-rose-800/[0.1]","border-rose-900","relative","py-5"],[1,"absolute","left-5","top-2"],[1,"text-base","font-semibold","text-rose-900"],["name","heroXMark",1,"cursor-pointer","absolute","right-5","top-1","md:top-3","text-rose-900",3,"click"]],template:function(e,s){1&e&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"div",1)(3,"h3",2),t._uU(4,"\u767b\u5165"),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"ng-lottie",4),t.qZA(),t.TgZ(7,"form",5),t.NdJ("ngSubmit",function(){return s.submit()}),t.TgZ(8,"div",6),t.YNc(9,S,5,1,"div",7),t.qZA(),t.TgZ(10,"div",6),t._UZ(11,"app-input",8),t.qZA(),t.TgZ(12,"div",6),t._UZ(13,"app-input",9),t.qZA(),t.TgZ(14,"div",10)(15,"button",11),t._uU(16," \u767b\u5165 "),t.qZA()()()()()),2&e&&(t.xp6(6),t.Q6J("options",s.loginOptions),t.xp6(1),t.Q6J("formGroup",s.form),t.xp6(2),t.Q6J("ngIf",s.errMsg()),t.xp6(6),t.ekj("loading",s.loading()),t.Q6J("disabled",s.loading()))},dependencies:[d.ez,d.O5,c.a,r.UX,r._Y,r.JJ,r.JL,r.sg,r.u,m.G,p.r,u.Fv]}),n})()}}]);