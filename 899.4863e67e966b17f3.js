"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[899],{899:(L,f,o)=>{o.r(f),o.d(f,{CodeEditComponent:()=>B});var e=o(9416),c=o(4755),s=o(9401),h=o(6355),E=o(1415),p=o(9096),g=o(5855),C=o(8505),n=o(9300),u=o(4004),v=o(3900),I=o(8746),M=o(7929),D=o(4052),T=o(6737);function b(d,a){if(1&d){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(2,"div",3),e._UZ(3,"app-input",4),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-input",5),e.qZA(),e.TgZ(6,"div",3),e._UZ(7,"app-input",6),e.qZA(),e.TgZ(8,"div",3),e._UZ(9,"app-input",7),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e._uU(12," \u4fee\u6539\u4ee3\u78bc "),e.qZA()()(),e.BQk()}if(2&d){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(10),e.ekj("loading",t.isLoading()),e.Q6J("disabled",t.isLoading())}}function A(d,a){1&d&&(e.TgZ(0,"div",10)(1,"div")(2,"div",11),e._UZ(3,"div",12),e.qZA()()())}let B=(()=>{class d{constructor(){this.apiSrv=(0,e.f3M)(M.s),this.userSrv=(0,e.f3M)(D.K),this.swalSrv=(0,e.f3M)(p.J),this.adminCodeSrv=(0,e.f3M)(T.c),this.route=(0,e.f3M)(E.gz),this.router=(0,e.f3M)(E.F0),this.isLoading=(0,e.tdS)(!1),this.editIsLoading=(0,e.tdS)(!1),this.isError=(0,e.tdS)(!1),this._destroyRef=(0,e.f3M)(e.ktI),this.form=new s.cw({id:new s.NI(void 0,[s.kI.required]),codeTypeId:new s.NI({value:"",disabled:!0},[s.kI.required]),codeTypeName:new s.NI({value:"",disabled:!0},[s.kI.required]),codeId:new s.NI("",[s.kI.required]),codeName:new s.NI("",[s.kI.required])})}ngOnInit(){this.route.paramMap.pipe((0,C.b)(()=>this.isLoading.set(!0)),(0,n.h)(t=>!!t.get("id")),(0,u.U)(t=>t.get("id")),(0,n.h)(t=>!isNaN(parseInt(t))),(0,u.U)(t=>parseInt(t)),(0,v.w)(t=>this.adminCodeSrv.getAdminCodeById(t)),(0,n.h)(t=>this.apiSrv.ifSuccess(t)),(0,u.U)(({data:t})=>t),(0,g.sL)(this._destroyRef)).subscribe(t=>{var r,i,l,_,m;const{id:O,codeId:x,codeName:P,codeTypeId:y,codeTypeName:N}=t;null===(r=this.form.get("id"))||void 0===r||r.setValue(O),null===(i=this.form.get("codeId"))||void 0===i||i.setValue(x),null===(l=this.form.get("codeName"))||void 0===l||l.setValue(P),null===(_=this.form.get("codeTypeId"))||void 0===_||_.setValue(y),null===(m=this.form.get("codeTypeName"))||void 0===m||m.setValue(N),this.isLoading.set(!1)})}submit(){if(this.form.markAllAsTouched(),this.form.invalid)return;const t={codeTypeId:this.form.get("codeTypeId").value,codeId:this.form.get("codeId").value,codeName:this.form.get("codeName").value,userId:this.userSrv.getUserId()};this.editIsLoading.set(!0),this.adminCodeSrv.updateAdminCode(this.form.get("id").value,t).pipe((0,n.h)(r=>this.apiSrv.ifSuccess(r,!0)),(0,v.w)(({returnMessage:r})=>this.swalSrv.alert({icon:p.u.Success,text:r})),(0,I.x)(()=>this.editIsLoading.set(!1)),(0,g.sL)(this._destroyRef)).subscribe(()=>this.router.navigate([`/setting/code-type/${this.form.get("codeTypeId").value}`]))}}return d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-code-edit"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"my-5"],["labelName","\u4ee3\u78bc\u985e\u578bID","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u985e\u578bID","formControlName","codeTypeId",1,"w-full"],["labelName","\u4ee3\u78bc\u985e\u578b\u540d\u7a31","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u985e\u578b\u540d\u7a31","formControlName","codeTypeName",1,"w-full"],["labelName","\u4ee3\u78bcID","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bcID","formControlName","codeId",1,"w-full"],["labelName","\u4ee3\u78bc\u540d\u7a31","labelClass","text-lg my-2 text-center md:text-left","placeholder","\u8acb\u8f38\u5165\u4ee3\u78bc\u540d\u7a31","formControlName","codeName",1,"w-full"],[1,"flex","justify-end","items-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"bg-base-100","border","border-base-content/10","text-base-content","rounded-md","p-5","mb-5"],[1,"flex","items-center"],[1,"h-5","my-2","w-full","rounded-lg","bg-slate-300/10","relative","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-slate-300/10","before:bg-gradient-to-r","before:from-transparent","before:bg-slate-300/10","before:to-transparent","overflow-hidden"]],template:function(t,r){if(1&t&&(e.YNc(0,b,13,4,"ng-container",0),e.YNc(1,A,4,0,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",!r.isLoading())("ngIfElse",i)}},dependencies:[c.ez,c.O5,h.a,s.UX,s._Y,s.JJ,s.JL,s.sg,s.u]}),d})()}}]);