"use strict";(self.webpackChunkRonWeb=self.webpackChunkRonWeb||[]).push([[71],{5071:(F,p,o)=>{o.r(p),o.d(p,{HomeComponent:()=>S});var g=o(508),t=o(3020),c=o(4755),d=o(6453),f=o(3556),m=o(3144),l=o(2340);let u=(()=>{class n{constructor(){this.http=(0,t.f3M)(m.eN)}getArticle(e){if(e){const r=(new m.LE).append("page",e);return this.http.get(`${l.N.baseUrl}/article`,{params:r})}return this.http.get(`${l.N.baseUrl}/article`)}getArticleById(e){return this.http.get(`${l.N.baseUrl}/article/${e}`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=o(3500),_=o(262),C=o(8746),h=o(9148),y=o(3772),x=o(279);const M=function(n,a){return{categoryId:n,categoryName:a}};function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-article-card",5),t.NdJ("category",function(i){t.CHM(e);const s=t.oxw(3);return t.KtG(s.navigateCategory(i))})("showMore",function(){const s=t.CHM(e).$implicit,E=t.oxw(3);return t.KtG(E.showMore(s.articleId))}),t.qZA()}if(2&n){const e=a.$implicit;t.Q6J("title",e.articleTitle)("date",e.createDate)("category",t.WLB(4,M,e.categoryId,e.categoryName))("previewContent",e.previewContent)}}function N(n,a){if(1&n&&(t.ynx(0),t.YNc(1,H,1,7,"app-article-card",4),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.articles())}}function A(n,a){if(1&n&&(t.ynx(0),t.YNc(1,N,2,1,"ng-container",0),t.BQk()),2&n){const e=t.oxw(),r=t.MAs(2);t.xp6(1),t.Q6J("ngIf",!e.isLoading())("ngIfElse",r)}}function I(n,a){1&n&&t._UZ(0,"app-loading-card")(1,"app-loading-card")(2,"app-loading-card")}function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"app-error",7),t.NdJ("refresh",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getArticle())}),t.qZA()()}}let S=(()=>{class n{constructor(){this.articleSrv=(0,t.f3M)(u),this.sharedSrv=(0,t.f3M)(v.F),this.route=(0,t.f3M)(h.gz),this.router=(0,t.f3M)(h.F0),this.total=(0,t.tdS)(0),this.articles=(0,t.tdS)([]),this.isLoading=(0,t.tdS)(!1),this.isError=(0,t.tdS)(!1),this.page=(0,t.tdS)(1),this._destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.route.queryParamMap.pipe((0,g.sL)(this._destroyRef)).subscribe(e=>{const r=e.get("page"),i=r?parseInt(r):1;this.page.set(isNaN(i)?1:i),this.getArticle(this.page())})}getArticle(e){this.isError.set(!1),this.isLoading.set(!0),this.articleSrv.getArticle(e).pipe((0,_.K)(r=>{throw this.isError.set(!0),r}),(0,C.x)(()=>this.isLoading.set(!1)),(0,g.sL)(this._destroyRef)).subscribe(r=>{if(this.sharedSrv.ifSuccess(r)){const{data:{total:i,articles:s}}=r;this.total.set(i),this.articles.set(s)}else this.isError.set(!0)})}showMore(e){this.router.navigateByUrl(`/blog/article/${e}`)}navigateCategory({categoryId:e}){this.router.navigateByUrl(`/blog/category/${e}`)}paginationChange(e){this.router.navigate(["/blog/home"],{queryParams:{page:e}})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],standalone:!0,features:[t.jDz],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[3,"total","currentPage","change"],[3,"title","date","category","previewContent","showMore",4,"ngFor","ngForOf"],[3,"title","date","category","previewContent","showMore"],[1,"bg-slate-800","rounded-md","mx-0","md:mx-5","p-5","mb-5"],[3,"refresh"]],template:function(e,r){if(1&e&&(t.YNc(0,A,2,2,"ng-container",0),t.YNc(1,I,3,0,"ng-template",null,1,t.W1O),t.YNc(3,T,2,0,"ng-template",null,2,t.W1O),t.TgZ(5,"app-pagination",3),t.NdJ("change",function(s){return r.paginationChange(s)}),t.qZA()),2&e){const i=t.MAs(4);t.Q6J("ngIf",!r.isError())("ngIfElse",i),t.xp6(5),t.Q6J("total",r.total())("currentPage",r.page())}},dependencies:[c.ez,c.sg,c.O5,d.y,f.Q,y.q,x.o]}),n})()}}]);